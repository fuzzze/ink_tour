//////////////////////////////////////////////////////////////////////
// Pano2VR 5.1 beta/15555 HTML5/CSS3 & WebGL Panorama Player        //
// License: Lozhkin Dmitry                                          //
// (c) 2016, Garden Gnome Software, http://ggnome.com               //
//////////////////////////////////////////////////////////////////////

function G(){var n="perspective",f=["Webkit","Moz","O","ms","Ms"],e;for(e=0;e<f.length;e++)"undefined"!==typeof document.documentElement.style[f[e]+"Perspective"]&&(n=f[e]+"Perspective");"undefined"!==typeof document.documentElement.style[n]?"webkitPerspective"in document.documentElement.style?(n=document.createElement("style"),f=document.createElement("div"),e=document.head||document.getElementsByTagName("head")[0],n.textContent="@media (-webkit-transform-3d) {#ggswhtml5{height:5px}}",e.appendChild(n),
f.id="ggswhtml5",document.documentElement.appendChild(f),e=5===f.offsetHeight,n.parentNode.removeChild(n),f.parentNode.removeChild(f)):e=!0:e=!1;return e}function N(){var n;if(n=!!window.WebGLRenderingContext)try{var f=document.createElement("canvas");f.width=100;f.height=100;var e=f.getContext("webgl");e||(e=f.getContext("experimental-webgl"));n=!!e}catch(a){n=!1}return n}
var __extends=this&&this.__extends||function(n,f){function e(){this.constructor=n}for(var a in f)f.hasOwnProperty(a)&&(n[a]=f[a]);n.prototype=null===f?Object.create(f):(e.prototype=f.prototype,new e)},ggP2VR;
(function(n){var f=function(){function a(a){this.g=null;this.df=this.Ej=this.qb=!1;this.nb=this.Na=this.Aa=0;this.f=70;this.Qa=0;this.autoplay=this.hf=!1;this.id="";this.j=this.pan=0;this.g=a;this.Nc=this.xc=100;this.$c=1}a.prototype.ub=function(a){var d;if(d=a.getAttributeNode("id"))this.id=d.nodeValue.toString();if(d=a.getAttributeNode("pan"))this.pan=Number(d.nodeValue);if(d=a.getAttributeNode("tilt"))this.j=Number(d.nodeValue)};a.prototype.Yk=function(a){var d="",c=this.g;c.rc&&(d+="perspective("+
a+"px) ");d=d+("translate3d(0px,0px,"+a+"px) ")+("rotateZ("+c.K.a.toFixed(10)+"deg) ");d+="rotateX("+c.j.a.toFixed(10)+"deg) ";d+="rotateY("+(-c.pan.a).toFixed(10)+"deg) ";d+="rotateY("+this.pan.toFixed(10)+"deg) ";d+="rotateX("+(-this.j).toFixed(10)+"deg) ";a=1E4;var h=this.c.videoWidth,e=this.c.videoHeight;if(0==h||0==e)h=640,e=480;0<this.xc&&(h=this.xc);0<this.Nc&&(e=this.Nc);0<h&&0<e&&(this.c.width=h,this.c.height=e,this.c.style.width=h+"px",this.c.style.height=e+"px");0<this.f&&(a=h/(2*Math.tan(this.f/
2*Math.PI/180)));d+="translate3d(0px,0px,"+(-a).toFixed(10)+"px) ";d+="rotateZ("+this.nb.toFixed(10)+"deg) ";d+="rotateY("+(-this.Na).toFixed(10)+"deg) ";d+="rotateX("+this.Aa.toFixed(10)+"deg) ";this.$c&&1!=this.$c&&(d+="scaleY("+this.$c+") ");d+="translate3d("+-h/2+"px,"+-e/2+"px,0px) ";this.c.style[c.Ra+"Origin"]="0% 0%";this.qb&&(d="",1==this.Qa&&(d+="scale("+Math.min(c.m.width/h,c.m.height/e)+") "),d+="translate3d("+-h/2+"px,"+-e/2+"px,0px) ");this.ym!=d&&(this.ym=d,this.c.style[c.Ra]=d,this.c.style.visibility=
"visible",this.df&&this.Ej==this.qb&&(this.c.style[c.Lc]="all 0s linear 0s"),this.Ej=this.qb)};a.prototype.Fk=function(){this.c&&(this.c.style.visibility="hidden")};a.prototype.ee=function(){var a=this.g;this.c.style.left=a.margin.left+a.m.width/2+"px";this.c.style.top=a.margin.top+a.m.height/2+"px"};return a}();n.xo=f;var e=function(a){function b(b){a.call(this,b);this.ri=this.lg=this.Ke=this.ga=!1;this.Se=this.pb=null;this.Wd=this.Nf=0;this.Yg=this.pi=this.ze=!1;this.url=[];this.loop=0;this.level=
1;this.vc=0;this.mode=1;this.ij=10;this.eh=this.sb=0;this.ia=1;this.Cc=this.uc=this.tc=this.Bc=0}__extends(b,a);b.prototype.Ik=function(){this.ga&&this.Yg?this.Yg=!1:0==this.loop?this.ga?(this.pb=null,this.Gc()):this.c.play():0<this.Ic?(this.Ic--,this.ga||(this.c.currentTime=0),this.lg&&(this.Mc&&0==this.Mc.gain.value||0==this.ic.gain.value&&0==this.lc.gain.value&&0==this.jc.gain.value&&0==this.kc.gain.value)||(this.ga?(this.pb=null,this.Gc()):this.c.play())):this.ga&&(this.pb=null,this.ze=!1)};b.prototype.qh=
function(){var a=this.g.Ca;a&&(this.ga||(this.source=a.createMediaElementSource(this.c)),2==this.mode||3==this.mode||5==this.mode?(this.ke=a.createChannelSplitter(2),this.ic=a.createGain(),this.jc=a.createGain(),this.kc=a.createGain(),this.lc=a.createGain(),this.Ve=a.createChannelMerger(2),this.ga||this.source.connect(this.ke),this.ke.connect(this.ic,0),this.ke.connect(this.jc,0),this.ke.connect(this.kc,1),this.ke.connect(this.lc,1),this.ic.connect(this.Ve,0,0),this.jc.connect(this.Ve,0,1),this.kc.connect(this.Ve,
0,0),this.lc.connect(this.Ve,0,1),this.Ve.connect(a.destination)):(this.Mc=a.createGain(),this.ga||this.source.connect(this.Mc),this.Mc.connect(a.destination)))};b.prototype.If=function(){var a=this.g.Ca;this.qb||this.ri||(this.ic.gain.setValueAtTime(this.Bc,a.currentTime),this.lc.gain.setValueAtTime(this.Cc,a.currentTime),this.jc.gain.setValueAtTime(this.tc,a.currentTime),this.kc.gain.setValueAtTime(this.uc,a.currentTime))};b.prototype.ih=function(){var a=this.g,b=this.g.Ca;if(this.c||this.ga){var h,
e=this.pan-a.pan.a;for(h=this.j-a.j.a;-180>e;)e+=360;for(;180<e;)e-=360;var g=this.vc,m=this.ij;0==m&&(m=.01);0>m&&(m=a.f.a);this.wb||(this.wb=new n.ua,this.wb.lj(this.pan,this.j));0!=this.mode&&1!=this.mode||!b||this.Mc&&this.Mc.gain.setValueAtTime(this.level*a.W*this.ia,b.currentTime);if(2==this.mode&&b){var l=.5*Math.cos(e*Math.PI/180)+.5;this.Bc=Math.sqrt(l)*this.ia*this.level*a.W;this.Cc=Math.sqrt(l)*this.ia*this.level*a.W;this.tc=Math.sqrt(1-l)*this.ia*this.level*a.W;this.uc=Math.sqrt(1-l)*
this.ia*this.level*a.W;this.If()}if(3==this.mode){0>e?e<-this.sb?e+=this.sb:e=0:e=e>this.sb?e-this.sb:0;l=this.level;h=Math.abs(h);h=h<this.eh?0:h-this.eh;var k=1-h/m;if(Math.abs(e)>m||0>k){var f=l*g*a.W;b?(this.Bc=f*this.ia,this.Cc=f*this.ia,this.uc=this.tc=0,this.If()):this.c.volume=l*g*a.W}else if(f=1-Math.abs(e/m),b){var p=l*(g+(1-g)*k*f)*a.W,f=l*g*a.W;0<=e?(this.Bc=p*this.ia,this.Cc=f*this.ia):(this.Bc=f*this.ia,this.Cc=p*this.ia);2*Math.abs(e)<m?(f=1-Math.abs(2*e)/m,p=l*(g+(1-g)*k*f)*a.W,f=
.5*l*(1-g)*k*(1-f)*a.W,0<=e?(this.Cc=p*this.ia,this.uc=f*this.ia,this.tc=0):(this.Bc=p*this.ia,this.tc=f*this.ia,this.uc=0)):(f=1-(Math.abs(2*e)-m)/m,p=.5*l*(1-g)*k*f*a.W,0<=e?(this.uc=p*this.ia,this.tc=0):(this.tc=p*this.ia,this.uc=0));this.If()}else this.c.volume=l*(g+(1-g)*k*f)*a.W}4==this.mode&&(Math.abs(e)<this.sb&&Math.abs(h)<this.eh?this.Ke||(this.Ke=!0,this.Ic=this.loop-1,this.ga?this.ze||this.Gc():this.c.play()):this.Ke=!1);5==this.mode&&(h=180*Math.acos(a.Fh.Lg(this.wb))/Math.PI,h<this.sb?
b?(this.Bc=this.level*a.W*this.ia,this.Cc=this.level*a.W*this.ia,this.uc=this.tc=0,this.If()):this.c.volume=this.level*a.W:b?h<this.sb+m?(0>e?e=e>-this.sb?0:e+this.sb:e=e<this.sb?0:e-this.sb,p=1-Math.max(h-this.sb,0)/m,f=Math.max(1-Math.abs(e)*Math.cos(this.j*Math.PI/180)/m,0),0<e?(this.Bc=this.level*(p*(1-this.vc)+this.vc)*a.W*this.ia,this.Cc=this.level*(p*f*(1-this.vc)+this.vc)*a.W*this.ia,this.tc=0,this.uc=this.level*p*(1-f)*a.W*this.ia):(this.Bc=this.level*(p*f*(1-this.vc)+this.vc)*a.W*this.ia,
this.Cc=this.level*(p*(1-this.vc)+this.vc)*a.W*this.ia,this.tc=this.level*p*(1-f)*a.W*this.ia,this.uc=0),this.If()):(p=this.level*this.vc*a.W,this.Bc=p*this.ia,this.Cc=p*this.ia,this.uc=this.tc=0):(h-=this.sb,this.c.volume=h<m&&0<m?this.level*(g+(1-g)*(1-Math.abs(h/m)))*a.W:g*a.W));6==this.mode&&(h=180*Math.acos(a.Fh.Lg(this.wb))/Math.PI,Math.abs(h)<this.sb?this.Ke||(this.Ke=!0,this.Ic=this.loop-1,this.ga?this.ze||this.Gc():this.c.play()):this.Ke=!1)}};b.prototype.$i=function(){var a=this;a.pb=this.g.Ca.createBufferSource();
a.pb.addEventListener("ended",function(){a.Ik()},!1);2==a.mode||3==a.mode||5==a.mode?a.pb.connect(a.ke):a.pb.connect(a.Mc)};b.prototype.en=function(a){var b=this,h=this.g.Ca;b.$i();this.g.T("createBufferSoundSource()");h.decodeAudioData(a,function(a){b.Se=a;b.pb.buffer=a;b.g.T("audio Data decoded");b.pi&&(b.Gc(),b.pi=!1)})};b.prototype.Gc=function(){var a=this.g.Ca,b=this.Wd;this.Se?(null==this.pb&&(this.$i(),this.pb.buffer=this.Se),this.Nf=a.currentTime-b,this.Wd=0,this.ze=!0,this.Yg=!1,this.pb.start(0,
b),this.g.T("buffer Source started")):(this.g.T("bufferSoundPlay() -> no audio buffer -> playWhenReady"),this.pi=!0)};b.prototype.xh=function(){var a=this.g.Ca.currentTime-this.Nf;this.je();this.Wd=a};b.prototype.je=function(){this.pb&&(this.Yg=!0,this.pb.disconnect(),this.pb.stop(0),this.pb=null);this.Nf=this.Wd=0;this.ze=!1};b.prototype.Al=function(){var a=this.g.Ca;return this.Wd?this.Wd:this.Nf?a.currentTime-this.Nf:0};b.prototype.Bl=function(a){this.je();this.Wd=a;this.Gc()};b.prototype.addElement=
function(){var a=-1,b=this,h=this.g,e=this.g.Ca;try{for(var g=!1,m=0;m<h.S.length;m++)h.S[m].id==b.id&&(a=m,null==h.S[m].c&&!h.S[m].ga||h.S[m].url.join()!=b.url.join()||h.S[m].loop!=b.loop||h.S[m].mode!=b.mode||(g=!0));if(g)h.T("Keep playing "+b.id);else{if(0<=a){var l=h.S[a];if(null!=l.c||l.ga)if(e&&h.Ea.enabled)h.Ea.Sf.push(l),1!=h.M.Va&&2!=h.M.Va&&h.Ea.Lh(l);else{try{l.ga?l.xh():l.c.pause()}catch(f){h.T(f)}try{l.Yd()}catch(f){h.T(f)}}}if(e){if(0<b.url.length){b.ga=!0;b.qh();var k=new XMLHttpRequest;
k.open("GET",h.Rb(b.url[0]),!0);k.responseType="arraybuffer";k.onload=function(){b.en(k.response)};k.send();b.lg=!1}}else{b.c=document.createElement("audio");b.c.crossOrigin=h.crossOrigin;b.c.setAttribute("class","ggmedia");h.ve&&b.c.setAttribute("id",h.ve+b.id);for(m=0;m<b.url.length;m++)g=void 0,g=document.createElement("source"),""!=b.url[m]&&"#"!=b.url[m]&&(g.crossOrigin=h.crossOrigin,g.setAttribute("src",h.Rb(b.url[m])),b.c.appendChild(g));b.c.volume=b.level*h.W;0<b.c.childNodes.length&&(h.V.appendChild(b.c),
b.c.addEventListener("ended",function(){b.Ik()},!1),e&&(b.qh(),b.lg=!1,0==b.loop&&b.source.mediaElement&&(b.source.mediaElement.loop=!0)))}1<=b.loop&&(b.Ic=b.loop-1);0<=a?h.S[a]=b:h.S.push(b);1!=b.mode&&2!=b.mode&&3!=b.mode&&5!=b.mode||!(0<=b.loop)||e&&h.Ea.enabled||(b.ga||(b.c.autoplay=!0),b.autoplay=!0);0==b.mode&&0<=b.loop&&(b.autoplay=!0);b.ih()}}catch(f){this.g.T(f)}};b.prototype.Yd=function(){try{this.g.T("Remove Snd:"+this.id),this.ga||(this.g.V.removeChild(this.c),this.c=null)}catch(a){this.g.T(a)}};
b.prototype.ub=function(b){a.prototype.ub.call(this,b);var c;(c=b.getAttributeNode("url"))&&this.url.push(c.nodeValue.toString());if(c=b.getAttributeNode("level"))this.level=Number(c.nodeValue);if(c=b.getAttributeNode("loop"))this.loop=Number(c.nodeValue);if(c=b.getAttributeNode("mode"))this.mode=Number(c.nodeValue);if(c=b.getAttributeNode("field"))this.ij=Number(c.nodeValue);if(c=b.getAttributeNode("ambientlevel"))this.vc=Number(c.nodeValue);if(c=b.getAttributeNode("pansize"))this.sb=Number(c.nodeValue);
if(c=b.getAttributeNode("tiltsize"))this.eh=Number(c.nodeValue);for(b=b.firstChild;b;)"source"==b.nodeName&&(c=b.getAttributeNode("url"))&&this.url.push(c.nodeValue.toString()),b=b.nextSibling};return b}(f);n.ql=e;e=function(a){function b(b){a.call(this,b);this.poster="";this.nb=this.Na=this.Aa=0;this.f=50;this.Qa=0;this.hd=this.hf=!1}__extends(b,a);b.prototype.Oc=function(){1!=this.Qa&&4!=this.Qa||this.ef(!this.qb);2==this.Qa&&this.g.nk(this.id)};b.prototype.ef=function(a){var b=this.g,h=b.Ca;if(1==
this.Qa||4==this.Qa)if(this.qb=a,this.g.ob)(b=b.fa)&&b.activateSound(this.id,this.qb?1:0);else{if(this.qb)this.c.play(),this.c.style.zIndex=(b.Zf+8E4).toString(),this.c.style[this.g.Lc]="all 1s ease 0s",b.Xd(this.id);else{this.c.style.zIndex=b.Zf.toString();this.c.style[this.g.Lc]="all 1s ease 0s";this.ri=!0;var e=this;setTimeout(function(){e.ri=!1},1E3)}if(h){var h=h.currentTime,g=this.ic.gain.value,m=this.lc.gain.value,l=this.jc.gain.value,f=this.kc.gain.value;this.qb?(this.ic.gain.linearRampToValueAtTime(g,
h),this.ic.gain.linearRampToValueAtTime(this.level*b.W,h+1),this.lc.gain.linearRampToValueAtTime(m,h),this.lc.gain.linearRampToValueAtTime(this.level*b.W,h+1),this.jc.gain.linearRampToValueAtTime(l,h),this.jc.gain.linearRampToValueAtTime(0,h+1),this.kc.gain.linearRampToValueAtTime(f,h),this.kc.gain.linearRampToValueAtTime(0,h+1)):(this.ic.gain.linearRampToValueAtTime(g,h),this.ic.gain.linearRampToValueAtTime(this.Bc,h+1),this.lc.gain.linearRampToValueAtTime(m,h),this.lc.gain.linearRampToValueAtTime(this.Cc,
h+1),this.jc.gain.linearRampToValueAtTime(l,h),this.jc.gain.linearRampToValueAtTime(this.tc,h+1),this.kc.gain.linearRampToValueAtTime(f,h),this.kc.gain.linearRampToValueAtTime(this.uc,h+1))}this.df=!0;this.g.Zk()}2==this.Qa&&(a?this.g.Xd(this.id):this.g.oi(this.id))};b.prototype.ff=function(){this.df=!1;this.c.style[this.g.Lc]="none"};b.prototype.po=function(){0==this.loop?this.c.play():0<this.Ic?(this.Ic--,this.c.currentTime=0,this.c.play()):this.Sj=!1};b.prototype.ub=function(b){a.prototype.ub.call(this,
b);var c;if(c=b.getAttributeNode("poster"))this.poster=String(c.nodeValue);if(c=b.getAttributeNode("rotx"))this.Aa=Number(c.nodeValue);if(c=b.getAttributeNode("roty"))this.Na=Number(c.nodeValue);if(c=b.getAttributeNode("rotz"))this.nb=Number(c.nodeValue);if(c=b.getAttributeNode("fov"))this.f=Number(c.nodeValue);if(c=b.getAttributeNode("width"))this.xc=Number(c.nodeValue);if(c=b.getAttributeNode("height"))this.Nc=Number(c.nodeValue);this.$c=(c=b.getAttributeNode("stretch"))?Number(c.nodeValue):1;if(c=
b.getAttributeNode("clickmode"))this.Qa=Number(c.nodeValue);if(c=b.getAttributeNode("handcursor"))this.hf=1==Number(c.nodeValue)};b.prototype.addElement=function(){var a=this,b=this.g;try{a.c=document.createElement("video");a.c.setAttribute("class","ggmedia");a.c.crossOrigin=b.crossOrigin;a.c.hidden=!0;b.ve&&a.c.setAttribute("id",b.ve+a.id);if(b.Wf)a.c.setAttribute("webkit-playsinline","webkit-playsinline"),a.c.setAttribute("style","display: none; max-width:none;");else if(a.c.setAttribute("style",
"max-width:none;pointer-events:none;"),a.c.setAttribute("webkit-playsinline","webkit-playsinline"),1==a.Qa||4==a.Qa)a.c.addEventListener(b.el(),function(){a.ff()},!1),a.c.addEventListener("transitionend",function(){a.ff()},!1);var h;for(h=0;h<a.url.length;h++){var e;e=document.createElement("source");e.crossOrigin=b.crossOrigin;e.setAttribute("src",b.Rb(a.url[h]));a.c.appendChild(e)}""!=a.poster&&(a.c.poster=b.Rb(a.poster),0>a.loop&&(a.c.b="none"));a.c.volume=a.level*b.W;1<=a.loop&&(a.Ic=a.loop-1);
(1==a.mode||2==a.mode||3==a.mode||5==a.mode)&&0<=a.loop&&(a.c.autoplay=!0,a.Sj=!0,a.autoplay=!0);b.H.push(this);b.Wf?b.V.appendChild(a.c):(a.c.style.position="absolute",a.xc&&(a.c.width=a.xc),a.Nc&&(a.c.height=a.Nc),b.A.appendChild(a.c),a.qh());a.c.onclick=function(){a.Oc()};a.c.addEventListener("ended",function(){a.po()},!1)}catch(g){b.T(g)}};b.prototype.registerElement=function(a,b){this.hd=!0;this.c=b;this.id=a;this.level=1;this.g.H.push(this)};b.prototype.Yd=function(){var a=this.g;a.Wf&&(a.J.deleteTexture(this.cc),
this.cc=0,a.V.removeChild(this.c));a.$k&&a.A.removeChild(this.c);this.c=null};return b}(e);n.Bk=e;e=function(a){function b(b){a.call(this,b);this.url="";this.nb=this.Na=this.Aa=0;this.f=50;this.Qa=0;this.hf=!1;this.Nc=this.xc=100;this.$c=1}__extends(b,a);b.prototype.ub=function(b){a.prototype.ub.call(this,b);var c;if(c=b.getAttributeNode("url"))this.url=c.nodeValue.toString();if(c=b.getAttributeNode("rotx"))this.Aa=Number(c.nodeValue);if(c=b.getAttributeNode("roty"))this.Na=Number(c.nodeValue);if(c=
b.getAttributeNode("rotz"))this.nb=Number(c.nodeValue);if(c=b.getAttributeNode("fov"))this.f=Number(c.nodeValue);if(c=b.getAttributeNode("width"))this.xc=Number(c.nodeValue);if(c=b.getAttributeNode("height"))this.Nc=Number(c.nodeValue);this.$c=(c=b.getAttributeNode("stretch"))?Number(c.nodeValue):1;if(c=b.getAttributeNode("clickmode"))this.Qa=Number(c.nodeValue);if(c=b.getAttributeNode("handcursor"))this.hf=1==Number(c.nodeValue);for(b=b.firstChild;b;)"source"==b.nodeName&&(c=b.getAttributeNode("url"))&&
(this.url=c.nodeValue.toString()),b=b.nextSibling};b.prototype.ff=function(){this.df=!1;this.c.style[this.g.Lc]="none"};b.prototype.Oc=function(){1!==this.Qa&&4!==this.Qa||this.ef(!this.qb)};b.prototype.ef=function(a){var b=this.g;if(1===this.Qa||4===this.Qa)this.qb=a,this.g.ob?(a=this.g.fa)&&a.activateSound(this.id,this.qb?1:0):(this.c.style.zIndex=this.qb?(b.Zf+8E4).toString():b.Zf.toString(),this.c.style[b.Lc]="all 1s ease 0s",this.df=!0,b.Uk())};b.prototype.addElement=function(){var a=this,b=
this.g;try{a.c=document.createElement("img");a.c.setAttribute("style","-webkit-user-drag:none; max-width:none;");a.c.setAttribute("class","ggmedia");a.c.hidden=!0;b.ve&&a.c.setAttribute("id",b.ve+a.id);a.c.ondragstart=function(){return!1};if(1===a.Qa||4===a.Qa)a.c.addEventListener(b.el(),function(){a.ff()},!1),a.c.addEventListener("transitionend",function(){a.ff()},!1);a.c.setAttribute("src",b.Rb(a.url));a.xc&&(a.c.width=a.xc);a.Nc&&(a.c.height=a.Nc);b.Sa.push(a);a.c.style.position="absolute";a.Oc&&
(a.c.onclick=function(){a.Oc()});b.A.appendChild(a.c)}catch(h){b.T("Error addimage:"+h)}};b.prototype.Yd=function(){this.g.A.removeChild(this.c);this.c=null};return b}(f);n.ol=e;f=function(a){function b(b){a.call(this,b);this.alpha=this.Wi=50;this.type=0;this.color=16777215}__extends(b,a);b.prototype.ub=function(b){a.prototype.ub.call(this,b);var c;if(c=b.getAttributeNode("blinding"))this.Wi=Number(c.nodeValue);if(c=b.getAttributeNode("alpha"))this.alpha=Number(c.nodeValue);if(c=b.getAttributeNode("type"))this.type=
Number(c.nodeValue);if(c=b.getAttributeNode("color"))this.color=1*Number(c.nodeValue)};return b}(f);n.pl=f;f=function(){function a(a){this.type="empty";this.Hk=this.id=this.target=this.description=this.title=this.url="";this.mh=100;this.tg=20;this.nh=!1;this.c=null;this.ab=this.na=this.j=this.pan=0;this.Ob=a.w.Ob;this.Lb=a.w.Lb;this.Nb=a.w.Nb;this.Kb=a.w.Kb;this.ue=a.w.ue;this.Xf=[]}a.prototype.oe=function(){this.id=this.id;this.pan=this.pan;this.tilt=this.j;this.url=this.url;this.target=this.target;
this.title=this.title;this.description=this.description;this.skinid=this.Hk;this.obj=this.c};a.prototype.ub=function(a){var d;if(d=a.getAttributeNode("url"))this.url=d.nodeValue.toString();if(d=a.getAttributeNode("target"))this.target=d.nodeValue.toString();if(d=a.getAttributeNode("title"))this.title=d.nodeValue.toString();if(d=a.getAttributeNode("description"))this.description=d.nodeValue.toString();if(d=a.getAttributeNode("id"))this.id=d.nodeValue.toString();if(d=a.getAttributeNode("skinid"))this.Hk=
d.nodeValue.toString();if(d=a.getAttributeNode("width"))this.mh=Number(d.nodeValue);if(d=a.getAttributeNode("height"))this.tg=Number(d.nodeValue);if(d=a.getAttributeNode("wordwrap"))this.nh=1==Number(d.nodeValue);d=a.getAttributeNode("pan");this.pan=1*(d?Number(d.nodeValue):0);d=a.getAttributeNode("tilt");this.j=1*(d?Number(d.nodeValue):0);if(d=a.getAttributeNode("bordercolor"))this.Ob=1*Number(d.nodeValue);if(d=a.getAttributeNode("backgroundcolor"))this.Lb=1*Number(d.nodeValue);if(d=a.getAttributeNode("borderalpha"))this.Nb=
1*Number(d.nodeValue);if(d=a.getAttributeNode("backgroundalpha"))this.Kb=1*Number(d.nodeValue);if(d=a.getAttributeNode("handcursor"))this.ue=1==Number(d.nodeValue);for(a=a.firstChild;a;){if("vertex"==a.nodeName){var c={pan:0,j:0};d=a.getAttributeNode("pan");c.pan=1*(d?Number(d.nodeValue):0);d=a.getAttributeNode("tilt");c.j=1*(d?Number(d.nodeValue):0);this.Xf.push(c)}a=a.nextSibling}this.oe()};return a}();n.zg=f})(ggP2VR||(ggP2VR={}));
(function(n){var f=function(){function e(a,b){this.x=a;this.y=b}e.prototype.Ta=function(a,b){this.x=a;this.y=b};e.prototype.cd=function(a,b,d){var c=b.y-a.y;this.x=a.x+(b.x-a.x)*d;this.y=a.y+c*d};e.prototype.zl=function(a,b,d,c,h){var B;B=new e;B.cd(a,d,h);a=new e;a.cd(d,c,h);d=new e;d.cd(c,b,h);b=new e;b.cd(B,a,h);B=new e;B.cd(a,d,h);a=new e;a.cd(b,B,h);this.x=a.x;this.y=a.y};e.prototype.uh=function(a,b,d,c,h){var B=new e,g=.5,m=.25;do{B.zl(a,b,d,c,g);var l=B.x-h,g=0<l?g-m:g+m,m=m/2}while(.01<Math.abs(l));
this.x=B.x;this.y=B.y};return e}();n.fc=f})(ggP2VR||(ggP2VR={}));
(function(n){var f=function(){function e(a,b,d,c,h){this.x=a;this.y=b;this.z=d;this.Vc=c;this.wb=h}e.prototype.Ta=function(a,b,d,c,h){this.x=a;this.y=b;this.z=d;this.Vc=c;this.wb=h};e.prototype.toString=function(){return"("+this.x+","+this.y+","+this.z+") - ("+this.Vc+","+this.wb+")"};e.prototype.Aa=function(a){var b=Math.sin(a);a=Math.cos(a);var d=this.y,c=this.z;this.y=a*d-b*c;this.z=b*d+a*c};e.prototype.ln=function(){var a=this.y;this.y=-this.z;this.z=a};e.prototype.kn=function(){var a=this.y;
this.y=this.z;this.z=-a};e.prototype.Na=function(a){var b=Math.sin(a);a=Math.cos(a);var d=this.x,c=this.z;this.x=a*d+b*c;this.z=-b*d+a*c};e.prototype.mn=function(){var a=this.x;this.x=-this.z;this.z=a};e.prototype.nb=function(a){var b=Math.sin(a);a=Math.cos(a);var d=this.x,c=this.y;this.x=a*d-b*c;this.y=b*d+a*c};e.prototype.Ak=function(){var a=this.x;this.x=-this.y;this.y=a};e.prototype.Zd=function(a){return this.Aa(a*Math.PI/180)};e.prototype.Cf=function(a){return this.Na(a*Math.PI/180)};e.prototype.Qg=
function(a){return this.nb(a*Math.PI/180)};e.prototype.clone=function(){return new e(this.x,this.y,this.z,this.Vc,this.wb)};e.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};e.prototype.normalize=function(){var a=this.length();0<a&&(a=1/a,this.x*=a,this.y*=a,this.z*=a)};e.prototype.Lg=function(a){return this.x*a.x+this.y*a.y+this.z*a.z};e.prototype.lj=function(a,b){var d;d=Math.cos(b*Math.PI/180);this.x=d*Math.sin(a*Math.PI/180);this.y=Math.sin(b*Math.PI/180);
this.z=d*Math.cos(a*Math.PI/180)};e.prototype.vl=function(){return 180*Math.atan2(-this.x,-this.z)/Math.PI};e.prototype.wl=function(){return 180*Math.asin(this.y/this.length())/Math.PI};e.prototype.cd=function(a,b,d){this.x=a.x*d+b.x*(1-d);this.y=a.y*d+b.y*(1-d);this.z=a.z*d+b.z*(1-d);this.Vc=a.Vc*d+b.Vc*(1-d);this.wb=a.wb*d+b.wb*(1-d)};return e}();n.ua=f})(ggP2VR||(ggP2VR={}));
(function(n){var f=function(){function e(){this.rn()}e.prototype.rn=function(){this.Sb=1;this.Vb=this.Ub=this.Tb=0;this.Wb=1;this.Zb=this.Yb=this.Xb=0;this.$b=1};e.prototype.clone=function(a){this.Sb=a.Sb;this.Tb=a.Tb;this.Ub=a.Ub;this.Vb=a.Vb;this.Wb=a.Wb;this.Xb=a.Xb;this.Yb=a.Yb;this.Zb=a.Zb;this.$b=a.$b};e.prototype.Bn=function(a){var b=Math.cos(a);a=Math.sin(a);this.Sb=1;this.Vb=this.Ub=this.Tb=0;this.Wb=b;this.Xb=-a;this.Yb=0;this.Zb=a;this.$b=b};e.prototype.Cn=function(a){var b=Math.cos(a);
a=Math.sin(a);this.Sb=b;this.Tb=0;this.Ub=a;this.Vb=0;this.Wb=1;this.Xb=0;this.Yb=-a;this.Zb=0;this.$b=b};e.prototype.Dn=function(a){var b=Math.cos(a);a=Math.sin(a);this.Sb=b;this.Tb=-a;this.Ub=0;this.Vb=a;this.Wb=b;this.Zb=this.Yb=this.Xb=0;this.$b=1};e.prototype.yn=function(a){this.Bn(a*Math.PI/180)};e.prototype.zn=function(a){this.Cn(a*Math.PI/180)};e.prototype.An=function(a){this.Dn(a*Math.PI/180)};e.prototype.Zd=function(a){var b,d;b=new e;d=new e;b.yn(a);d.clone(this);this.multiply(b,d)};e.prototype.Cf=
function(a){var b,d;b=new e;d=new e;b.zn(a);d.clone(this);this.multiply(b,d)};e.prototype.Qg=function(a){var b,d;b=new e;d=new e;b.An(a);d.clone(this);this.multiply(b,d)};e.prototype.multiply=function(a,b){this.Sb=a.Sb*b.Sb+a.Tb*b.Vb+a.Ub*b.Yb;this.Tb=a.Sb*b.Tb+a.Tb*b.Wb+a.Ub*b.Zb;this.Ub=a.Sb*b.Ub+a.Tb*b.Xb+a.Ub*b.$b;this.Vb=a.Vb*b.Sb+a.Wb*b.Vb+a.Xb*b.Yb;this.Wb=a.Vb*b.Tb+a.Wb*b.Wb+a.Xb*b.Zb;this.Xb=a.Vb*b.Ub+a.Wb*b.Xb+a.Xb*b.$b;this.Yb=a.Yb*b.Sb+a.Zb*b.Vb+a.$b*b.Yb;this.Zb=a.Yb*b.Tb+a.Zb*b.Wb+a.$b*
b.Zb;this.$b=a.Yb*b.Ub+a.Zb*b.Xb+a.$b*b.$b};e.prototype.Nm=function(a){var b,d,c;b=a.x;d=a.y;c=a.z;a.x=b*this.Sb+d*this.Tb+c*this.Ub;a.y=b*this.Vb+d*this.Wb+c*this.Xb;a.z=b*this.Yb+d*this.Zb+c*this.$b};return e}();n.jl=f})(ggP2VR||(ggP2VR={}));
(function(n){n.U={create:function(f){var e;"undefined"!=typeof Float32Array?e=new Float32Array(16):e=Array(16);f&&(e[0]=f[0],e[1]=f[1],e[2]=f[2],e[3]=f[3],e[4]=f[4],e[5]=f[5],e[6]=f[6],e[7]=f[7],e[8]=f[8],e[9]=f[9],e[10]=f[10],e[11]=f[11],e[12]=f[12],e[13]=f[13],e[14]=f[14],e[15]=f[15]);return e},set:function(f,e){e[0]=f[0];e[1]=f[1];e[2]=f[2];e[3]=f[3];e[4]=f[4];e[5]=f[5];e[6]=f[6];e[7]=f[7];e[8]=f[8];e[9]=f[9];e[10]=f[10];e[11]=f[11];e[12]=f[12];e[13]=f[13];e[14]=f[14];e[15]=f[15];return e},ud:function(f){f[0]=
1;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=1;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=1;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f},multiply:function(f,e,a){a||(a=f);var b=f[0],d=f[1],c=f[2],h=f[3],B=f[4],g=f[5],m=f[6],l=f[7],k=f[8],n=f[9],p=f[10],u=f[11],t=f[12],w=f[13],r=f[14];f=f[15];var v=e[0],z=e[1],A=e[2],x=e[3],y=e[4],C=e[5],D=e[6],E=e[7],F=e[8],H=e[9],I=e[10],J=e[11],K=e[12],L=e[13],M=e[14];e=e[15];a[0]=v*b+z*B+A*k+x*t;a[1]=v*d+z*g+A*n+x*w;a[2]=v*c+z*m+A*p+x*r;a[3]=v*h+z*l+A*u+x*f;a[4]=y*b+C*B+D*k+
E*t;a[5]=y*d+C*g+D*n+E*w;a[6]=y*c+C*m+D*p+E*r;a[7]=y*h+C*l+D*u+E*f;a[8]=F*b+H*B+I*k+J*t;a[9]=F*d+H*g+I*n+J*w;a[10]=F*c+H*m+I*p+J*r;a[11]=F*h+H*l+I*u+J*f;a[12]=K*b+L*B+M*k+e*t;a[13]=K*d+L*g+M*n+e*w;a[14]=K*c+L*m+M*p+e*r;a[15]=K*h+L*l+M*u+e*f;return a},translate:function(f,e,a){var b=e[0],d=e[1];e=e[2];if(!a||f==a)return f[12]=f[0]*b+f[4]*d+f[8]*e+f[12],f[13]=f[1]*b+f[5]*d+f[9]*e+f[13],f[14]=f[2]*b+f[6]*d+f[10]*e+f[14],f[15]=f[3]*b+f[7]*d+f[11]*e+f[15],f;var c=f[0],h=f[1],B=f[2],g=f[3],m=f[4],l=f[5],
k=f[6],n=f[7],p=f[8],u=f[9],t=f[10],w=f[11];a[0]=c;a[1]=h;a[2]=B;a[3]=g;a[4]=m;a[5]=l;a[6]=k;a[7]=n;a[8]=p;a[9]=u;a[10]=t;a[11]=w;a[12]=c*b+m*d+p*e+f[12];a[13]=h*b+l*d+u*e+f[13];a[14]=B*b+k*d+t*e+f[14];a[15]=g*b+n*d+w*e+f[15];return a},scale:function(f,e,a){var b=e[0],d=e[1];e=e[2];if(!a||f==a)return f[0]*=b,f[1]*=b,f[2]*=b,f[3]*=b,f[4]*=d,f[5]*=d,f[6]*=d,f[7]*=d,f[8]*=e,f[9]*=e,f[10]*=e,f[11]*=e,f;a[0]=f[0]*b;a[1]=f[1]*b;a[2]=f[2]*b;a[3]=f[3]*b;a[4]=f[4]*d;a[5]=f[5]*d;a[6]=f[6]*d;a[7]=f[7]*d;a[8]=
f[8]*e;a[9]=f[9]*e;a[10]=f[10]*e;a[11]=f[11]*e;a[12]=f[12];a[13]=f[13];a[14]=f[14];a[15]=f[15];return a},rotate:function(f,e,a,b){var d=a[0],c=a[1];a=a[2];var h=Math.sqrt(d*d+c*c+a*a);if(!h)return null;1!=h&&(h=1/h,d*=h,c*=h,a*=h);var B=Math.sin(e),g=Math.cos(e),m=1-g;e=f[0];var h=f[1],l=f[2],k=f[3],n=f[4],p=f[5],u=f[6],t=f[7],w=f[8],r=f[9],v=f[10],z=f[11],A=d*d*m+g,x=c*d*m+a*B,y=a*d*m-c*B,C=d*c*m-a*B,D=c*c*m+g,E=a*c*m+d*B,F=d*a*m+c*B,d=c*a*m-d*B,c=a*a*m+g;b?f!=b&&(b[12]=f[12],b[13]=f[13],b[14]=f[14],
b[15]=f[15]):b=f;b[0]=e*A+n*x+w*y;b[1]=h*A+p*x+r*y;b[2]=l*A+u*x+v*y;b[3]=k*A+t*x+z*y;b[4]=e*C+n*D+w*E;b[5]=h*C+p*D+r*E;b[6]=l*C+u*D+v*E;b[7]=k*C+t*D+z*E;b[8]=e*F+n*d+w*c;b[9]=h*F+p*d+r*c;b[10]=l*F+u*d+v*c;b[11]=k*F+t*d+z*c;return b},Tl:function(f,e,a,b,d,c,h){h||(h=n.U.create());var B=e-f,g=b-a,m=c-d;h[0]=2*d/B;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=2*d/g;h[6]=0;h[7]=0;h[8]=(e+f)/B;h[9]=(b+a)/g;h[10]=-(c+d)/m;h[11]=-1;h[12]=0;h[13]=0;h[14]=-(c*d*2)/m;h[15]=0;return h},perspective:function(f,e,a,b,d){f=
a*Math.tan(f*Math.PI/360);e=f*e;return n.U.Tl(-e,e,-f,f,a,b,d)}}})(ggP2VR||(ggP2VR={}));
(function(n){var f=function(){function e(a){this.ca=n.U.create();this.Za=n.U.create();this.ka=this.ad=0;this.Cd=5;this.dc=0;this.zb=[];this.yg=!1;this.Di=this.Oh=this.vi=1;this.Dh=1E6;this.Xg=!1;this.Oi=8;this.g=a;if(a.we||a.ug)a.Cd=2}e.prototype.mf=function(){var a=this.g.J;if(a){var b=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(b,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nvoid main(void) {\n gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n}\n");a.compileShader(b);
a.getShaderParameter(b,a.COMPILE_STATUS)||(console&&console.log(a.getShaderInfoLog(b)),alert(a.getShaderInfoLog(b)),b=null);var d=a.createShader(a.VERTEX_SHADER);a.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform float uZoffset;\nvarying vec2 vTextureCoord;\nvoid main(void) {\n gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n gl_Position.z += uZoffset;\n vTextureCoord = aTextureCoord;\n}\n");
a.compileShader(d);a.getShaderParameter(d,a.COMPILE_STATUS)||(console&&console.log(a.getShaderInfoLog(b)),alert(a.getShaderInfoLog(d)),d=null);this.D=a.createProgram();a.attachShader(this.D,d);a.attachShader(this.D,b);a.linkProgram(this.D);a.getProgramParameter(this.D,a.LINK_STATUS)||alert("Could not initialise shaders");a.useProgram(this.D);this.D.ea=a.getAttribLocation(this.D,"aVertexPosition");a.enableVertexAttribArray(this.D.ea);this.D.Fa=a.getAttribLocation(this.D,"aTextureCoord");a.enableVertexAttribArray(this.D.Fa);
this.D.yd=a.getUniformLocation(this.D,"uPMatrix");this.D.yf=a.getUniformLocation(this.D,"uMVMatrix");this.D.Df=a.getUniformLocation(this.D,"uSampler");this.D.Pi=a.getUniformLocation(this.D,"uZoffset");b=a.createShader(a.VERTEX_SHADER);a.shaderSource(b,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 0.0, 1.0);\n}\n");
a.compileShader(b);a.getShaderParameter(b,a.COMPILE_STATUS)||(alert(a.getShaderInfoLog(b)),b=null);d=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nuniform vec3 uColor;\nuniform float uAlpha;\nvoid main(void) {\n gl_FragColor = vec4(uColor, uAlpha);\n}\n");a.compileShader(d);a.getShaderParameter(d,a.COMPILE_STATUS)||(alert(a.getShaderInfoLog(d)),d=null);this.pc=a.createProgram();a.attachShader(this.pc,
b);a.attachShader(this.pc,d);a.linkProgram(this.pc);a.getProgramParameter(this.pc,a.LINK_STATUS)||alert("Could not initialise shaders");this.pc.ea=a.getAttribLocation(this.pc,"aVertexPosition");a.enableVertexAttribArray(this.pc.ea)}};e.prototype.lf=function(){var a=this.g,b=a.J,d,c;b?(d=b.createShader(b.FRAGMENT_SHADER),c=this.Sh(13),this.Ch(d,c),c=b.createShader(b.VERTEX_SHADER),b.shaderSource(c,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nuniform float zOffset;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, zOffset, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n"),
b.compileShader(c),b.getShaderParameter(c,b.COMPILE_STATUS)||(console&&console.log(b.getShaderInfoLog(c)),alert(b.getShaderInfoLog(c)),c=null),this.tk=b.createProgram(),this.bi(this.tk,c,d),d=b.createShader(b.FRAGMENT_SHADER),c=this.Sh(4),this.Ch(d,c),c=b.createShader(b.VERTEX_SHADER),b.shaderSource(c,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nuniform float zOffset;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, zOffset, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n"),
b.compileShader(c),b.getShaderParameter(c,b.COMPILE_STATUS)||(console&&console.log(b.getShaderInfoLog(c)),alert(b.getShaderInfoLog(c)),c=null),this.uk=b.createProgram(),this.bi(this.uk,c,d),d=b.createShader(b.FRAGMENT_SHADER),c=this.Sh(a.o.format),this.Ch(d,c),c=b.createShader(b.VERTEX_SHADER),b.shaderSource(c,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 0.0, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n"),
b.compileShader(c),b.getShaderParameter(c,b.COMPILE_STATUS)||(console&&console.log(b.getShaderInfoLog(c)),alert(b.getShaderInfoLog(c)),c=null),this.vk=b.createProgram(),this.bi(this.vk,c,d),this.Ng||(this.Ng=b.createBuffer())):this.g.T("No WebGL to initRemapShader!")};e.prototype.Ch=function(a,b){var d=this.g.J;d.shaderSource(a,b);d.compileShader(a);d.getShaderParameter(a,d.COMPILE_STATUS)||(console&&console.log(d.getShaderInfoLog(a)),O&&alert(d.getShaderInfoLog(a)))};e.prototype.bi=function(a,b,
d){var c=this.g.J;c.attachShader(a,b);c.attachShader(a,d);c.linkProgram(a);c.getProgramParameter(a,c.LINK_STATUS)||alert("Could not initialise shaders");c.useProgram(a)};e.prototype.Sh=function(a){var b=this.g,d;d="#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#define M_PI 3.14159265358979323846\nvarying vec2 dst;\nuniform vec2 srcScale;\nuniform vec2 srcOffset;\nuniform float rectDstDistance;\nuniform float fisheyeDistance;\nuniform float stereoDistance;\nuniform float directionBlend;\nuniform mat4 matRotate; // = mat4( 1.0,0.0,0.0,0.0, 0.0,1.0,0.0,0.0, 0.0,0.0,1.0,0.0, 0.0,0.0,0.0,1.0 );\nconst float rectSrcDistance = 1.0;\nuniform vec2 tonemap;\n";
d=(13==a?d+"uniform samplerCube cubeTexture;":d+"uniform sampler2D tileTexture;\n")+"void main()\n{\n";d+="vec4 direction;\n";d+="vec2 src;\n";d+="vec2 srcCord;\n";d+="vec2 texc;\n";var c=this.Bj(b.La());b.La()!=b.Gb&&0!=b.Gb?(b=this.Bj(b.Gb),d+="vec4 direction1,direction2;\n",d+=c.replace("direction=","direction1="),d+=b.replace("direction=","direction2="),d+="direction=normalize(mix(direction1, direction2,1.0-directionBlend));\n"):d+=c;d+="direction=direction*matRotate;\n";13==a&&(d+="direction.z=-direction.z;",
d+="gl_FragColor = textureCube(cubeTexture, direction.xyz);");4==a&&(d+="float iz=1.0/(direction.z * rectSrcDistance);\n",d+="src.x=-direction.x*iz;\n",d+="src.y= direction.y*iz;\n",d+="texc=src * srcScale + srcOffset;\n",d+="if (",d+="(direction.z<0.0) && ",d+="(texc.x>=0.0) && (texc.x<=1.0) && (texc.y>=0.0) && (texc.y<=1.0)) {\n",d+="  gl_FragColor = texture2D(tileTexture, texc);\n",d+="} else {\n",d+="  discard;\n",d+="}\n");1==a&&(d+="src.x=atan(float(-direction.x), float(-direction.z));",d+=
"src.y=asin(direction.y);\n",d+="texc=src * srcScale + srcOffset;\n",d+="gl_FragColor = texture2D(tileTexture, texc);\n");14==a&&(d+="vec2 cf;\n",d+="if ((direction.z<0.0) && (direction.z<=-abs(direction.x)) && (direction.z<=-abs(direction.y))) {\n",d+="  src.x=-direction.x/direction.z;\n",d+="  src.y=+direction.y/direction.z;\n",d+="  cf.x=1.0;cf.y=3.0;\n",d+="}\n",d+="if ((direction.x>=0.0) && (direction.x>=abs(direction.y)) && (direction.x>=abs(direction.z))) {\n",d+="  src.x=+direction.z/direction.x;\n",
d+="  src.y=-direction.y/direction.x;\n",d+="  cf.x=3.0;cf.y=3.0;\n",d+="}\n",d+="if ((direction.z>=0.0) && (direction.z>=abs(direction.x)) && (direction.z>=abs(direction.y))) {\n",d+="  src.x=-direction.x/direction.z;\n",d+="  src.y=-direction.y/direction.z;\n",d+="  cf.x=5.0;cf.y=3.0;\n",d+="}\n",d+="if ((direction.x<=0.0) && (direction.x<=-abs(direction.y)) && (direction.x<=-abs(direction.z))) {\n",d+="  src.x=+direction.z/direction.x;\n",d+="  src.y=+direction.y/direction.x;\n",d+="  cf.x=1.0;cf.y=1.0;\n",
d+="}\n",d+="if ((direction.y>=0.0) && (direction.y>=abs(direction.x)) && (direction.y>=abs(direction.z))) {\n",d+="  src.x=+direction.x/direction.y;\n",d+="  src.y=-direction.z/direction.y;\n",d+="  cf.x=5.0;cf.y=1.0;\n",d+="}\n",d+="if ((direction.y<=0.0) && (direction.y<=-abs(direction.x)) && (direction.y<=-abs(direction.z))) {\n",d+="  src.x=-direction.x/direction.y;\n",d+="  src.y=-direction.z/direction.y;\n",d+="  cf.x=3.0;cf.y=1.0;\n",d+="}\n",d+="texc.x=(cf.x+src.x*srcScale.x) / 6.0;\n",d+=
"texc.y=(cf.y+src.y*srcScale.y) / 4.0;\n",d+="gl_FragColor = texture2D(tileTexture, texc);\n");return d+="}\n"};e.prototype.Bj=function(a){var b="";switch(a){case 4:b+="direction.x=dst.x*rectDstDistance;\ndirection.y=dst.y*rectDstDistance;\ndirection.z=-1.0;\n";break;case 12:b+="float r,ph,ro;\nr=length(dst.xy)*0.5;\nro=atan(float(dst.x),float(-dst.y));\nph=r / fisheyeDistance;\ndirection.x= sin(ph) * sin(ro);\ndirection.y=-sin(ph) * cos(ro);\ndirection.z=-cos(ph);\n";break;case 9:b+="float n;\nvec2 ind;\nind=dst*stereoDistance;\nn=1.0 + ind.x*ind.x + ind.y*ind.y;\ndirection.x=2.0*ind.x/n;\ndirection.y=2.0*ind.y/n;\ndirection.z=(n-2.0)/n;\n"}return b+
"direction.w=0.0;\ndirection=normalize(direction);\n"};e.prototype.Kj=function(a){var b,d,c,h,e=this.g,g=this.g.J;this.Eh=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,this.Eh);var m=[-1,-1,1,1,-1,1,1,1,1,-1,1,1];for(b=0;12>b;b++)2>b%3&&(m[b]*=a);g.bufferData(g.ARRAY_BUFFER,new Float32Array(m),g.STATIC_DRAW);this.Ye=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,this.Ye);var l=[1,0,0,0,0,1,1,1];g.bufferData(g.ARRAY_BUFFER,new Float32Array(l),g.STATIC_DRAW);this.Ld=g.createBuffer();g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,
this.Ld);var f=[0,1,2,0,2,3];g.bufferData(g.ELEMENT_ARRAY_BUFFER,new Uint16Array(f),g.STATIC_DRAW);var m=[],f=[],l=[],q=new n.ua;for(a=0;6>a;a++){c=a%3;h=3>a?1:0;for(d=0;4>d;d++){q.x=-1;q.y=-1;q.z=1;for(b=0;b<d;b++)q.Ak();l.push((0>q.x?.33:0)+.33*c,(0>q.y?0:.5)+.5*h);if(4>a)for(b=0;b<a;b++)q.mn();else 5==a?q.ln():q.kn();m.push(q.x,q.y,q.z)}b=4*a;f.push(0+b,1+b,2+b,0+b,2+b,3+b)}e.o.Li=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,e.o.Li);g.bufferData(g.ARRAY_BUFFER,new Float32Array(m),g.STATIC_DRAW);
e.o.ah=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,e.o.ah);g.bufferData(g.ARRAY_BUFFER,new Float32Array(l),g.STATIC_DRAW);e.o.Yh=g.createBuffer();g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,e.o.Yh);g.bufferData(g.ELEMENT_ARRAY_BUFFER,new Uint16Array(f),g.STATIC_DRAW);this.Am=g.createBuffer();this.zm=g.createBuffer()};e.prototype.Uh=function(a){var b=this;return function(){try{if(a.Qm)return;var d=b.g.J;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,1);var c=!1;null!=a.Dg&&a.Dg.complete?a.Fj||(d.bindTexture(d.TEXTURE_2D,
a),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,a.Dg),c=a.Fj=!0):null!=a.Kg&&a.Kg.complete&&(d.bindTexture(d.TEXTURE_2D,a),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,a.Kg),c=!0);c&&(a.loaded=!0);d.bindTexture(d.TEXTURE_2D,null);d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,0)}catch(h){b.g.T(h)}b.g.update()}};e.prototype.Lj=function(){var a,b,d=this.g,c=d.J;if(this.zb)for(;0<this.zb.length;)c.deleteTexture(this.zb.pop());this.zb=[];for(var h=0;6>h;h++)b=c.createTexture(),this.ad++,
b.Kg=null,b.Dg=null,b.Fj=!1,c.bindTexture(c.TEXTURE_2D,b),c.texImage2D(c.TEXTURE_2D,0,c.RGB,1,1,0,c.RGB,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),d.me[h]&&(a=new Image,a.crossOrigin=d.crossOrigin,a.src=d.Rb(d.me[h]),b.Kg=a,a.addEventListener&&a.addEventListener("load",this.Uh(b),!1),d.xb.push(a)),this.zb.push(b);for(h=0;6>h;h++)d.gg[h]&&
(a=new Image,a.crossOrigin=d.crossOrigin,a.src=d.Rb(d.gg[h]),a.addEventListener?a.addEventListener("load",this.Uh(this.zb[h]),!1):a.onload=this.Uh(this.zb[h]),this.zb[h].Dg=a,d.xb.push(a));for(h=0;h<d.H.length;h++)d.H[h].hd||(d.H[h].cc=c.createTexture(),d.ad++,c.bindTexture(c.TEXTURE_2D,d.H[h].cc),c.texImage2D(c.TEXTURE_2D,0,c.RGB,1,1,0,c.RGB,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE));d.o.cc=c.createTexture();d.ad++;c.bindTexture(c.TEXTURE_2D,d.o.cc);c.texImage2D(c.TEXTURE_2D,0,c.RGB,1,1,0,c.RGB,c.UNSIGNED_BYTE,null);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.bindTexture(c.TEXTURE_2D,null)};e.prototype.vo=function(){var a=this.g,b=this.g.h;a.kb();if(a.m.width!=a.A.offsetWidth||a.m.height!=a.A.offsetHeight)a.m.width=
a.A.offsetWidth,a.m.height=a.A.offsetHeight;a.qe&&(a.Qc(0),a.od());if(a.J){var d=a.J;b.qc&&6<b.qc.length&&(b=parseInt(b.qc),d.clearColor((b>>16&255)/255,(b>>8&255)/255,(b>>0&255)/255,1));d.clear(d.DEPTH_BUFFER_BIT);n.U.ud(this.Za);n.U.perspective(a.Db(),a.eb.width/a.eb.height,.1,100,this.Za);d.useProgram(this.D);d.uniformMatrix4fv(this.D.yd,!1,this.Za);for(a=0;6>a;a++)this.Vg(a),d.bindBuffer(d.ARRAY_BUFFER,this.Eh),d.vertexAttribPointer(this.D.ea,3,d.FLOAT,!1,0,0),d.bindBuffer(d.ARRAY_BUFFER,this.Ye),
d.vertexAttribPointer(this.D.Fa,2,d.FLOAT,!1,0,0),6<=this.zb.length&&this.zb[a].loaded&&(d.activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,this.zb[a]),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.Ld),d.uniform1i(this.D.Df,0),d.uniformMatrix4fv(this.D.yf,!1,this.ca),d.uniformMatrix4fv(this.D.yd,!1,this.Za),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0))}};e.prototype.Vg=function(a){var b=this.g;n.U.ud(this.ca);n.U.rotate(this.ca,-b.K.a*Math.PI/180,[0,0,1]);n.U.rotate(this.ca,-b.j.a*Math.PI/180,
[1,0,0]);n.U.rotate(this.ca,(180-b.pan.a)*Math.PI/180,[0,1,0]);b.za&&(n.U.rotate(this.ca,-b.za.pitch*Math.PI/180,[1,0,0]),n.U.rotate(this.ca,b.za.K*Math.PI/180,[0,0,1]));4>a?n.U.rotate(this.ca,-Math.PI/2*a,[0,1,0]):n.U.rotate(this.ca,Math.PI/2*(5==a?1:-1),[1,0,0])};e.prototype.Wn=function(a){var b=this;return function(){b.g.xa=!0;b.g.Jc=!0;a.loaded=!0;a.wi=0;a.Ad=0;var d=b.g.J;b.ka&&b.ka--;0==b.ka&&b.g.L&&b.g.L.ggLoadedLevels&&b.g.L.ggLoadedLevels();d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,1);if(null!=
a.h&&a.h.complete){a.Eb=d.createTexture();b.g.ad++;d.bindTexture(d.TEXTURE_2D,a.Eb);try{d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,a.h)}catch(c){d.texImage2D(d.TEXTURE_2D,0,d.RGBA,1,1,0,d.RGBA,d.UNSIGNED_BYTE,new Uint8Array([128,128,128,250])),b.g.T(c)}}b.g.update()}};e.prototype.Om=function(a){var b=this;return function(){b.g.xa=!0;b.g.Jc=!0;var d=b.g.h;try{if(null!=a&&a.complete){var c=d.O[d.O.length-1],h=d.Ua;c.height=c.width=a.width-2*h;c.P=c.ja=1;for(var e=0;6>e;e++){var g=new n.Sd;
g.I=document.createElement("canvas");b.g.ma?(g.I.width=c.width+2*h,g.I.height=c.height+2*h):(g.I.width=d.F+2*h,g.I.height=d.F+2*h);g.Ja=g.I.getContext("2d");g.I.style[b.g.Ra+"Origin"]="0% 0%";g.I.style.overflow="hidden";g.I.style.position="absolute";g.h=a;g.Ja&&g.Ja.drawImage(a,0,e*(c.height+2*h),c.width+2*h,c.height+2*h,0,0,c.width+2*h,c.height+2*h);if(b.g.ma&&b.g.J){var m=b.g.J;m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,1);g.Eb=m.createTexture();b.g.ad++;m.bindTexture(m.TEXTURE_2D,g.Eb);try{m.texImage2D(m.TEXTURE_2D,
0,m.RGBA,m.RGBA,m.UNSIGNED_BYTE,g.I)}catch(f){b.g.T(f)}m.bindTexture(m.TEXTURE_2D,null);m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,0)}b.g.Ac&&(g.I.sd=-1,b.g.A.insertBefore(g.I,b.g.A.firstChild));c.Z[e]=g}}}catch(f){b.g.T(f)}b.g.update()}};e.prototype.Qk=function(a){var b=this;return function(){b.g.xa=!0;b.g.Jc=!0;b.ka&&b.ka--;0==b.ka&&b.g.L&&b.g.L.ggLoadedLevels&&b.g.L.ggLoadedLevels();a.h=null}};e.prototype.to=function(){var a=this.g,b=a.h,d=a.h.O;a.kb();a.qe&&(a.Qc(0),a.od());if(a.J){var c=a.J;c.useProgram(this.D);
if(a.h.qc&&6<a.h.qc.length){var h=parseInt(a.h.qc);c.clearColor((h>>16&255)/255,(h>>8&255)/255,(h>>0&255)/255,1)}c.clear(c.DEPTH_BUFFER_BIT);c.enable(c.DEPTH_TEST);n.U.ud(this.Za);n.U.perspective(a.Db(),a.eb.width/a.eb.height,.1,100,this.Za);c.uniformMatrix4fv(this.D.yd,!1,this.Za);this.dc=0;a.Wk();a.ei();var h=a.Mh(),e;for(e=d.length-1;e>=h;){var g=d[e],m=1;e==d.length-1&&0==b.Ua&&(m=b.F/(b.F-.5));for(var f=0;6>f;f++){var k;k=this.g.bb.Xa[f];var q=k.ye;if(k.mc&&0<q.Ne&&0<q.Yf&&0<q.scale||g.cache){k.xa=
!1;var p;k.ie[e]||(k.ie[e]={Cb:0,hc:0,nc:0,oc:0});p=k.ie[e];g.cache?(p.Cb=0,p.hc=0,p.nc=g.P-1,p.oc=g.ja-1):a.Cj(g,q,p);for(var q=!0,u=p.hc;u<=p.oc;u++)for(var t=p.Cb;t<=p.nc;t++){var w=t+u*g.P+f*g.P*g.ja,r=g.Z[w];r||(r=g.Z[w]=new n.Sd);this.ka<this.Cd?r.h||(r.Ad?r.Ad--:(this.ci(r,g,a.He(f,e,t,u)),a.xa=!0)):this.dc++;if(r.Eb){if(!r.gf){w=.5*e+1;r.gf=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,r.gf);var v=[-1,-1,1,1,-1,1,1,1,1,-1,1,1];v[3]=t*b.F-b.Ua;v[0]=Math.min((t+1)*b.F,g.width)+b.Ua;v[7]=u*b.F-
b.Ua;v[1]=Math.min((u+1)*b.F,g.height)+b.Ua;v[4]=v[1];v[6]=v[3];v[9]=v[0];v[10]=v[7];for(var z=0;12>z;z++)v[z]=0==z%3?m*w*(-2*v[z]/g.width+1):1==z%3?m*w*(-2*v[z]/g.height+1):w;c.bufferData(c.ARRAY_BUFFER,new Float32Array(v),c.STATIC_DRAW)}}else q=!1;r.visible=k.mc}p.$j=q}}e--}for(f=0;6>f;f++)if(k=a.bb.Xa[f],k.mc)for(q=k.ye,this.Vg(f),c.uniform1i(this.D.Df,0),c.uniformMatrix4fv(this.D.yd,!1,this.Za),c.uniformMatrix4fv(this.D.yf,!1,this.ca),c.enableVertexAttribArray(this.D.ea),c.enableVertexAttribArray(this.D.Fa),
c.bindBuffer(c.ARRAY_BUFFER,this.Ye),c.vertexAttribPointer(this.D.Fa,2,c.FLOAT,!1,0,0),c.activeTexture(c.TEXTURE0),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.Ld),c.useProgram(this.D),e=h;e<=d.length-1;){g=d[e];if(k.mc&&0<q.Ne&&k.ie[e]&&0<=k.ie[e].Cb){p=k.ie[e];for(u=p.hc;u<=p.oc;u++)for(t=p.Cb;t<=p.nc;t++)w=t+u*g.P+f*g.P*g.ja,(r=g.Z[w])&&r.Eb&&(c.uniform1f(this.D.Pi,1E-4*(t%2+u%2*2)),c.bindBuffer(c.ARRAY_BUFFER,r.gf),c.vertexAttribPointer(this.D.ea,3,c.FLOAT,!1,0,0),c.bindTexture(c.TEXTURE_2D,r.Eb),
c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0)),r.visible=k.mc;p.$j&&(e=d.length)}e++}this.xk();a.Jc=!1}};e.prototype.ci=function(a,b,d){var c=this.g;c.Xh++;a.h=new Image;a.wi++;a.Ad=1<<a.wi;a.h.onload=this.Wn(a);a.h.onerror=this.Qk(a);a.h.onabort=this.Qk(a);
a.h.crossOrigin=c.crossOrigin;a.h.setAttribute("src",d);b.cache&&c.xb.push(a.h);0==this.ka&&c.L&&c.L.ggReLoadedLevels&&c.L.ggReLoadedLevels();this.ka++};e.prototype.dl=function(){var a=this.g,b=a.h.O;a.kb();a.qe&&(a.Qc(0),a.od());if(a.J){var d=a.J;if(a.h.qc&&6<a.h.qc.length){var c=parseInt(a.h.qc);d.clearColor((c>>16&255)/255,(c>>8&255)/255,(c>>0&255)/255,1)}O&&d.clearColor(.2,0,0,1);d.clear(d.DEPTH_BUFFER_BIT);d.disable(d.DEPTH_TEST);d.disable(d.CULL_FACE);d.bindBuffer(d.ARRAY_BUFFER,this.Ng);c=
[0,0];c[2]=a.m.width;c[3]=0;c[4]=a.m.width;c[5]=a.m.height;c[6]=0;c[7]=a.m.height;d.bufferData(d.ARRAY_BUFFER,new Float32Array(c),d.STATIC_DRAW);this.dc=0;0>b.length-1||(this.td&&!this.yg||this.Ml(),a.o.ed?this.Xm():(d.enable(d.DEPTH_TEST),d.depthRange(0,1),d.depthFunc(d.LESS),this.Xg=!1,this.uo(),this.td&&!this.Xg&&this.Wm()))}};e.prototype.In=function(a,b,d,c,h,e,g){var m=this.g,f=m.h,k=m.m,q=d*f.F/b.width,p=(d+1)*f.F/b.width;d=c*f.F/b.height;b=(c+1)*f.F/b.height;1<p&&(h*=2,p=1);1<b&&(h*=2,b=1);
h=Math.min(this.Oi,h);var p=(p-q)/h,u=(b-d)/h;c=b=0;var t,w,f={x:0,y:0},r={x:0,y:0},v=0;a.sg=0;var z=m.zf,A=new n.ua,x=new n.jl;4>e?x.Cf(-90*e):x.Zd(5==e?90:-90);m.za&&(x.Qg(m.za.K),x.Zd(-m.za.pitch));x.Cf(-m.pan.a);x.Zd(m.j.a);x.Qg(m.K.a);for(e=0;e<=h;e++)for(var y=0;y<=h;y++)t=2*(q+y*p)-1,w=2*(d+e*u)-1,A.x=1*t,A.y=1*w,A.z=-1,A.normalize(),x.Nm(A),t=this.zj(A,f,m.La()),0!=m.Gb&&1>z&&(t=t&&this.zj(A,r,m.Gb),f.x=f.x*z+r.x*(1-z),f.y=f.y*z+r.y*(1-z)),t?-1E10<f.x&&1E10>f.x&&-1E10<f.y&&1E10>f.y?-2<f.x&&
2>f.x&&-2<f.y&&2>f.y&&(b+=f.x,c+=f.y,v++):f.x=NaN:f.x=NaN,a.Pc[a.sg++]=f.x,a.Pc[a.sg++]=f.y;0<v?(b/=v,c/=v):g=0;for(d=0;d<a.sg;d+=2)f.x=a.Pc[d],f.y=a.Pc[d+1],m=f.x-b,q=f.y-c,f.x+=m*g,f.y+=q*g,a.Pc[d]=k.width/2+f.x*k.width/2,a.Pc[d+1]=k.height/2-f.y*k.width/2;this.Jn(a,h)};e.prototype.zj=function(a,b,d){var c=!0;switch(d){case 0:case 4:d=1/(a.z*this.vi);b.x=-a.x*d;b.y=a.y*d;0<a.z&&(c=!1);break;case 9:1==a.z&&(c=!1);d=1/((1-a.z)*this.Di);b.x=a.x*d;b.y=-a.y*d;break;case 12:if(d=Math.sqrt(a.x*a.x+a.y*
a.y),0==d)b.x=0,b.y=0;else{var h=2*this.Oh*Math.acos(-a.z)/d;if(2<d)return!1;b.x=h*a.x;b.y=-h*a.y}}return c};e.prototype.Jn=function(a,b){for(var d=this.g,c=[],h,e=a.bd=0;e<b;e++)for(var g=0;g<b;g++){c[0]=e+g*(b+1);c[1]=e+1+g*(b+1);c[2]=e+(g+1)*(b+1);c[3]=e+1+(g+1)*(b+1);h=!0;for(var f=0;4>f;f++)isNaN(a.Pc[2*c[0]])&&(h=!1);if(h){for(var l=!1,k=!1,n=!1,p=!1,f=0;4>f;f++){var u=a.Pc[2*c[f]];u<d.m.width&&(k=!0);0<=u&&(l=!0);u=a.Pc[2*c[f]+1];u<d.m.height&&(n=!0);0<=u&&(p=!0)}if(h=h&&k&&l&&n&&p)a.Rd[a.bd++]=
c[0],a.Rd[a.bd++]=c[3],a.Rd[a.bd++]=c[2],a.Rd[a.bd++]=c[0],a.Rd[a.bd++]=c[1],a.Rd[a.bd++]=c[3]}}};e.prototype.uo=function(){var a=this.g,b=a.h,d=a.h.O;a.kb();a.qe&&(a.Qc(0),a.od());if(a.J){var c=a.J,h=this.uk;c.useProgram(h);this.Ii(h);c.enable(c.CULL_FACE);c.cullFace(c.FRONT);c.enable(c.DEPTH_TEST);n.U.ud(this.Za);n.U.perspective(a.Db(),a.eb.width/a.eb.height,.1,100,this.Za);c.uniformMatrix4fv(c.getUniformLocation(h,"uPMatrix"),!1,this.Za);this.dc=0;a.ei();var e=a.Mh(),g,f=0;g=d.length-1;for(var l=
{},k=d[g];k.Be&&0<g;)g--,k=d[g];for(var q=g,p=q,u=0;6>u;u++)for(var t=0;t<k.ja;t++)for(var w=0;w<k.P;w++){var r=w+t*k.P+u*k.P*k.ja;l[r]=1}for(;g>=e;){var v={},k=d[g],z=null;0<g&&(z=d[g-1]);var A;A=!0;for(var x in l)if(l.hasOwnProperty(x)){var r=Number(x),y=k.Z[r],u=Number(Math.floor(r/(k.P*k.ja))),t=Math.floor((r-u*k.P*k.ja)/k.P),w=Math.floor(r-(t*k.P+u*k.P*k.ja)),C;if(6<=u)console.log("Grrr...");else if(C=this.g.bb.Xa[u],C.xa=!1,y||(y=k.Z[r]=new n.Sd),this.In(y,k,w,t,Math.max(1,this.Oi>>q-g),u,-(0!=
a.Gb)?.3:.1),y.visible=0<y.bd||k.cache,y.visible&&!y.Eb&&(A=!1,this.ka<this.Cd?y.h||(y.Ad?y.Ad--:(this.ci(y,k,a.He(u,g,w,t)),a.xa=!0)):this.dc++),z&&(y.visible||z.cache)){var y=(w*b.F+1)/k.width,w=Math.min(1,(w+1)*b.F-1/k.width),D=(t*b.F+1)/k.height,t=Math.min(1,(t+1)*b.F-1/k.height),r=b.F/z.width;C=b.F/z.height;var E=D,D=Math.floor(D*z.height/b.F);do{var F=y,H=Math.floor(y*z.width/b.F);do{var I=H+D*z.P+u*z.P*z.ja;H<z.P&&D<z.ja?v[I]=1:console.log("Grrrr");H++;F+=r}while(F<w);D++;E+=C}while(E<t)}}A&&
(p=g,20>a.f.a&&g<this.Dh&&(this.Xg=!0));l=v;g--}this.xk();c.uniform1i(c.getUniformLocation(h,"tileTexture"),0);c.activeTexture(c.TEXTURE0);g=e;for(e=-1;g<=Math.min(p,this.Dh-1);){k=d[g];for(x in k.Z)if(k.Z.hasOwnProperty(x)){l=Number(x);y=k.Z[l];u=Math.floor(l/(k.P*k.ja));t=Math.floor((l-u*k.P*k.ja)/k.P);w=Math.floor(l-(t*k.P+u*k.P*k.ja));e!=u&&(e=u,this.hh(u,h));if(200<f){this.Xg=!1;break}y.Eb&&(l=u=b.F,w==k.P-1&&(u=k.width-b.F*w),t==k.ja-1&&(l=k.height-b.F*t),u=(u+2*b.Ua)/b.F,l=(l+2*b.Ua)/b.F,c.bindTexture(c.TEXTURE_2D,
y.Eb),c.uniform2f(c.getUniformLocation(h,"uCanvasDimensions"),a.m.width,a.m.height),q=c.getUniformLocation(h,"srcScale"),c.uniform2f(q,.5*k.width/b.F/u,.5*k.height/b.F/l),q=c.getUniformLocation(h,"srcOffset"),c.uniform2f(q,(.5*k.width+b.Ua-b.F*w)/b.F/u,-(.5*k.height+b.Ua-b.F*t)/b.F/l+1),q=c.getUniformLocation(h,"zOffset"),c.uniform1f(q,(g+1)/(d.length+5)),u=c.getAttribLocation(h,"aVertexPosition"),c.disableVertexAttribArray(0),c.disableVertexAttribArray(1),c.disableVertexAttribArray(2),c.enableVertexAttribArray(u),
c.activeTexture(c.TEXTURE0),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.bindBuffer(c.ARRAY_BUFFER,this.Am),c.vertexAttribPointer(u,2,c.FLOAT,!1,0,0),c.bufferData(c.ARRAY_BUFFER,new Float32Array(y.Pc),c.DYNAMIC_DRAW),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.zm),c.bufferData(c.ELEMENT_ARRAY_BUFFER,
new Uint16Array(y.Rd),c.DYNAMIC_DRAW),c.drawElements(c.TRIANGLES,y.bd,c.UNSIGNED_SHORT,0),f++)}g++}c.disable(c.CULL_FACE);c.cullFace(c.FRONT_AND_BACK);a.Jc=!1}};e.prototype.hh=function(a,b){var d=this.g,c=d.J;n.U.ud(this.Za);n.U.ud(this.ca);n.U.rotate(this.ca,d.K.a*Math.PI/180,[0,0,1]);n.U.rotate(this.ca,d.j.a*Math.PI/180,[1,0,0]);n.U.rotate(this.ca,-d.pan.a*Math.PI/180,[0,1,0]);d.za&&(n.U.rotate(this.ca,-d.za.pitch*Math.PI/180,[1,0,0]),n.U.rotate(this.ca,d.za.K*Math.PI/180,[0,0,1]));4>a?n.U.rotate(this.ca,
-Math.PI/2*a,[0,1,0]):n.U.rotate(this.ca,Math.PI/2*(5==a?1:-1),[1,0,0]);c.uniformMatrix4fv(c.getUniformLocation(b,"matRotate"),!1,this.ca)};e.prototype.Xm=function(){var a=this.g;if(a.J){var b=a.J,d,c=this.vk;b.useProgram(c);this.hh(0,c);b.uniform2f(b.getUniformLocation(c,"uCanvasDimensions"),a.m.width,a.m.height);1==a.o.format&&(d=b.getUniformLocation(c,"srcScale"),b.uniform2f(d,-.5/Math.PI,(a.o.kj?-1:1)/Math.PI));14==a.o.format&&(d=b.getUniformLocation(c,"srcScale"),b.uniform2f(d,1-2*a.o.he/(a.o.width/
3),1-2*a.o.he/(a.o.height/2)));d=b.getUniformLocation(c,"srcOffset");b.uniform2f(d,.5,.5);this.Ii(c);d=b.getUniformLocation(c,"cubeTexture");b.uniform1i(d,0);d=b.getAttribLocation(c,"aVertexPosition");b.disableVertexAttribArray(0);b.disableVertexAttribArray(1);b.disableVertexAttribArray(2);b.enableVertexAttribArray(d);b.bindBuffer(b.ARRAY_BUFFER,this.Ng);b.vertexAttribPointer(d,2,b.FLOAT,!1,0,0);b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,a.o.cc);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,
b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.Ld);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0)}};e.prototype.Ii=function(a){var b=this.g,d=b.J,c=this.g.m,h=c.width/c.height;switch(b.f.mode){case 1:h=1;break;case 2:h=c.width/Math.sqrt(c.width*c.width+c.height*c.height);break;case 3:4*c.height/3<c.width&&
(h=4/3)}c=d.getUniformLocation(a,"rectDstDistance");this.vi=Math.tan(Math.min(b.f.a,179)/2*Math.PI/180)*h;d.uniform1f(c,this.vi);c=d.getUniformLocation(a,"fisheyeDistance");this.Oh=180/(b.f.a*Math.PI*h);d.uniform1f(c,this.Oh);c=d.getUniformLocation(a,"stereoDistance");this.Di=Math.tan(Math.min(b.f.a,359)/4*Math.PI/180)*h;d.uniform1f(c,this.Di);c=d.getUniformLocation(a,"directionBlend");d.uniform1f(c,b.zf)};e.prototype.Wm=function(){var a=this.g,b=a.J,d=this.tk;b.useProgram(d);b.enable(b.DEPTH_TEST);
this.hh(0,d);b.uniform2f(b.getUniformLocation(d,"uCanvasDimensions"),a.m.width,a.m.height);a=b.getUniformLocation(d,"srcScale");b.uniform2f(a,1,1);a=b.getUniformLocation(d,"srcOffset");b.uniform2f(a,0,0);a=b.getUniformLocation(d,"zOffset");b.uniform1f(a,.9999);this.Ii(d);this.hh(0,d);a=b.getUniformLocation(d,"cubeTexture");b.uniform1i(a,0);d=b.getAttribLocation(d,"aVertexPosition");b.disableVertexAttribArray(0);b.disableVertexAttribArray(1);b.disableVertexAttribArray(2);b.enableVertexAttribArray(d);
b.bindBuffer(b.ARRAY_BUFFER,this.Ng);b.vertexAttribPointer(d,2,b.FLOAT,!1,0,0);b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_CUBE_MAP,this.td);b.texParameteri(b.TEXTURE_CUBE_MAP,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_CUBE_MAP,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_CUBE_MAP,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_CUBE_MAP,b.TEXTURE_MAG_FILTER,b.LINEAR);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.Ld);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,
0)};e.prototype.Ml=function(){var a=this.g,b=this.g.h,d=a.h.O,c=a.J,h;h=d.length-1;if(!(0>h)){d[h].Be&&h--;var e=1024;a.xg&&(e=512);var g=c.getParameter(c.MAX_CUBE_MAP_TEXTURE_SIZE);for(g&&g<e&&(e=g);0<h&&d[h-1].width<=e;)h--;var f=!0,e=d[h];if(0!=e.P){e.cache=!0;for(g=0;6>g;g++)for(var l=0;l<e.ja;l++)for(var k=0;k<e.P;k++){var q=k+l*e.P+g*e.P*e.ja,p=e.Z[q];p||(p=e.Z[q]=new n.Sd);this.ka<this.Cd?p.h||(p.Ad?p.Ad--:(this.ci(p,e,a.He(g,h,k,l)),a.xa=!0)):this.dc++;p.Eb||(f=!1,a.xa=!0)}if(this.yg)if(f)this.yg=
!1;else return;!f&&d[d.length-1].Be&&(e=d[d.length-1],this.yg=f=0<e.width&&0<e.P);if(f){this.Dh=h;d=a.h.Ua;h=0<d||1<e.P||1<e.ja;var u;if(h){var t=document.createElement("canvas");t.width=e.width;t.height=e.height;2048>e.width&&(1500<e.width?(t.width=2048,t.height=2048):700<e.width?(t.width=1024,t.height=1024):(t.width=512,t.height=512));u=t.getContext("2d");a.T(t)}this.td=c.createTexture();a.ad++;c.bindTexture(c.TEXTURE_CUBE_MAP,this.td);c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);
c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,1);a=[1,3,5,4,0,2];f=t.width/e.width;b=b.F;for(g=0;6>g;g++){for(l=0;l<e.ja;l++)for(k=0;k<e.P;k++)q=k+l*e.P+a[g]*e.P*e.ja,p=e.Z[q],q=p.h,p.I&&(q=p.I),h?u.drawImage(q,f*(k*b-d),f*(l*b-d),f*q.width,f*q.height):c.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+g,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,q);h&&c.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+g,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,t)}}}}};e.prototype.ready=function(){return null!=
this.td};e.prototype.xk=function(){for(var a=this.g,b=a.h.O,d=a.J,c=0;c<b.length;c++){var h=b[c];if(!h.cache)for(var e in h.Z)if(h.Z.hasOwnProperty(e)){var g=h.Z[e];g.visible||(g.Eb&&(d.deleteTexture(g.Eb),a.ad--),g.h=null,g.gf&&d.deleteBuffer(g.gf),delete h.Z[e])}}};e.prototype.no=function(){var a=this.g;if(a.J){var b=this.g.J;b.disable(b.DEPTH_TEST);var d;for(d=0;d<a.H.length;d++){var c=a.H[d];if(!c.hd){n.U.ud(this.ca);n.U.rotate(this.ca,-a.K.a*Math.PI/180,[0,0,1]);n.U.rotate(this.ca,-a.j.a*Math.PI/
180,[1,0,0]);n.U.rotate(this.ca,(180-a.pan.a)*Math.PI/180,[0,1,0]);n.U.rotate(this.ca,c.pan*Math.PI/180,[0,1,0]);n.U.rotate(this.ca,-c.j*Math.PI/180,[1,0,0]);n.U.translate(this.ca,[0,0,1]);n.U.rotate(this.ca,c.nb*Math.PI/180,[0,0,1]);n.U.rotate(this.ca,-c.Na*Math.PI/180,[0,1,0]);n.U.rotate(this.ca,c.Aa*Math.PI/180,[1,0,0]);var h=Math.tan(c.f/2*Math.PI/180),e=c.Gd;e||(e=16/9);n.U.scale(this.ca,[h,h/e,1]);n.U.translate(this.ca,[0,0,-1]);b.bindBuffer(b.ARRAY_BUFFER,this.Eh);b.vertexAttribPointer(this.D.ea,
3,b.FLOAT,!1,0,0);b.bindBuffer(b.ARRAY_BUFFER,this.Ye);b.vertexAttribPointer(this.D.Fa,2,b.FLOAT,!1,0,0);b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,c.cc);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.Ld);b.uniform1i(this.D.Df,0);b.uniformMatrix4fv(this.D.yf,
!1,this.ca);b.uniformMatrix4fv(this.D.yd,!1,this.Za);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0)}}b.enable(b.DEPTH_TEST)}};e.prototype.mo=function(){var a=this.g;a.kb();var b;if(a.m.width!=a.A.offsetWidth||a.m.height!=a.A.offsetHeight)a.m.width=a.A.offsetWidth,a.m.height=a.A.offsetHeight;a.qe&&(a.Qc(0),a.od());if(a.J){var d=a.J;d.useProgram(this.D);n.U.ud(this.Za);n.U.perspective(a.Db(),a.eb.width/a.eb.height,.1,100,this.Za);d.uniformMatrix4fv(this.D.yd,!1,this.Za);this.Vg(0);d.uniform1i(this.D.Df,
0);d.uniformMatrix4fv(this.D.yd,!1,this.Za);d.uniformMatrix4fv(this.D.yf,!1,this.ca);d.enableVertexAttribArray(this.D.ea);d.enableVertexAttribArray(this.D.Fa);d.bindBuffer(d.ARRAY_BUFFER,this.Ye);d.vertexAttribPointer(this.D.Fa,2,d.FLOAT,!1,0,0);d.activeTexture(d.TEXTURE0);d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.Ld);d.uniform1f(this.D.Pi,1E-4);d.vertexAttribPointer(this.D.ea,3,d.FLOAT,!1,0,0);d.bindTexture(d.TEXTURE_2D,a.o.cc);for(b=0;1>b;b++)this.Vg(0),d.bindBuffer(d.ARRAY_BUFFER,a.o.Li),d.vertexAttribPointer(this.D.ea,
3,d.FLOAT,!1,0,0),d.bindBuffer(d.ARRAY_BUFFER,a.o.ah),d.vertexAttribPointer(this.D.Fa,2,d.FLOAT,!1,0,0),d.activeTexture(d.TEXTURE0),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,a.o.Yh),d.uniform1i(this.D.Df,0),d.uniformMatrix4fv(this.D.yf,!1,this.ca),d.uniformMatrix4fv(this.D.yd,!1,this.Za),d.drawElements(d.TRIANGLES,36,d.UNSIGNED_SHORT,0)}};e.prototype.lo=function(){var a=this.g,b=a.J,d=a.o;if(0<a.H.length)for(var c=0;c<a.H.length;c++){var h=a.H[c];if(!h.hd&&h.Sj&&h.rg!=h.c.currentTime&&(h.rg=h.c.currentTime,
!h.Gd&&0<h.c.videoHeight&&(h.Gd=h.c.videoWidth/h.c.videoHeight),a.Wf))try{h.cc&&(b.bindTexture(b.TEXTURE_2D,h.cc),b.texImage2D(b.TEXTURE_2D,0,b.RGB,b.RGB,b.UNSIGNED_BYTE,h.c),a.update())}catch(e){a.T(e)}}if(d.c&&d.rg!=d.c.currentTime){d.rg=d.c.currentTime;try{d.cc&&d.wg&&0<d.c.readyState&&(d.ed=!0,b.bindTexture(b.TEXTURE_2D,d.cc),b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,a.o.kj),b.texImage2D(b.TEXTURE_2D,0,b.RGB,b.RGB,b.UNSIGNED_BYTE,d.c),d.Ok=!0,a.update())}catch(e){a.T(e)}}};e.prototype.Vm=function(){var a,
b,d=this.g,c=this.g.J;d.sa.style.visibility="hidden";d.w.qf!=d.w.mode&&(d.w.qf=d.w.mode);if(0<=d.w.mode&&!d.M.Rf){var h=1;0==d.w.mode&&(h=0);3==d.w.mode&&(h=d.w.na);for(a=0;a<d.N.length;a++){var e=d.N[a];if("poly"==e.type){var g=e.zd,f=h;2==d.w.mode&&(f=e.na);var l=d.w.sc.indexOf(e.id);-1!=l&&(f=d.w.vb[l]);if(0<g.length){l=[];for(b=0;b<g.length;b++)l.push(g[b].bc),l.push(g[b].tb),l.push(0);c.useProgram(this.pc);c.enable(c.BLEND);c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.SRC_ALPHA,c.ONE);
c.disable(c.DEPTH_TEST);g=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,g);c.bufferData(c.ARRAY_BUFFER,new Float32Array(l),c.STATIC_DRAW);c.uniform2f(c.getUniformLocation(this.pc,"uCanvasDimensions"),d.m.width,d.m.height);g=c.getUniformLocation(this.pc,"uColor");b=e.Ob;c.uniform3f(g,(b>>16&255)/255,(b>>8&255)/255,(b&255)/255);var k=c.getUniformLocation(this.pc,"uAlpha");c.uniform1f(k,e.Nb*f);c.vertexAttribPointer(this.pc.ea,3,c.FLOAT,!1,0,0);c.drawArrays(c.LINE_LOOP,0,l.length/3);b=e.Lb;c.uniform3f(g,
(b>>16&255)/255,(b>>8&255)/255,(b&255)/255);c.uniform1f(k,e.Kb*f);c.enable(c.STENCIL_TEST);c.clearStencil(0);c.clear(c.STENCIL_BUFFER_BIT);c.colorMask(!1,!1,!1,!1);c.stencilFunc(c.ALWAYS,1,1);c.stencilOp(c.INCR,c.INCR,c.INCR);c.drawArrays(c.TRIANGLE_FAN,0,l.length/3);c.colorMask(!0,!0,!0,!0);c.stencilFunc(c.EQUAL,1,1);c.stencilOp(c.ZERO,c.ZERO,c.ZERO);c.drawArrays(c.TRIANGLE_FAN,0,l.length/3);c.disable(c.BLEND);c.enable(c.DEPTH_TEST);c.disable(c.STENCIL_TEST);c.useProgram(this.D)}}}}};e.prototype.Og=
function(){var a=this.g.J;if(a&&this.zb)for(;0<this.zb.length;){var b=this.zb.pop();b.Qm=!0;a.deleteTexture(b)}this.td&&(a.deleteTexture(this.td),this.td=null)};return e}();n.rl=f})(ggP2VR||(ggP2VR={}));
(function(n){var f=function(){return function(){this.ye={$e:1,af:1,uf:0,vf:0,Ne:0,Yf:0,scale:1};this.mc=!0;this.ie=[]}}(),e=function(){function a(){var a;this.Xa=Array(6);for(a=0;6>a;a++)this.Xa[a]=new f}a.prototype.Kl=function(a,d,c,h){for(var e=0;6>e;e++){var g;if(g=this.Xa[e]){var f;f=[];f.push(new n.ua(-1,-1,-1,0,0));f.push(new n.ua(1,-1,-1,1,0));f.push(new n.ua(1,1,-1,1,1));f.push(new n.ua(-1,1,-1,0,1));for(var l=0;l<f.length;l++)4>e?f[l].Na(-Math.PI/2*e):f[l].Aa(Math.PI/2*(4===e?-1:1)),h&&(f[l].nb(h.K*
Math.PI/180),f[l].Aa(-h.pitch*Math.PI/180)),f[l].Na(-a*Math.PI/180),f[l].Aa(d*Math.PI/180),f[l].nb(c*Math.PI/180);g.mc=0<f.length}}};return a}();n.nl=e})(ggP2VR||(ggP2VR={}));
(function(n){n.ml=function(){return function(){this.O=[];this.qc="0x000000";this.pk=!1;this.bk=this.ak=.4;this.F=512;this.Ua=1;this.ai=0;this.ck="";this.yk=this.height=this.width=0}}();n.kk=function(){return function(){this.height=this.width=0;this.Be=this.cache=!1;this.ja=this.P=0;this.Z=[]}}();n.Sd=function(){return function(){this.loaded=this.visible=!1;this.Ad=this.wi=0;this.Pc=[];this.sg=0;this.Rd=[];this.bd=0}}()})(ggP2VR||(ggP2VR={}));
(function(n){n.hl=function(){return function(f,e){this.g=f;this.wa=e;var a,b,d=this.__div=document.createElement("div");a=document.createElement("img");a.setAttribute("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA5xJREFUeNqclmlIVFEUx997TjrplFQW2WKBBSYtRFlpWUILSSsRZRQIBdGHCFqIoKIvQRsUFRJC9LEgaSFbMMpcWi1pLzOLsjItKms0U5t5/c/wH7nc5o2jF374xrv87z33nHOPaRsRtbFgDpgJxoD+wATfwDNQDK6CyrCr5OcbhgiGIRsUAZt4QTWoIFXgp9JfAhY7rgdBl8NeBoLDYBloA+dBOagFTcDHcVEgDgwBGWA+OAcugvXgvb5wKMGJoAAMp9BpUA96EBf/Btsf8BI8AWfAErAcpHHDZeriliY2AVwDg8AucAQ0Ag+I4XhTm2Oxz8PT46KMbTx5EZjuJDgAnAVusJUm9DhYwalFcc59sIXXIaceFkowDySBPTRPL20xm+b7zYXa+N3CPrWJ6GuwGySA40HLBHc/GywFhbS5R1lEBrZy7FQwiSaX9pmnqeAYt+KUcew7BVZw/QKTq0ocpYPVvDOXItZCk2xgDIZqL8BR8Ab0VDbr4yZOgLeIwzQx6WiQxcCt1+6sld66L4yYtFSwF4yg2dU7/cEwGW9YVkAwmycp1dzdpvgm0DcCh4kHmxWzBls0uBX4qqmZJ4KzePm1IeJLgjmlC16aDKZpp5Q168B3o6wsSwTHgU+MIUs74RSj6y1d+212HKimJlUE+tFRfJpYtOKNXWmJTASqWf2Bu/R6+4TKHOrOzG4IhptjWgHbGkZvepQ6SQK7oRuCXzjX1DJavBEX1ygfT8FgBqpfm1zRDcEKbR2bsZlkJCdXieB1ZhZ5YtqVgXIPN+m9kbY6hpdb+d9fPncJRmZmqQheZkemJmgxyxykl3XWJEkcAl7N21s7PDcl5ZJ0PAa3wVwmWtVbZafPwQ7wLozYB7ATPNJO56d/LAikP9u+66KNJS1d4IOZp7wU0hfLukUyzgwm70T2N/DOxIy/eFdqawa5DL2NEGwP5k15Ja4woz9glvcomd9NzyvkFcQo5gomaLfm5c0svnKZ2k7q7+FauvR2MJKZR3+sY5WgtvkdG6JyELGhNHMTXyGfLviRJ5Tcd4Dlhle7086Sgp8CqVxDkn4OqHaqacr5ekjy3Q/W0FRNNGmoMtamdzdxsytZC0lqXKhEgWPVVgImg2NgFT1MHOoOk3yLEtgWN5TEOYvoIFI1rGM19//2wpAD7imF7lfwENwAxaASNCj90pcLLKdC2Iyw1M9gnEplMEp5kOU1f8WwKGJm8oUr9f8JMAAVMDM6HSDa9QAAAABJRU5ErkJggg%3D%3D");
a.setAttribute("style","position: absolute;top: -14px;left: -14px; "+f.Ia+"user-select: none;");a.ondragstart=function(){return!1};d.appendChild(a);a="position:absolute;"+(f.Ia+"user-select: none;");a+=f.Ia+"touch-callout: none;";a+=f.Ia+"tap-highlight-color: rgba(0,0,0,0);";f.wd&&!f.ma&&(a+=f.Ia+"transform: translateZ(9999999px);");d.setAttribute("style",a);d.onclick=function(){f.Ee(e);f.mi(e.url,e.target)};var c=f.w.Gi;c.enabled&&(b=document.createElement("div"),a="position:absolute;top:\t 20px;",
a=c.nh?a+"white-space: pre-wrap;":a+"white-space: nowrap;",a+=f.Ia+"transform-origin: 50% 50%;",b.setAttribute("style",a+"visibility: hidden;overflow: hidden;padding: 0px 1px 0px 1px;"),b.style.color=this.g.da(c.Hi,c.Fi),c.background?b.style.backgroundColor=this.g.da(c.Lb,c.Kb):b.style.backgroundColor="transparent",b.style.border="solid "+this.g.da(c.Ob,c.Nb)+" "+c.wh+"px",b.style.borderRadius=c.vh+"px",b.style.textAlign="center",0<c.width?(b.style.left=-c.width/2+"px",b.style.width=c.width+"px"):
b.style.width="auto",b.style.height=0<c.height?c.height+"px":"auto",b.style.overflow="hidden",b.innerHTML=e.title,d.onmouseover=function(){0==c.width&&(b.style.left=-b.offsetWidth/2+"px");b.style.visibility="inherit"},d.onmouseout=function(){b.style.visibility="hidden"},d.appendChild(b))}}()})(ggP2VR||(ggP2VR={}));
(function(n){n.wc=function(){return function(){this.Kd=this.Jd=this.Ec=this.Id=this.mb=this.type=this.hb=this.value=this.time=0}}();n.dk=function(){return function(){this.co=this.ul=this.length=0}}();n.Tj=function(){return function(){}}()})(ggP2VR||(ggP2VR={}));
(function(n){var f=function(){function e(a){this.g=a;this.enable=!1;this.Vi=1;this.cg=0;this.type="crossdissolve";this.Dc=this.Va=this.Tc=0;this.oh=5;this.Oe=1;this.ph=!1;this.$g=this.Zg=this.Ci=0;this.Ge=70;this.gl=0;this.ib=this.fl=1;this.ag=this.$f=.5;this.Hd=this.Ni=this.hi=this.Zh=!1;this.Hh=1}e.prototype.mf=function(){var a=this.g.J,b=a.createShader(a.VERTEX_SHADER);a.shaderSource(b,"attribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nvarying vec2 vTextureCoord;\nuniform bool uZoomIn;\nuniform float uZoomFactor;\nuniform vec2 uZoomCenter;\nvoid main(void) {\n\t gl_Position = vec4(aVertexPosition, 1.0);\n\t if(!uZoomIn) {\n\t \n\t   vTextureCoord = aTextureCoord;\n\t }\n\t else {\n\t   vTextureCoord = (aTextureCoord - vec2(0.5, 0.5)) * (1.0/uZoomFactor) + uZoomCenter;\n\t }\n}\n");
a.compileShader(b);a.getShaderParameter(b,a.COMPILE_STATUS)||(alert(a.getShaderInfoLog(b)),b=null);var d=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uAlpha;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, uAlpha);\n}\n");
a.compileShader(d);a.getShaderParameter(d,a.COMPILE_STATUS)||(alert(a.getShaderInfoLog(d)),d=null);this.qa=a.createProgram();a.attachShader(this.qa,b);a.attachShader(this.qa,d);a.linkProgram(this.qa);a.getProgramParameter(this.qa,a.LINK_STATUS)||alert("Could not initialise shaders");this.qa.ea=a.getAttribLocation(this.qa,"aVertexPosition");a.enableVertexAttribArray(this.qa.ea);this.qa.Fa=a.getAttribLocation(this.qa,"aTextureCoord");a.enableVertexAttribArray(this.qa.Fa);d=a.createShader(a.FRAGMENT_SHADER);
a.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uColorPercent;\nuniform float uAlpha;\nuniform vec3 uDipColor;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n gl_FragColor = vec4(textureColor.x * (1.0 - uColorPercent) + uDipColor.x * uColorPercent, textureColor.y * (1.0 - uColorPercent) + uDipColor.y * uColorPercent, textureColor.z * (1.0 - uColorPercent) + uDipColor.z * uColorPercent, uAlpha);\n}\n");
a.compileShader(d);a.getShaderParameter(d,a.COMPILE_STATUS)||(alert(a.getShaderInfoLog(d)),d=null);this.Pa=a.createProgram();a.attachShader(this.Pa,b);a.attachShader(this.Pa,d);a.linkProgram(this.Pa);a.getProgramParameter(this.Pa,a.LINK_STATUS)||alert("Could not initialise shaders");this.Pa.ea=a.getAttribLocation(this.Pa,"aVertexPosition");a.enableVertexAttribArray(this.Pa.ea);this.Pa.Fa=a.getAttribLocation(this.Pa,"aTextureCoord");a.enableVertexAttribArray(this.Pa.Fa);d=a.createShader(a.FRAGMENT_SHADER);
a.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform bool uRound;\nuniform float uRadius;\nuniform vec2 uRectDim;\nuniform vec2 uIrisCenter;\nuniform float uSoftEdge;\nuniform sampler2D uSampler;\nvoid main(void) {\n float alpha = 0.0;\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n if (uRound) {\n\t  vec2 diff = uIrisCenter - gl_FragCoord.xy;\n\t   float distFromCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n\t   if (distFromCenter > uRadius) {\n      alpha = 1.0;\n    } else {\n      alpha = 1.0 - ((uRadius - distFromCenter) / uSoftEdge);\n    };\n }\n else {\n    float alphaFromLeft = 1.0 - ((gl_FragCoord.x -(uIrisCenter.x - uRectDim.x)) / uSoftEdge);\n    float alphaFromRight = 1.0 - (((uIrisCenter.x + uRectDim.x) - gl_FragCoord.x) / uSoftEdge);\n    float alphaFromTop = 1.0 - ((gl_FragCoord.y -(uIrisCenter.y - uRectDim.y)) / uSoftEdge);\n    float alphaFromBottom = 1.0 - (((uIrisCenter.y + uRectDim.y) - gl_FragCoord.y) / uSoftEdge);\n    alpha = max(max(alphaFromLeft, alphaFromRight), max(alphaFromTop, alphaFromBottom));\n }\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, alpha);\n}\n");
a.compileShader(d);a.getShaderParameter(d,a.COMPILE_STATUS)||(alert(a.getShaderInfoLog(d)),d=null);this.Ba=a.createProgram();a.attachShader(this.Ba,b);a.attachShader(this.Ba,d);a.linkProgram(this.Ba);a.getProgramParameter(this.Ba,a.LINK_STATUS)||alert("Could not initialise shaders");this.Ba.ea=a.getAttribLocation(this.Ba,"aVertexPosition");a.enableVertexAttribArray(this.Ba.ea);this.Ba.Fa=a.getAttribLocation(this.Ba,"aTextureCoord");a.enableVertexAttribArray(this.Ba.Fa);d=a.createShader(a.FRAGMENT_SHADER);
a.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uPercent;\nuniform int uDirection;\nuniform vec2 uCanvasDimensions;\nuniform float uSoftEdge;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n float alpha = 0.0;\n if (uDirection == 1) {\n\t if (gl_FragCoord.x > uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((uPercent - gl_FragCoord.x) / uSoftEdge);\n  }\n }\n if (uDirection == 2) {\n\t if (gl_FragCoord.x < uCanvasDimensions.x - uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((gl_FragCoord.x - (uCanvasDimensions.x - uPercent)) / uSoftEdge);\n  }\n }\n if (uDirection == 3) {\n\t if (gl_FragCoord.y < uCanvasDimensions.y - uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((gl_FragCoord.y - (uCanvasDimensions.y - uPercent)) / uSoftEdge);\n  }\n }\n if (uDirection == 4) {\n\t if (gl_FragCoord.y > uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((uPercent - gl_FragCoord.y) / uSoftEdge);\n  }\n }\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, alpha);\n}\n");
a.compileShader(d);a.getShaderParameter(d,a.COMPILE_STATUS)||(alert(a.getShaderInfoLog(d)),d=null);this.Ha=a.createProgram();a.attachShader(this.Ha,b);a.attachShader(this.Ha,d);a.linkProgram(this.Ha);a.getProgramParameter(this.Ha,a.LINK_STATUS)||alert("Could not initialise shaders");this.Ha.ea=a.getAttribLocation(this.Ha,"aVertexPosition");a.enableVertexAttribArray(this.Ha.ea);this.Ha.Fa=a.getAttribLocation(this.Ha,"aTextureCoord");a.enableVertexAttribArray(this.Ha.Fa)};e.prototype.Qc=function(){var a=
this.g.J;if(!a)return!1;if(this.Jb=a.createFramebuffer()){a.bindFramebuffer(a.FRAMEBUFFER,this.Jb);this.Jb.width=1024;this.Jb.height=1024;this.de=a.createTexture();a.bindTexture(a.TEXTURE_2D,this.de);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,this.Jb.width,this.Jb.height,0,a.RGBA,a.UNSIGNED_BYTE,null);var b=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,b);a.renderbufferStorage(a.RENDERBUFFER,
a.DEPTH_COMPONENT16,this.Jb.width,this.Jb.height);a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this.de,0);a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,b);a.bindTexture(a.TEXTURE_2D,null);a.bindRenderbuffer(a.RENDERBUFFER,null);a.bindFramebuffer(a.FRAMEBUFFER,null);this.$a=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.$a);a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,-1,0,1,-1,0,-1,1,0,1,1,0]),a.STATIC_DRAW);this.$a.yc=3;this.$a.xd=4;this.Ce=
a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.Ce);a.bufferData(a.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,1]),a.STATIC_DRAW);return!0}return!1};e.prototype.lk=function(a){var b=this.g.J,d=this.g.eb;if(this.Dd){b.useProgram(this.qa);b.bindBuffer(b.ARRAY_BUFFER,this.$a);b.vertexAttribPointer(this.qa.ea,this.$a.yc,b.FLOAT,!1,0,0);b.bindBuffer(b.ARRAY_BUFFER,this.Ce);b.vertexAttribPointer(this.qa.Fa,2,b.FLOAT,!1,0,0);b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,this.de);var d=1+(this.ib-
1)*a,c=b.getUniformLocation(this.qa,"uAlpha");b.uniform1f(c,1);c=b.getUniformLocation(this.qa,"uZoomIn");b.uniform1i(c,1);var c=b.getUniformLocation(this.qa,"uZoomCenter"),h=.5+(this.$f-.5)*Math.sqrt(a),e=.5+(this.ag-.5)*Math.sqrt(a);0>h-.5/d&&(h=.5/d);0>e-.5/d&&(e=.5/d);1<h+.5/d&&(h=1-.5/d);1<e+.5/d&&(e=1-.5/d);b.uniform2f(c,h,e);h=b.getUniformLocation(this.qa,"uZoomFactor");b.uniform1f(h,d);b.uniform1i(b.getUniformLocation(this.qa,"uSampler"),0);b.drawArrays(b.TRIANGLE_STRIP,0,this.$a.xd);b.useProgram(this.g.la.D)}else{this.g.Uf();
b.blendFuncSeparate(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA,b.SRC_ALPHA,b.ONE);b.enable(b.BLEND);b.disable(b.DEPTH_TEST);h=.5+(this.$f-.5);e=.5+(this.ag-.5);0>h-.5/this.ib&&(h=.5/this.ib);0>e-.5/this.ib&&(e=.5/this.ib);1<h+.5/this.ib&&(h=1-.5/this.ib);1<e+.5/this.ib&&(e=1-.5/this.ib);if("crossdissolve"==this.type)b.useProgram(this.qa),b.bindBuffer(b.ARRAY_BUFFER,this.$a),b.vertexAttribPointer(this.qa.ea,this.$a.yc,b.FLOAT,!1,0,0),b.bindBuffer(b.ARRAY_BUFFER,this.Ce),b.vertexAttribPointer(this.qa.Fa,2,b.FLOAT,
!1,0,0),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,this.de),c=b.getUniformLocation(this.qa,"uAlpha"),b.uniform1f(c,1-a),c=b.getUniformLocation(this.qa,"uZoomIn"),b.uniform1i(c,1==this.Va||2==this.Va?1:0),c=b.getUniformLocation(this.qa,"uZoomCenter"),b.uniform2f(c,h,e),h=b.getUniformLocation(this.qa,"uZoomFactor"),b.uniform1f(h,this.ib),b.uniform1i(b.getUniformLocation(this.qa,"uSampler"),0);else if("diptocolor"==this.type)b.useProgram(this.Pa),b.bindBuffer(b.ARRAY_BUFFER,this.$a),b.vertexAttribPointer(this.Pa.ea,
this.$a.yc,b.FLOAT,!1,0,0),b.bindBuffer(b.ARRAY_BUFFER,this.Ce),b.vertexAttribPointer(this.Pa.Fa,2,b.FLOAT,!1,0,0),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,this.de),b.uniform1f(b.getUniformLocation(this.Pa,"uColorPercent"),Math.min(2*a,1)),c=b.getUniformLocation(this.Pa,"uAlpha"),b.uniform1f(c,1-Math.max(2*(a-.5),0)),b.uniform3f(b.getUniformLocation(this.Pa,"uDipColor"),(this.cg>>16&255)/255,(this.cg>>8&255)/255,(this.cg&255)/255),c=b.getUniformLocation(this.Pa,"uZoomIn"),b.uniform1i(c,
1==this.Va||2==this.Va?1:0),c=b.getUniformLocation(this.Pa,"uZoomCenter"),b.uniform2f(c,h,e),h=b.getUniformLocation(this.Pa,"uZoomFactor"),b.uniform1f(h,this.ib),b.uniform1i(b.getUniformLocation(this.Pa,"uSampler"),0);else if("irisround"==this.type||"irisrectangular"==this.type){b.useProgram(this.Ba);b.bindBuffer(b.ARRAY_BUFFER,this.$a);b.vertexAttribPointer(this.Ba.ea,this.$a.yc,b.FLOAT,!1,0,0);b.bindBuffer(b.ARRAY_BUFFER,this.Ce);b.vertexAttribPointer(this.Ba.Fa,2,b.FLOAT,!1,0,0);b.activeTexture(b.TEXTURE0);
b.bindTexture(b.TEXTURE_2D,this.de);var g;1==this.Va||2==this.Va?g=c=.5:(c=this.$f,g=this.ag);var f=c*d.width,l=g*d.height,f=Math.max(f,d.width-f),l=Math.max(l,d.height-l);"irisround"==this.type?b.uniform1f(b.getUniformLocation(this.Ba,"uRadius"),(Math.sqrt(f*f+l*l)+this.Tc)*a):(f>l?(l=d.height/d.width*f+this.Tc,f+=this.Tc):(f=d.width/d.height*l+this.Tc,l+=this.Tc),b.uniform2f(b.getUniformLocation(this.Ba,"uRectDim"),f*a,l*a));a=b.getUniformLocation(this.Ba,"uSoftEdge");b.uniform1f(a,this.Tc);b.uniform1i(b.getUniformLocation(this.Ba,
"uRound"),"irisround"==this.type?1:0);b.uniform2f(b.getUniformLocation(this.Ba,"uIrisCenter"),c*d.width,g*d.height);c=b.getUniformLocation(this.Ba,"uZoomIn");b.uniform1i(c,1==this.Va||2==this.Va?1:0);c=b.getUniformLocation(this.Ba,"uZoomCenter");b.uniform2f(c,h,e);h=b.getUniformLocation(this.Ba,"uZoomFactor");b.uniform1f(h,this.ib);b.uniform1i(b.getUniformLocation(this.Ba,"uSampler"),0)}else if("wipeleftright"==this.type||"wiperightleft"==this.type||"wipetopbottom"==this.type||"wipebottomtop"==this.type||
"wiperandom"==this.type)b.useProgram(this.Ha),b.bindBuffer(b.ARRAY_BUFFER,this.$a),b.vertexAttribPointer(this.Ha.ea,this.$a.yc,b.FLOAT,!1,0,0),b.bindBuffer(b.ARRAY_BUFFER,this.Ce),b.vertexAttribPointer(this.Ha.Fa,2,b.FLOAT,!1,0,0),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,this.de),b.uniform1f(b.getUniformLocation(this.Ha,"uPercent"),3>this.Hh?a*(d.width+this.Tc):a*(d.height+this.Tc)),a=b.getUniformLocation(this.Ha,"uSoftEdge"),b.uniform1f(a,this.Tc),b.uniform1i(b.getUniformLocation(this.Ha,
"uDirection"),this.Hh),b.uniform2f(b.getUniformLocation(this.Ha,"uCanvasDimensions"),d.width,d.height),c=b.getUniformLocation(this.Ha,"uZoomIn"),b.uniform1i(c,1==this.Va||2==this.Va?1:0),c=b.getUniformLocation(this.Ha,"uZoomCenter"),b.uniform2f(c,h,e),h=b.getUniformLocation(this.Ha,"uZoomFactor"),b.uniform1f(h,this.ib),b.uniform1i(b.getUniformLocation(this.Ha,"uSampler"),0);b.drawArrays(b.TRIANGLE_STRIP,0,this.$a.xd);b.useProgram(this.g.la.D);b.disable(b.BLEND);b.enable(b.DEPTH_TEST)}};return e}();
n.kl=f})(ggP2VR||(ggP2VR={}));
(function(n){var f=function(){function e(a){this.Sf=[];this.g=a;this.enable=!1;this.hb=2;this.cj=!1}e.prototype.Lh=function(a){if(2==a.mode||3==a.mode||5==a.mode){var b=this.g.Ca.currentTime,d=a.lc.gain.value,c=a.jc.gain.value,h=a.kc.gain.value;a.ic.gain.linearRampToValueAtTime(a.ic.gain.value,b);a.ic.gain.linearRampToValueAtTime(0,b+this.hb);a.lc.gain.linearRampToValueAtTime(d,b);a.lc.gain.linearRampToValueAtTime(0,b+this.hb);a.jc.gain.linearRampToValueAtTime(c,b);a.jc.gain.linearRampToValueAtTime(0,b+
this.hb);a.kc.gain.linearRampToValueAtTime(h,b);a.kc.gain.linearRampToValueAtTime(0,b+this.hb)}else b=this.g.Ca.currentTime,a.Mc.gain.linearRampToValueAtTime(a.Mc.gain.value,b),a.Mc.gain.linearRampToValueAtTime(0,b+this.hb);a.lg=!0;setTimeout(function(){a.Yd()},1E3*this.hb+5)};e.prototype.Sn=function(){for(var a=0;a<this.g.S.length;a++){var b=this.g.S[a];this.g.Rc(b.id)||4==b.mode||6==b.mode||(b.ga?b.Gc():(b.c.play(),b.c.currentTime=0))}};e.prototype.Ql=function(){for(var a=(this.g.Ca.currentTime-
this.Pn)/this.hb,a=Math.min(1,a),b=0;b<this.g.S.length;b++){var d=this.g.S[b];this.g.Rc(d.id)&&1>d.ia&&(d.ia=a)}1==a&&clearInterval(this.On)};return e}();n.ll=f})(ggP2VR||(ggP2VR={}));
(function(n){var f=function(){function e(a){this.sf=[];this.Hc=null;this.Hb=[];this.yb=[];this.Ib=[];this.Ai=!0;this.g=a;this.Ll()}e.prototype.mf=function(){var a=this.g.J,b=a.createShader(a.VERTEX_SHADER);a.shaderSource(b,"attribute vec3 aVertexPosition;\nvoid main(void) {\n gl_Position = vec4(aVertexPosition, 1.0);\n}\n");a.compileShader(b);a.getShaderParameter(b,a.COMPILE_STATUS)||(alert(a.getShaderInfoLog(b)),b=null);var d=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uCanvasDimensions;\nuniform vec2 uFlareCenterPosition;\nuniform float uBlindingValue;\nuniform float uAspectRatio;\nvoid main(void) {\n float canvasDiag = sqrt( (uCanvasDimensions.x * uCanvasDimensions.x) + (uCanvasDimensions.y * uCanvasDimensions.y) );\n vec2 diff = uFlareCenterPosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromFlarePoint = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float factor = (distFromFlarePoint / canvasDiag) / 10.0;\n gl_FragColor = vec4(1.0, 1.0, 1.0, pow(((1.0 - factor) * 0.8) * uBlindingValue, 2.0));\n}\n");
a.compileShader(d);a.getShaderParameter(d,a.COMPILE_STATUS)||(alert(a.getShaderInfoLog(d)),d=null);this.Mb=a.createProgram();a.attachShader(this.Mb,b);a.attachShader(this.Mb,d);a.linkProgram(this.Mb);a.getProgramParameter(this.Mb,a.LINK_STATUS)||alert("Could not initialise shaders");this.Mb.ea=a.getAttribLocation(this.Mb,"aVertexPosition");a.enableVertexAttribArray(this.Mb.ea);d=a.createShader(a.VERTEX_SHADER);b=a.createShader(a.VERTEX_SHADER);a.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\nvarying vec4 vColor;\nuniform vec2 uCirclePosition;\nuniform float uCircleRadius;\nuniform vec2 uCanvasDimensions2;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 circleOnScreen = aVertexPosition.xy * uCircleRadius + uCirclePosition;\n circleOnScreen.y = circleOnScreen.y / uAspectRatio;\n vec2 circleNorm = (circleOnScreen / uCanvasDimensions2) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(circleNorm.x, circleNorm.y, 0.0, 1.0);\n}\n");
a.compileShader(d);a.getShaderParameter(d,a.COMPILE_STATUS)||(alert(a.getShaderInfoLog(d)),d=null);a.shaderSource(b,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\nvarying vec4 vColor;\nuniform vec2 uCirclePosition;\nuniform float uCircleRadius;\nuniform vec2 uCanvasDimensions2;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 circleOnScreen = aVertexPosition.xy * uCircleRadius + uCirclePosition;\n circleOnScreen.y = circleOnScreen.y / uAspectRatio;\n vec2 circleNorm = (circleOnScreen / uCanvasDimensions2) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(circleNorm.x, circleNorm.y, 0.0, 1.0);\n}\n");
a.compileShader(b);a.getShaderParameter(b,a.COMPILE_STATUS)||(alert(a.getShaderInfoLog(b)),d=null);var c=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(c,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uCircleTexturePosition;\nuniform vec3 uCircleColor;\nuniform float uCircleRadius;\nuniform float uCircleAlpha;\nuniform float uCircleSoftness;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 diff = uCircleTexturePosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromCircleCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float softnessDistance = uCircleRadius * (1.0 - uCircleSoftness);\n if (distFromCircleCenter > uCircleRadius)\n {\n\t  gl_FragColor = vec4(uCircleColor, 0.0);\n }\n else if (distFromCircleCenter <= (softnessDistance))\n {\n\t  float factor = distFromCircleCenter / softnessDistance;\n\t  gl_FragColor = vec4(uCircleColor, pow((1.0 - (0.2 * factor)) * uCircleAlpha, 1.8));\n }\n else\n {\n\t  float factor = (distFromCircleCenter - softnessDistance) / (uCircleRadius - softnessDistance);\n\t  gl_FragColor = vec4(uCircleColor, pow((0.8 - (0.8 * factor)) * uCircleAlpha, 1.8));\n }\n}\n");
a.compileShader(c);a.getShaderParameter(c,a.COMPILE_STATUS)||(alert(a.getShaderInfoLog(c)),c=null);this.oa=a.createProgram();a.attachShader(this.oa,d);a.attachShader(this.oa,c);a.linkProgram(this.oa);a.getProgramParameter(this.oa,a.LINK_STATUS)||alert("Could not initialise shaders");this.oa.ea=a.getAttribLocation(this.oa,"aVertexPosition");a.enableVertexAttribArray(this.oa.ea);d=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uRingTexturePosition;\nuniform float uRingRadius;\nuniform float uRingAlpha;\nuniform float uAspectRatio;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec2 diff = uRingTexturePosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromRingCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float factor = distFromRingCenter / uRingRadius;\n if (distFromRingCenter > uRingRadius)\n {\n\t gl_FragColor = vec4(1.0, 1.0, 1.0, 0.0);\n }\n else\n {\n vec4 textureColor = texture2D(uSampler, vec2(factor / uAspectRatio, 0.5));\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, uRingAlpha);\n }\n}\n");
a.compileShader(d);a.getShaderParameter(d,a.COMPILE_STATUS)||(alert(a.getShaderInfoLog(d)),d=null);this.gb=a.createProgram();a.attachShader(this.gb,b);a.attachShader(this.gb,d);a.linkProgram(this.gb);a.getProgramParameter(this.gb,a.LINK_STATUS)||alert("Could not initialise shaders");this.gb.ea=a.getAttribLocation(this.gb,"aVertexPosition")};e.prototype.Qc=function(){var a=this.g.J;this.Zc=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.Zc);a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,-1,0,1,
-1,0,1,1,0,-1,1,0]),a.STATIC_DRAW);this.Zc.yc=3;this.Zc.xd=4;this.re=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.re);for(var b=[0,0,0],d=2*Math.PI/6,c=Math.PI/180*35,h=1,e=c;e<=c+2*Math.PI;e+=d)b.push(Math.sin(e)),b.push(-Math.cos(e)),b.push(0),h++;a.bufferData(a.ARRAY_BUFFER,new Float32Array(b),a.STATIC_DRAW);this.re.yc=3;this.re.xd=h;this.zk=a.createTexture();a.bindTexture(a.TEXTURE_2D,this.zk);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,
a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);b=document.createElement("canvas");b.width=100;b.height=1;d=b.getContext("2d");d.width=100;d.height=1;c=d.createLinearGradient(0,0,100,0);c.addColorStop(0,this.g.da(16777215,0));c.addColorStop(.88,this.g.da(0,0));c.addColorStop(.9,this.g.da(16654848,1));c.addColorStop(.92,this.g.da(16776448,1));c.addColorStop(.94,this.g.da(4849466,1));c.addColorStop(.96,this.g.da(131071,
1));c.addColorStop(.98,this.g.da(8190,1));c.addColorStop(1,this.g.da(0,0));d.fillStyle=c;d.fillRect(0,0,100,1);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b)};e.prototype.hn=function(){for(;0<this.sf.length;)this.sf.pop()};e.prototype.Ll=function(){var a=[],b=[],d=[],c={l:14,alpha:.2,color:11390415,i:.27};a.push(c);c={l:20,alpha:.25,color:11390415,i:.4};a.push(c);c={l:10,alpha:.2,color:12442332,i:.6};a.push(c);c={l:15,alpha:.2,color:11390415,i:.8};a.push(c);c={l:10,alpha:.2,color:12442332,
i:1.5};a.push(c);c={l:15,alpha:.2,color:11390415,i:1.8};a.push(c);c={l:8,alpha:.2,color:12575203,v:.8,i:.7};b.push(c);c={l:7,alpha:.4,color:12575203,v:.5,i:1.6};b.push(c);c={l:5,alpha:.4,color:12575203,v:.6,i:.9};b.push(c);c={l:8,alpha:.3,color:12575203,v:.4,i:1.1};b.push(c);this.Hb.push(a);this.yb.push(b);this.Ib.push(d);a=[];b=[];d=[];c={l:30,alpha:.3,color:11390415,i:.5};a.push(c);c={l:10,alpha:.3,color:11390415,i:1};a.push(c);c={l:20,alpha:.3,color:11390415,i:1.3};a.push(c);c={l:10,alpha:.3,color:11390415,
i:1.5};a.push(c);c={l:15,alpha:.3,color:11390415,i:1.8};a.push(c);c={l:10,alpha:.3,color:15506856,v:.8,i:.7};b.push(c);c={l:20,alpha:.5,color:15506856,v:.5,i:1.6};b.push(c);c={l:5,alpha:.5,color:15506856,v:.6,i:.9};b.push(c);c={l:60,alpha:.4,color:15506856,v:.2,i:1.1};b.push(c);d.push({l:220,alpha:.035,i:2});this.Hb.push(a);this.yb.push(b);this.Ib.push(d);a=[];b=[];d=[];c={l:30,alpha:.5,color:15465727,i:.5};a.push(c);c={l:40,alpha:.28,color:15726842,i:.8};a.push(c);c={l:25,alpha:.32,color:15726842,
i:1.1};a.push(c);c={l:15,alpha:.25,color:15726842,i:1.35};a.push(c);c={l:10,alpha:.28,color:15465727,i:1.65};a.push(c);c={l:10,alpha:.45,color:15465727,v:.8,i:.7};b.push(c);c={l:7,alpha:.5,color:15465727,v:.4,i:.9};b.push(c);c={l:40,alpha:.4,color:15465727,v:.3,i:.38};b.push(c);c={l:50,alpha:.4,color:15465727,v:.5,i:1.25};b.push(c);c={l:18,alpha:.2,color:15465727,v:.5,i:1.25};b.push(c);c={l:10,alpha:.34,color:15726842,v:.8,i:1.5};b.push(c);c={l:38,alpha:.37,color:15465727,v:.3,i:-.5};b.push(c);this.Hb.push(a);
this.yb.push(b);this.Ib.push(d);a=[];b=[];d=[];c={l:16,alpha:.5,color:16363159,i:.1};a.push(c);c={l:26,alpha:.3,color:16091819,i:.32};a.push(c);c={l:29,alpha:.2,color:16091819,i:1.32};a.push(c);c={l:20,alpha:.18,color:16363159,i:1.53};a.push(c);c={l:27,alpha:.13,color:16425092,i:1.6};a.push(c);c={l:20,alpha:.1,color:16091819,i:1.75};a.push(c);c={l:12,alpha:.45,color:16312238,v:.45,i:.2};b.push(c);c={l:8,alpha:.25,color:16434209,v:.7,i:.33};b.push(c);c={l:9,alpha:.25,color:16091819,v:.4,i:.7};b.push(c);
c={l:7,alpha:.2,color:16091819,v:.4,i:.85};b.push(c);c={l:60,alpha:.23,color:16091819,v:.55,i:1.05};b.push(c);c={l:37,alpha:.1,color:16091819,v:.55,i:1.22};b.push(c);c={l:10,alpha:.25,color:16363159,v:.65,i:1.38};b.push(c);c={l:7,alpha:.2,color:16434209,v:.5,i:1.45};b.push(c);c={l:3,alpha:.2,color:16416033,v:.5,i:1.78};b.push(c);c={l:6,alpha:.18,color:16434209,v:.45,i:1.9};b.push(c);c={l:4,alpha:.14,color:16766514,v:.45,i:2.04};b.push(c);c={l:30,alpha:.14,color:16766514,v:.8,i:.04};b.push(c);this.Hb.push(a);
this.yb.push(b);this.Ib.push(d);a=[];b=[];d=[];c={l:9,alpha:.3,color:14346999,v:.3,i:.3};b.push(c);c={l:5,alpha:.5,color:14148072,v:.8,i:.6};b.push(c);c={l:3,alpha:.37,color:14346999,v:.66,i:.8};b.push(c);c={l:45,alpha:.2,color:14346999,v:.36,i:1.2};b.push(c);c={l:13,alpha:.2,color:14346999,v:.36,i:1.23};b.push(c);c={l:11,alpha:.2,color:14148072,v:.36,i:1.28};b.push(c);c={l:27,alpha:.16,color:14346999,v:.36,i:1.55};b.push(c);c={l:6,alpha:.36,color:14148072,v:.8,i:1.7};b.push(c);this.Hb.push(a);this.yb.push(b);
this.Ib.push(d);a=[];b=[];d=[];c={l:24,alpha:.2,color:15186464,i:.2};a.push(c);c={l:7,alpha:.26,color:15186464,i:.35};a.push(c);c={l:23,alpha:.18,color:15186464,i:.65};a.push(c);c={l:13,alpha:.2,color:15186464,i:.8};a.push(c);c={l:11,alpha:.15,color:15186464,i:1.4};a.push(c);c={l:15,alpha:.11,color:15451904,i:1.6};a.push(c);c={l:6,alpha:.45,color:15579138,v:.45,i:.22};b.push(c);c={l:3,alpha:.3,color:15451904,v:.25,i:.4};b.push(c);c={l:4,alpha:.2,color:15451904,v:.25,i:.45};b.push(c);c={l:65,alpha:.17,
color:15186464,v:.25,i:.5};b.push(c);c={l:5,alpha:.45,color:15579138,v:.45,i:.88};b.push(c);c={l:140,alpha:.18,color:15579138,v:.32,i:.95};b.push(c);c={l:12,alpha:.22,color:15579138,v:.32,i:1.1};b.push(c);c={l:8,alpha:.32,color:15451904,v:.72,i:1.2};b.push(c);c={l:55,alpha:.2,color:15451904,v:.45,i:1.33};b.push(c);c={l:4,alpha:.3,color:15451904,v:.25,i:1.42};b.push(c);this.Hb.push(a);this.yb.push(b);this.Ib.push(d);a=[];b=[];d=[];c={l:16,alpha:.4,color:10933495,i:.32};a.push(c);c={l:14,alpha:.3,color:11007484,
i:.36};a.push(c);c={l:10,alpha:.3,color:4037331,i:.58};a.push(c);c={l:14,alpha:.22,color:8835068,i:.68};a.push(c);c={l:10,alpha:.27,color:11007484,i:.82};a.push(c);c={l:11,alpha:.27,color:10867450,i:1};a.push(c);c={l:9,alpha:.2,color:6158332,i:1.05};a.push(c);c={l:10,alpha:.17,color:10867450,i:1.78};a.push(c);c={l:10,alpha:.3,color:4037331,i:-.23};a.push(c);c={l:8,alpha:.45,color:8835068,v:.45,i:.175};b.push(c);c={l:7,alpha:.4,color:12574715,v:.55,i:.46};b.push(c);c={l:3,alpha:.3,color:10867450,v:.35,
i:.5};b.push(c);c={l:60,alpha:.37,color:4031699,v:.75,i:.75};b.push(c);c={l:3,alpha:.25,color:4031699,v:.25,i:.75};b.push(c);c={l:3,alpha:.2,color:6158332,v:.25,i:.9};b.push(c);c={l:7,alpha:.45,color:8835068,v:.45,i:1.3};b.push(c);c={l:32,alpha:.22,color:8835068,v:.75,i:1.62};b.push(c);c={l:9,alpha:.45,color:4031699,v:.65,i:1.6};b.push(c);c={l:8,alpha:.25,color:4031699,v:.65,i:1.83};b.push(c);c={l:7,alpha:.4,color:12574715,v:.55,i:-.18};b.push(c);this.Hb.push(a);this.yb.push(b);this.Ib.push(d);a=
[];b=[];d=[];c={l:16,alpha:.4,color:16389120,i:.32};a.push(c);c={l:26,alpha:.22,color:16389120,i:.4};a.push(c);c={l:26,alpha:.25,color:16389120,i:.65};a.push(c);c={l:18,alpha:.3,color:16389120,i:1.23};a.push(c);c={l:14,alpha:.26,color:16389120,i:1.33};a.push(c);c={l:17,alpha:.18,color:16389120,i:1.7};a.push(c);c={l:30,alpha:.16,color:16389120,i:2.15};a.push(c);c={l:100,alpha:.25,color:16389120,v:.22,i:1.45};b.push(c);c={l:7,alpha:.5,color:15628151,v:.3,i:1.5};b.push(c);c={l:3,alpha:.5,color:15628151,
v:.3,i:1.52};b.push(c);c={l:4,alpha:.5,color:16389120,v:.3,i:1.745};b.push(c);c={l:9,alpha:.22,color:16389120,v:.3,i:1.8};b.push(c);this.Hb.push(a);this.yb.push(b);this.Ib.push(d);a=[];b=[];d=[];c={l:16,alpha:.4,color:10933495,i:.32};a.push(c);c={l:14,alpha:.3,color:11007484,i:.36};a.push(c);c={l:10,alpha:.3,color:4037331,i:.58};a.push(c);c={l:14,alpha:.22,color:8835068,i:.68};a.push(c);c={l:10,alpha:.27,color:11007484,i:.82};a.push(c);c={l:11,alpha:.27,color:10867450,i:1};a.push(c);c={l:9,alpha:.2,
color:6158332,i:1.05};a.push(c);c={l:10,alpha:.17,color:10867450,i:1.78};a.push(c);c={l:10,alpha:.3,color:4037331,i:-.23};a.push(c);c={l:8,alpha:.45,color:8835068,v:.45,i:.175};b.push(c);c={l:7,alpha:.4,color:12574715,v:.55,i:.46};b.push(c);c={l:3,alpha:.3,color:10867450,v:.35,i:.5};b.push(c);c={l:60,alpha:.37,color:4031699,v:.75,i:.75};b.push(c);c={l:3,alpha:.25,color:4031699,v:.25,i:.75};b.push(c);c={l:3,alpha:.2,color:6158332,v:.25,i:.9};b.push(c);c={l:7,alpha:.45,color:8835068,v:.45,i:1.3};b.push(c);
c={l:32,alpha:.22,color:8835068,v:.75,i:1.62};b.push(c);c={l:9,alpha:.45,color:4031699,v:.65,i:1.6};b.push(c);c={l:8,alpha:.25,color:4031699,v:.65,i:1.83};b.push(c);c={l:7,alpha:.4,color:12574715,v:.55,i:-.18};b.push(c);this.Hb.push(a);this.yb.push(b);this.Ib.push(d);a=[];b=[];d=[];c={l:16,alpha:.4,color:16389120,i:.32};a.push(c);c={l:26,alpha:.22,color:16389120,i:.4};a.push(c);c={l:26,alpha:.25,color:16389120,i:.65};a.push(c);c={l:18,alpha:.3,color:16389120,i:1.23};a.push(c);c={l:14,alpha:.26,color:16389120,
i:1.33};a.push(c);c={l:17,alpha:.18,color:16389120,i:1.7};a.push(c);c={l:30,alpha:.16,color:16389120,i:2.15};a.push(c);c={l:100,alpha:.25,color:16389120,v:.22,i:1.45};b.push(c);c={l:7,alpha:.5,color:15628151,v:.3,i:1.5};b.push(c);c={l:3,alpha:.5,color:15628151,v:.3,i:1.52};b.push(c);c={l:4,alpha:.5,color:16389120,v:.3,i:1.745};b.push(c);c={l:9,alpha:.22,color:16389120,v:.3,i:1.8};b.push(c);this.Hb.push(a);this.yb.push(b);this.Ib.push(d);a=[];b=[];d=[];c={l:24,alpha:.2,color:15186464,i:.2};a.push(c);
c={l:7,alpha:.26,color:15186464,i:.35};a.push(c);c={l:23,alpha:.18,color:15186464,i:.65};a.push(c);c={l:13,alpha:.2,color:15186464,i:.8};a.push(c);c={l:11,alpha:.15,color:15186464,i:1.4};a.push(c);c={l:15,alpha:.11,color:15451904,i:1.6};a.push(c);c={l:6,alpha:.45,color:15579138,v:.45,i:.22};b.push(c);c={l:3,alpha:.3,color:15451904,v:.25,i:.4};b.push(c);c={l:4,alpha:.2,color:15451904,v:.25,i:.45};b.push(c);c={l:65,alpha:.17,color:15186464,v:.25,i:.5};b.push(c);c={l:5,alpha:.45,color:15579138,v:.45,
i:.88};b.push(c);c={l:140,alpha:.18,color:15579138,v:.32,i:.95};b.push(c);c={l:12,alpha:.22,color:15579138,v:.32,i:1.1};b.push(c);c={l:8,alpha:.32,color:15451904,v:.72,i:1.2};b.push(c);c={l:55,alpha:.2,color:15451904,v:.45,i:1.33};b.push(c);c={l:4,alpha:.3,color:15451904,v:.25,i:1.42};b.push(c);this.Hb.push(a);this.yb.push(b);this.Ib.push(d)};e.prototype.Tm=function(){if(this.Ai){var a=this.g.J,b,d,c,h=new n.ua(0,0,-100),e=this.g.Xc(),g,f;if(this.g.ma)g=this.g.eb.width,f=this.g.eb.height,this.g.M.Rf&&
(g=this.g.M.Jb.width,f=this.g.M.Jb.height);else{this.R||(this.R=this.Hc.getContext("2d"));if(this.R.width!==this.g.m.width||this.R.height!==this.g.m.height)this.R.width=this.g.m.width,this.R.height=this.g.m.height;this.R.clear?this.R.clear():this.R.clearRect(0,0,this.Hc.width,this.Hc.height);g=this.R.width;f=this.R.height}var l=Math.sqrt(g*g+f*f),k=l/800;for(d=0;d<this.sf.length;d++){var q=this.sf[d];h.Ta(0,0,-100);h.Aa(-q.j*Math.PI/180);h.Na(q.pan*Math.PI/180);h.Na(-this.g.pan.a*Math.PI/180);h.Aa(this.g.j.a*
Math.PI/180);h.nb(this.g.K.a*Math.PI/180);var p=!1;if(-.01>h.z){var u,t;t=-e/h.z;u=h.x*t;t*=h.y;Math.abs(u)<g/2+100&&Math.abs(t)<f/2+100&&(p=!0,u+=g/2,t+=f/2)}if(p){this.g.ma&&(a.blendFunc(a.SRC_ALPHA,a.DST_ALPHA),a.enable(a.BLEND),a.disable(a.DEPTH_TEST));var p=g/2,w=f/2;c=Math.sqrt((p-u)*(p-u)+(w-t)*(w-t));var r=l/2,w=g>f?g:f,p=q.Wi/100*((r-c)/r);0>p&&(p=0);if(this.g.ma){a.useProgram(this.Mb);a.bindBuffer(a.ARRAY_BUFFER,this.g.M.$a);a.vertexAttribPointer(this.Mb.ea,this.g.M.$a.yc,a.FLOAT,!1,0,0);
var v=a.getUniformLocation(this.Mb,"uCanvasDimensions");a.uniform2f(v,a.drawingBufferWidth,a.drawingBufferHeight);a.uniform2f(a.getUniformLocation(this.Mb,"uFlareCenterPosition"),a.drawingBufferWidth/g*u,f-a.drawingBufferHeight/f*t);a.uniform1f(a.getUniformLocation(this.Mb,"uBlindingValue"),p);v=a.getUniformLocation(this.Mb,"uAspectRatio");a.uniform1f(v,this.g.M.Rf?a.drawingBufferWidth/a.drawingBufferHeight:a.drawingBufferWidth/a.drawingBufferHeight/(g/f));a.drawArrays(a.TRIANGLE_STRIP,0,this.g.M.$a.xd)}else v=
this.R.createRadialGradient(u,t,1,u,t,w),v.addColorStop(0,"rgba(255, 255, 255, "+p+")"),v.addColorStop(.5,"rgba(255, 255, 255, "+.8*p+")"),v.addColorStop(1,"rgba(255, 255, 255, "+.6*p+")"),this.R.fillStyle=v,this.R.fillRect(0,0,this.R.width,this.R.height);if(0!=Number(q.type)&&!this.g.M.Rf){var p=g/2-u,w=f/2-t,z=1,A=Number(q.type)-1;c<.35*r&&(z=c/(.35*r),z*=z);c>.7*r&&(z=(r-c)/(.3*r));z*=q.alpha/100;if(0<this.Hb[A].length)for(c=0;c<this.Hb[A].length;c++){var x=this.Hb[A][c],r=x.l*k;b=x.alpha*z;0>
b&&(b=0);var y=x.color;if(8==A||9==A||10==A)y=q.color;if(this.g.ma)a.useProgram(this.oa),a.bindBuffer(a.ARRAY_BUFFER,this.re),a.vertexAttribPointer(this.oa.ea,this.re.yc,a.FLOAT,!1,0,0),v=a.getUniformLocation(this.oa,"uCanvasDimensions2"),a.uniform2f(v,a.drawingBufferWidth,a.drawingBufferHeight),a.uniform2f(a.getUniformLocation(this.oa,"uCirclePosition"),a.drawingBufferWidth/g*(u+p*x.i),a.drawingBufferWidth/g*(f-(t+w*x.i))),a.uniform2f(a.getUniformLocation(this.oa,"uCircleTexturePosition"),a.drawingBufferWidth/
g*(u+p*x.i),f-(t+w*x.i)),a.uniform1f(a.getUniformLocation(this.oa,"uCircleRadius"),r),a.uniform3f(a.getUniformLocation(this.oa,"uCircleColor"),(y>>16&255)/255,(y>>8&255)/255,(y&255)/255),a.uniform1f(a.getUniformLocation(this.oa,"uCircleAlpha"),b),a.uniform1f(a.getUniformLocation(this.oa,"uCircleSoftness"),.1),v=a.getUniformLocation(this.oa,"uAspectRatio"),a.uniform1f(v,a.drawingBufferWidth/a.drawingBufferHeight/(g/f)),a.drawArrays(a.TRIANGLE_FAN,0,this.re.xd);else{this.R.save();this.R.translate(u+
p*x.i,t+w*x.i);v=this.R.createRadialGradient(0,0,1,0,0,1.1*r);v.addColorStop(0,this.g.da(y,b));v.addColorStop(.65,this.g.da(y,.9*b));v.addColorStop(.8,this.g.da(y,.7*b));v.addColorStop(1,this.g.da(y,.2*b));this.R.beginPath();var y=2*Math.PI/6,x=Math.PI/180*35,C=!0;for(b=x;b<=x+2*Math.PI;b+=y)C?(this.R.moveTo(r*Math.sin(b),r*Math.cos(b)),C=!1):this.R.lineTo(r*Math.sin(b),r*Math.cos(b));this.R.closePath();this.R.fillStyle=v;this.R.fill();this.R.restore()}}if(0<this.yb[A].length)for(c=0;c<this.yb[A].length;c++){x=
this.yb[A][c];r=x.l*k;b=x.alpha*z;0>b&&(b=0);y=x.color;if(8==A||9==A||10==A)y=q.color;this.g.ma?(a.useProgram(this.oa),a.bindBuffer(a.ARRAY_BUFFER,this.Zc),a.vertexAttribPointer(this.oa.ea,this.Zc.yc,a.FLOAT,!1,0,0),v=a.getUniformLocation(this.oa,"uCanvasDimensions2"),a.uniform2f(v,a.drawingBufferWidth,a.drawingBufferHeight),v=a.getUniformLocation(this.oa,"uCirclePosition"),a.uniform2f(v,a.drawingBufferWidth/g*(u+p*x.i),a.drawingBufferWidth/g*(f-(t+w*x.i))),v=a.getUniformLocation(this.oa,"uCircleTexturePosition"),
a.uniform2f(v,a.drawingBufferWidth/g*(u+p*x.i),f-(t+w*x.i)),v=a.getUniformLocation(this.oa,"uCircleRadius"),a.uniform1f(v,r),a.uniform3f(a.getUniformLocation(this.oa,"uCircleColor"),(y>>16&255)/255,(y>>8&255)/255,(y&255)/255),a.uniform1f(a.getUniformLocation(this.oa,"uCircleAlpha"),b),a.uniform1f(a.getUniformLocation(this.oa,"uCircleSoftness"),x.v),v=a.getUniformLocation(this.oa,"uAspectRatio"),a.uniform1f(v,a.drawingBufferWidth/a.drawingBufferHeight/(g/f)),a.drawArrays(a.TRIANGLE_FAN,0,this.Zc.xd)):
(this.R.save(),this.R.translate(u+p*x.i,t+w*x.i),v=this.R.createRadialGradient(0,0,1,0,0,r),v.addColorStop(0,this.g.da(y,b)),v.addColorStop(1-x.v,this.g.da(y,.8*b)),v.addColorStop(1,this.g.da(y,0)),this.R.beginPath(),this.R.arc(0,0,r,0,2*Math.PI,!1),this.R.closePath(),this.R.fillStyle=v,this.R.fill(),this.R.restore())}if(0<this.Ib[A].length)for(c=0;c<this.Ib[A].length;c++)q=this.Ib[A][c],r=q.l*k,b=q.alpha*z,0>b&&(b=0),this.g.ma?(a.useProgram(this.gb),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,
this.zk),a.bindBuffer(a.ARRAY_BUFFER,this.Zc),a.vertexAttribPointer(this.gb.ea,this.Zc.yc,a.FLOAT,!1,0,0),v=a.getUniformLocation(this.gb,"uCanvasDimensions2"),a.uniform2f(v,g,f),v=a.getUniformLocation(this.gb,"uCirclePosition"),a.uniform2f(v,u+p*q.i,f-(t+w*q.i)),v=a.getUniformLocation(this.gb,"uRingTexturePosition"),a.uniform2f(v,a.drawingBufferWidth/g*(u+p*q.i),f-(t+w*q.i)),v=a.getUniformLocation(this.gb,"uCircleRadius"),a.uniform1f(v,r),a.uniform2f(a.getUniformLocation(this.gb,"uRingPosition"),
u+p*q.i,f-(t+w*q.i)),a.uniform1f(a.getUniformLocation(this.gb,"uRingRadius"),r),a.uniform1f(a.getUniformLocation(this.gb,"uRingAlpha"),b),v=a.getUniformLocation(this.gb,"uAspectRatio"),a.uniform1f(v,a.drawingBufferWidth/a.drawingBufferHeight/(g/f)),a.uniform1i(a.getUniformLocation(this.gb,"uSampler"),0),a.drawArrays(a.TRIANGLE_FAN,0,this.Zc.xd)):(this.R.save(),this.R.translate(u+p*q.i,t+w*q.i),v=this.R.createRadialGradient(0,0,0,0,0,r),v.addColorStop(0,this.g.da(16777215,0)),v.addColorStop(.88,this.g.da(0,
0)),v.addColorStop(.9,this.g.da(16654848,b)),v.addColorStop(.92,this.g.da(16776448,b)),v.addColorStop(.94,this.g.da(4849466,b)),v.addColorStop(.96,this.g.da(131071,b)),v.addColorStop(.98,this.g.da(8190,b)),v.addColorStop(1,this.g.da(0,0)),this.R.beginPath(),this.R.arc(0,0,r,0,2*Math.PI,!1),this.R.closePath(),this.R.fillStyle=v,this.R.fill(),this.R.restore())}this.g.ma&&(a.useProgram(this.g.la.D),a.disable(a.BLEND),a.enable(a.DEPTH_TEST))}}}};return e}();n.il=f})(ggP2VR||(ggP2VR={}));var O=!1;
(function(n){var f=function(){function e(a,b){this.pan={a:0,Ka:0,min:0,max:360,d:0,li:0};this.j={a:0,Ka:0,min:-90,max:90,d:0};this.K={a:0,Ka:0,min:-180,max:180,d:0};this.gc={pan:0,j:-90,K:0,f:170,fb:9};this.f={a:70,Ka:70,min:1,xf:0,max:170,fi:360,gi:270,Ae:0,d:0,mode:0,Lk:0,ej:0};this.za={K:0,pitch:0};this.m={width:10,height:10};this.ac=0;this.Fh=new n.ua;this.crossOrigin="anonymous";this.Ma=this.Ig=4;this.ad=this.Zf=this.zf=this.Gb=0;this.Y={start:{x:0,y:0},ba:{x:0,y:0},gd:{x:0,y:0},a:{x:0,y:0},
aa:{x:0,y:0}};this.X={Ya:-1,startTime:0,start:{x:0,y:0},ba:{x:0,y:0},gd:{x:0,y:0},a:{x:0,y:0},aa:{x:0,y:0}};this.jj=!0;this.G={enabled:!0,ba:{x:0,y:0},aa:{x:0,y:0},f:{active:!1,cb:0}};this.o={src:[],he:4,width:640,height:480,ed:!1,wg:!1,Od:"loop",c:HTMLVideoElement=null,Ok:!1,cc:WebGLTexture=null,Li:WebGLBuffer=null,ah:WebGLBuffer=null,Yh:WebGLBuffer=null,format:1,rg:0,kj:1};this.Td=0;this.fa=this.sa=this.va=this.V=this.Pb=this.jb=this.A=null;this.Pd="pano";this.Ph="flashcontainer";this.Gh="";this.control=
null;this.xb=[];this.xa=!1;this.jg=1;this.L=null;this.Fd=this.Re=this.jf=!1;this.Pe=0;this.Wc=.02;this.sh=0;this.th=!1;this.rh=this.bg=this.Qe=this.ge=this.Ti=0;this.Fb="";this.De=this.rc=!1;this.Jg=0;this.gg=[];this.me=[];this.Qf=this.nd=1;this.Te=1024;this.Pg=!1;this.ek=200;this.ka=0;this.Cd=5;this.Xh=this.Pk=this.dc=0;this.s={enabled:!1,timeout:5,active:!1,Of:!1,speed:.4,dh:0,Gg:0,ki:!0,Ki:!1,Ed:!1,Ui:!1,ii:!1,Ei:!1,startTime:0,fd:0,mg:!1,hg:!1,Bg:0};this.u={active:!1,fe:!1,speed:.1,pan:0,j:0,
K:0,f:70,Ge:70,Xj:0,Zj:0,Yj:0,Wj:0,fb:0,Bf:0,$h:0,jh:!1,ji:!1,Si:0,Ri:0};this.Oa=null;this.Me={};this.w={mode:1,qf:-1,na:0,ab:0,Fc:.05,Ob:255,Nb:1,Lb:255,Kb:.3,ue:!0,Gi:{enabled:!0,width:180,height:20,Hi:0,Fi:1,background:!0,Lb:16777215,Kb:1,Ob:0,Nb:1,vh:3,wh:1,nh:!0},sc:[],vb:[],zc:[],Wg:[]};this.ta=null;this.N=[];this.S=[];this.H=[];this.Sa=[];this.ce=[];this.Ga=[];this.Da=[];this.W=1;this.la=this.qd=this.le=null;this.Ze={};this.addListener=function(a,b){(this.Ze[a]=this.Ze[a]||[]).push(b)};this.Rk=
function(a,b){var h=this.Ze[a],e,g;if(h)for(g=0,e=h.length;g<e;g++)h[g].apply(null,b)};this.removeEventListener=function(a,b){var h=this.Ze[a];if(h){var e,g;g=0;for(e=h.length;g<e;g++)if(h[g]===b){1===e?delete this.Ze[a]:h.splice(g,1);break}}};this.h=new n.ml;this.Sm={target:0,current:0,Fc:.01,Nl:2,Jh:0,ig:!1,yl:!1};this.margin={left:0,top:0,right:0,bottom:0};this.C={tf:!1,di:!1,rb:!1,Cg:!1,vd:!0,Mj:!1,Jk:1,Ih:!0,Xe:!0,fg:!1,kf:!1,sensitivity:8};this.wf=[];this.Jc=!0;this.ra={x:0,y:0};this.Wf=this.ob=
this.Vf=this.Ac=this.ma=!1;this.kh=this.$k=!0;this.Wh=!1;this.qe=!0;this.Vh=!1;this.Ia=this.pd="";this.Lc="transition";this.Ra="transform";this.Yc="perspective";this.hj="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYBgeACDAAADIAAE3iTbkAAAAAElFTkSuQmCC";this.eb={width:0,height:0};this.oj=new n.ua;this.nj=new n.ua;this.pj=new n.ua;this.qj=new n.ua;this.mj=new n.ua;this.nf=!1;this.Vj=this.Qb="";this.Mi=[];this.gh=[];
this.xg=this.Qj=this.ug=this.Rj=this.we=this.Oj=this.xi=this.wd=this.Pj=!1;this.lh=!0;this.Nj=!1;this.Ij=[];this.Bb={enabled:!1,speed:1,$d:!1,Nh:!0};this.jk=!1;this.bb=new n.nl;this.Ji=!1;this.We=function(a,b){if(0==a.length)return a;var h,e,g,f,l,k,q,p;p=[];h=b.Lg(a[0])-0;for(f=0;f<a.length;f++){k=f;q=f+1;q==a.length&&(q=0);e=b.Lg(a[q])-0;if(0<=h&&0<=e)p.push(a[k]);else if(0<=h||0<=e)g=e/(e-h),0>g&&(g=0),1<g&&(g=1),l=new n.ua,l.cd(a[k],a[q],g),0>h||p.push(a[k]),p.push(l);h=e}return p};this.Bi=0;
this.Ag=-1;this.cf=function(a){return a?a.pageX||a.pageY?{x:a.pageX,y:a.pageY}:a.clientX||a.clientY?{x:a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,y:a.clientY+document.body.scrollTop+document.documentElement.scrollTop}:a.touches&&a.touches[0]?{x:a.touches[0].pageX,y:a.touches[0].pageY}:{x:0,y:0}:{x:0,y:0}};this.Fg=1;this.Rl=this.ng=this.Uj=this.Kh=this.ui=this.Mg=0;this.pe=!0;this.lb=new n.zg(this);this.lb.ue=!1;this.gj();this.Ee(this.lb);this.checkLoaded=this.xb;this.isLoaded=
!1;b&&b.hasOwnProperty("useFlash")&&b.useFlash&&(this.ob=!0,this.ma=this.Ac=!1,b.hasOwnProperty("flashPlayerId")?this.Pd=b.flashPlayerId:this.Pd="pano",b.hasOwnProperty("flashContainerId")?this.Ph=b.flashContainerId:this.Ph=a+"flash");this.pa();this.ob||(this.ya=new n.il(this));this.bj(a);this.xl();this.userdata=this.Me=this.kg();this.emptyHotspot=this.lb;this.mouse=this.ra;this.jn();this.M=new n.kl(this);this.Ea=new n.ll(this);this.la=new n.rl(this)}e.prototype.ld=function(a,b,d){if(0!=a&&4!=a&&
12!=a&&9!=a)this.Sc("Unsupported projection type: "+a);else if(b&&0!=b&&4!=b&&12!=b&&9!=b)this.Sc("Unsupported projection2 type: "+a);else if(b=b?b:0,a==b&&(b=0),this.zf=d?Number(d):1,this.Ma!=a||this.Gb!=b)this.Ma=a,this.Gb=b,this.la.lf()};e.prototype.La=function(){return 0==this.Ma?4:this.Ma};e.prototype.Fl=function(a,b){a=Number(a);if(0!=a&&4!=a&&12!=a&&9!=a)this.Sc("Unsupported projection type: "+a);else{if(this.La()!=a)if(0===b)this.Ma=a,this.Gb=0,this.u.fb=0,this.la.lf();else{this.u.fb=a;this.u.speed=
0<b?Number(b):1;this.u.pan=this.pan.a;this.u.j=this.j.a;var d=this.se(a),d=Math.min(this.vj(d,a),d);this.u.f=Math.min(d,this.f.a);this.u.K=this.K.a;this.u.jh=!1;this.u.active=!0}this.update()}};e.prototype.Zi=function(a,b){if(0!=a&&4!=a&&12!=a&&9!=a)this.Sc("Unsupported projection type: "+a);else if(this.La()!=a){var d={};d.pan=this.pan.a;d.tilt=this.j.a;d.fov=this.f.a;d.projection=a;d.timingFunction=3;d.speed=b;var c=this.se(a);d.fov=Math.min(c,d.fov);this.Eg(d)}};e.prototype.gj=function(){var a;
this.Pj=navigator.userAgent.match(/(MSIE)/g)?!0:!1;if(this.wd=navigator.userAgent.match(/(Safari)/g)?!0:!1)a=navigator.userAgent.indexOf("Safari"),this.kd=navigator.userAgent.substring(a+7),a=navigator.userAgent.indexOf("Version"),-1!=a&&(this.kd=navigator.userAgent.substring(a+8)),this.kd=this.kd.substring(0,this.kd.indexOf(" ")),this.kd=this.kd.substring(0,this.kd.indexOf(".")),this.xi=!0;if(this.Oj=navigator.userAgent.match(/(Chrome)/g)?!0:!1)this.wd=!1;this.we=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?
!0:!1;this.Rj=navigator.userAgent.match(/(iPhone|iPod)/g)?!0:!1;this.ug=navigator.userAgent.match(/(android)/i)?!0:!1;this.Qj=navigator.userAgent.match(/(IEMobile)/i)?!0:!1;this.xg=this.we||this.ug||this.Qj;/iP(hone|od|ad)/.test(navigator.platform)&&(a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),this.Ij=[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||"0",10)]);a=["Webkit","Moz","O","ms","Ms"];var b;this.Ia="";this.Lc="transition";this.Ra="transform";this.Yc="perspective";for(b=0;b<a.length;b++)"undefined"!==
typeof document.documentElement.style[a[b]+"Transform"]&&(this.Ia="-"+a[b].toLowerCase()+"-",this.Lc=a[b]+"Transition",this.Ra=a[b]+"Transform",this.Yc=a[b]+"Perspective");this.Wh=G();this.ma=N();this.Ac=this.Wh;this.ma&&(this.Ac=!1);this.rc=!0;this.De=!1;if(this.we||this.ug)this.Ck(80),this.Cd=2;this.Sc("Pano2VR player - Prefix:"+this.Ia+", "+(this.Wh?"CSS 3D available":"CSS 3D not available")+", "+(this.ma?"WebGL available":"WebGL not available"));try{window.AudioContext=window.AudioContext||window.webkitAudioContext,
this.Ca=new AudioContext}catch(d){this.Ca=null}!this.wd||this.xi&&9<=Number(this.kd)||(this.Ca=null);this.lh=this.Rj?this.wd&&this.xi&&10<=Number(this.kd)?!0:!1:!0};e.prototype.T=function(a){if(O){var b=document.getElementById("debug");b&&(b.innerHTML=a.toString()+"<br />");window.console&&window.console.log(a)}};e.prototype.Sc=function(a){var b=document.getElementById("debug");b&&(b.innerHTML=a+"<br />");window.console&&window.console.log(a)};e.prototype.jn=function(){this.requestAnimationFrame=
function(){var a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;return a?a:function(a){window.setTimeout(a,10)}}()};e.prototype.Ck=function(a){this.ek=a};e.prototype.on=function(a){this.crossOrigin=a};e.prototype.qn=function(a){this.ve=a};e.prototype.lm=function(){return this.Jg};e.prototype.nn=function(a){this.pd=a};e.prototype.Vl=function(){return this.pd};e.prototype.am=function(){return this.xg};
e.prototype.Zl=function(){return this.s.active};e.prototype.sn=function(a){this.xg=!!a};e.prototype.pg=function(){return this.isLoaded};e.prototype.Xc=function(){return 1*this.m.height/(2*Math.tan(Math.PI/180*(this.Db()/2)))};e.prototype.Ek=function(a,b){this.isFullscreen&&(a=window.innerWidth,b=window.innerHeight);var d=a-this.margin.left-this.margin.right,c=b-this.margin.top-this.margin.bottom;if(!(10>d||10>c)){var h=window.devicePixelRatio||1;this.Pg&&(h=1);this.A.style.width=d+"px";this.A.style.height=
c+"px";this.A.style.left=this.margin.left+"px";this.A.style.top=this.margin.top+"px";if(this.ma)try{this.jb&&(this.jb.style.position="absolute",this.jb.style.display="inline",this.jb.style.width=d+"px",this.jb.style.height=c+"px",this.jb.width=d*h,this.jb.height=c*h),this.J&&(this.eb.width=d*h,this.eb.height=c*h,this.J.viewport(0,0,this.J.drawingBufferWidth,this.J.drawingBufferHeight))}catch(e){alert(e)}this.Pb&&(this.Pb.style.width=a+"px",this.Pb.style.height=b+"px",this.Pb.width=a,this.Pb.height=
b);this.va&&(this.va.style.width=a+"px",this.va.style.height=b+"px",this.sa.style.width=a+"px",this.sa.style.height=b+"px",this.sa.width=a,this.sa.height=b,this.sa.style.left=this.margin.left+"px",this.sa.style.top=this.margin.top+"px",this.L&&this.L!=this.va&&(this.L.style.width=a+"px",this.L.style.height=b+"px"));this.ya&&(d=this.ya.Hc,d.style.width=a+"px",d.style.height=b+"px",d.width=a,d.height=b,d.style.left=this.margin.left+"px",d.style.top=this.margin.top+"px");this.jf&&(this.xa=!0);d=this.A.offsetWidth;
c=this.A.offsetHeight;if(this.m.width!=d||this.m.height!=c)this.m.width=d,this.m.height=c;this.oo();this.L&&this.L.ggUpdateSize&&this.L.ggUpdateSize(a,b)}};e.prototype.ee=function(){this.Ji=!0};e.prototype.od=function(){this.Ek(this.le.offsetWidth,this.le.offsetHeight)};e.prototype.xm=function(){var a={width:0,height:0};a.width=this.m.width;a.height=this.m.height;return a};e.prototype.Qd=function(){var a={x:0,y:0},b=this.A;if(b.offsetParent){do a.x+=b.offsetLeft,a.y+=b.offsetTop,b=b.offsetParent;
while(b)}return a};e.prototype.En=function(a){this.Oa=a};e.prototype.un=function(a,b,d,c){this.margin.left=a;this.margin.top=b;this.margin.right=d;this.margin.bottom=c;this.Oa=this.skinObj;this.ee()};e.prototype.Hl=function(a){0==a&&(this.C.vd=!1);1==a&&(this.C.vd=!0);2==a&&(this.C.vd=this.C.vd?!1:!0)};e.prototype.vm=function(){return 1==this.C.vd?1:0};e.prototype.Yi=function(a,b){this.w.mode=1==b&&0<this.w.mode?0:Math.round(a);this.update();this.fa&&(this.fa.changePolygonMode(a,b),this.fa.update())};
e.prototype.Gk=function(a){var b=this.w.sc.indexOf(a);-1==b?(this.w.sc.push(a),this.w.vb.push(0),this.w.zc.push(1)):this.w.zc[b]=1;this.update()};e.prototype.Gj=function(a){var b=this.w.sc.indexOf(a);-1!=b&&(this.w.zc[b]=0,this.w.Wg.push(a),this.update())};e.prototype.Yn=function(a){var b=this.w.sc.indexOf(a);-1==b||-1!=b&&0==this.w.zc[b]?this.Gk(a):this.Gj(a);this.update()};e.prototype.El=function(a,b,d,c,h){for(var e=0;e<this.N.length;e++){var g=this.N[e];"poly"!=g.type||g.id!=a&&""!=a||(g.Lb=b,
g.Kb=d,g.Ob=c,g.Nb=h)}""==a&&(this.w.Lb=b,this.w.Kb=d,this.w.Ob=c,this.w.Nb=h);this.update()};e.prototype.Cl=function(a){this.ya&&(this.ya.Ai=0==a?!0:1==a?!1:!this.ya.Ai,this.update())};e.prototype.nm=function(){return this.w.mode};e.prototype.Il=function(){};e.prototype.wm=function(){return 0};e.prototype.Jj=function(a,b,d){a=Math.atan2(a+1,d);var c=Math.atan2(b+1,d);b=Math.sin(a);d=Math.sin(c);a=Math.cos(a);c=Math.cos(c);this.oj.Ta(0,0,-1);this.nj.Ta(a,0,-b);this.pj.Ta(-a,0,-b);this.qj.Ta(0,c,-d);
this.mj.Ta(0,-c,-d)};e.prototype.Bh=function(a){a=this.We(a,this.oj);a=this.We(a,this.nj);a=this.We(a,this.pj);a=this.We(a,this.qj);return a=this.We(a,this.mj)};e.prototype.Tk=function(a){if(!this.rc&&this.Gm!=a){this.Gm=a;var b;b=this.margin.left+this.m.width/2+"px ";b+=this.margin.top+this.m.height/2+"px ";this.va.style[this.Yc]=a+"px";this.va.style[this.Yc+"Origin"]=b;this.A.style[this.Yc]=a+"px";this.A.style[this.Yc+"Origin"]=b}};e.prototype.Ln=function(){return this.M.Je||this.M.Dd||this.ma&&
(4!=this.Ma||0!=this.Gb)?!1:!0};e.prototype.Tf=function(){var a,b=new n.ua(0,0,-100),d=this.Xc(),c,h,e;h=100/this.f.a;e=this.h.width/this.h.height;c=this.m.height*h*e;h*=this.m.height;for(var g=this.Ln(),f=0;f<this.N.length;f++){var l=this.N[f],k,q;"point"==l.type&&(q=!1,2==this.ac?(a=(this.pan.a-l.pan)/100/e*c,k=(this.j.a-l.j)/100*h,Math.abs(a)<this.m.width/2+500&&Math.abs(k)<this.m.height/2+500&&(q=!0)):(b.Ta(0,0,-100),b.Aa(-l.j*Math.PI/180),b.Na(l.pan*Math.PI/180),b.Na(-this.pan.a*Math.PI/180),
b.Aa(this.j.a*Math.PI/180),b.nb(this.K.a*Math.PI/180),.01>b.z?(k=-d/b.z,a=b.x*k,k*=b.y,Math.abs(a)<this.m.width/2+500&&Math.abs(k)<this.m.height/2+500&&(q=!0)):k=a=0),l.bc=a+this.m.width/2,l.tb=k+this.m.height/2,l.c&&l.c.__div&&("none"!=l.c.__div.style[this.Lc]&&(l.c.__div.style[this.Lc]="none"),l.c.ggUse3d?(this.rc||this.Tk(d),l.c.__div.style.width="1px",l.c.__div.style.height="1px",a="",this.rc&&(a+="perspective("+d+"px) "),a+="translate3d(0px,0px,"+d+"px) ",a+="rotateZ("+this.K.a.toFixed(10)+"deg) ",
a+="rotateX("+this.j.a.toFixed(10)+"deg) ",a+="rotateY("+(-this.pan.a).toFixed(10)+"deg) ",a+="rotateY("+l.pan.toFixed(10)+"deg) ",a+="rotateX("+(-l.j).toFixed(10)+"deg) ",a+="translate3d(0px,0px,"+(-1*l.c.gg3dDistance).toFixed(10)+"px) ",l.c.__div.style[this.Ra+"Origin"]="0% 0%",l.c.__div.style[this.Ra]=a,l.c.__div.style.left=this.margin.left+this.m.width/2+"px",l.c.__div.style.top=this.margin.top+this.m.height/2+"px"):q&&g?(l.c.__div.style.left=this.margin.left+a+this.m.width/2+"px",l.c.__div.style.top=
this.margin.top+k+this.m.height/2+"px"):(l.c.__div.style.left="-1000px",l.c.__div.style.top="-1000px")));if("poly"==l.type){var p=[];if(2==this.ac)for(l.zd=[],q=0;q<l.Xf.length;q++)k=l.Xf[q],a=(this.pan.a-k.pan)/100/e*c,k=(this.j.a-k.j)/100*h,a+=this.margin.left+this.m.width/2,k+=this.margin.top+this.m.height/2,l.zd.push({bc:a,tb:k});else{for(q=0;q<l.Xf.length;q++)k=l.Xf[q],b.Ta(0,0,-100),b.Aa(-k.j*Math.PI/180),b.Na(k.pan*Math.PI/180),b.Na(-this.pan.a*Math.PI/180),b.Aa(this.j.a*Math.PI/180),b.nb(this.K.a*
Math.PI/180),p.push(b.clone());p=this.Bh(p);if(0<p.length)for(q=0;q<p.length;q++)b=p[q],.1>b.z?(k=-d/b.z,a=this.m.width/2+b.x*k,k=this.m.height/2+b.y*k):k=a=0,b.bc=a,b.tb=k;l.zd=p}}}};e.prototype.Wl=function(){for(var a=[],b=0;b<this.N.length;b++){var d=this.N[b];"point"==d.type&&d.c&&d.c.__div&&a.push(d.c.__div)}return a};e.prototype.da=function(a,b){a=Number(a);isNaN(b)&&(b=0);0>b&&(b=0);1<b&&(b=1);return"rgba("+(a>>16&255)+","+(a>>8&255)+","+(a&255)+","+b+")"};e.prototype.Um=function(){var a,b;
if(this.sa&&(this.w.qf!=this.w.mode&&(this.w.qf=this.w.mode,this.sa.style.visibility=0<this.w.mode?"inherit":"hidden"),0<=this.w.mode)){this.$||(this.$=this.sa.getContext("2d"));if(this.$.width!=this.m.width||this.$.height!=this.m.height)this.$.width=this.m.width,this.$.height=this.m.height;this.$.clear?this.$.clear():this.$.clearRect(0,0,this.sa.width,this.sa.height);var d=1;0==this.w.mode&&(d=0);3==this.w.mode&&(d=this.w.na);for(a=0;a<this.N.length;a++){b=this.N[a];var c=d;if("poly"==b.type){var h=
b.zd;2==this.w.mode&&(c=b.na);var e=this.w.sc.indexOf(b.id);-1!=e&&(c=this.w.vb[e]);this.$.fillStyle=this.da(b.Lb,b.Kb*c);this.$.strokeStyle=this.da(b.Ob,b.Nb*c);if(0<h.length){this.$.beginPath();for(b=0;b<h.length;b++)c=h[b],0==b?this.$.moveTo(c.bc,c.tb):this.$.lineTo(c.bc,c.tb);this.$.closePath();this.$.stroke();this.$.fill()}}}}};e.prototype.Hj=function(a,b,d){var c,h,e=!1;c=0;for(h=a.length-1;c<a.length;h=c++){var g=a[c];h=a[h];g.tb>d!=h.tb>d&&b<(h.bc-g.bc)*(d-g.tb)/(h.tb-g.tb)+g.bc&&(e=!e)}return e};
e.prototype.Ah=function(a,b){var d=-1;if(0<=this.w.mode&&this.Cm())for(var c=0;c<this.N.length;c++){var h=this.N[c];"poly"==h.type&&h.zd&&0<h.zd.length&&this.Hj(h.zd,a,b)&&(d=c,h.bc=a,h.tb=b)}return 0<=d?this.N[d]:!1};e.prototype.Cm=function(){return 4==this.La()&&0==this.Gb};e.prototype.Db=function(){var a=0,b=this.La(),d=this.m;switch(this.f.mode){case 0:a=this.f.a/2;break;case 1:a=4==b?180*Math.atan(d.height/d.width*Math.tan(this.f.a/2*Math.PI/180))/Math.PI:d.height/d.width*this.f.a/2;break;case 2:a=
Math.sqrt(d.width*d.width+d.height*d.height);a=4==b?180*Math.atan(d.height/a*Math.tan(this.f.a/2*Math.PI/180))/Math.PI:d.height/a*this.f.a/2;break;case 3:a=4*d.height/3>d.width?this.f.a/2:4==b?180*Math.atan(4*d.height/(3*d.width)*Math.tan(this.f.a/2*Math.PI/180))/Math.PI:4*d.height/(3*d.width)*(this.f.a/2)}return 2*a};e.prototype.vj=function(a,b){a||(a=this.Db());b||(b=this.La());return 4==b?180*Math.atan(this.Gd()*Math.tan(a/2*Math.PI/180))/Math.PI:a*this.Gd()};e.prototype.Gd=function(){return this.m.width/
this.m.height};e.prototype.Jf=function(a){a/=2;var b,d=this.La();switch(this.f.mode){case 0:this.f.a=2*a;break;case 1:a=4==d?180*Math.atan(this.m.width/this.m.height*Math.tan(a*Math.PI/180))/Math.PI:this.m.width/this.m.height*a;this.f.a=2*a;break;case 2:b=Math.sqrt(this.m.width*this.m.width+this.m.height*this.m.height);a=4==d?180*Math.atan(b/this.m.height*Math.tan(a*Math.PI/180))/Math.PI:b/this.m.height*a;this.f.a=2*a;break;case 3:4*this.m.height/3>this.m.width||(b=3*this.m.width/(4*this.m.height),
a=4==d?180*Math.atan(b*Math.tan(a*Math.PI/180))/Math.PI:b*a),this.f.a=2*a}};e.prototype.kb=function(){var a,b,d=this.m.width/this.m.height;if(2==this.ac){0<this.f.xf&&(a=this.nd,this.h.O&&0<this.h.O.length&&(a=this.h.O[0].height),this.f.min=100*this.m.height/(a*this.f.xf));b=this.f.a/2;a=d*b;var c=50*this.h.width/(.01+this.h.height);this.f.a<this.f.min&&(this.f.a=this.f.min);this.f.a>this.f.max&&(this.f.a=this.f.max);100<this.f.a&&(this.f.a=100);this.f.a>2*c/d&&(this.f.a=2*c/d);this.f.a>this.j.max-
this.j.min&&(this.f.a=this.j.max-this.j.min);this.f.a>this.pan.max-this.pan.min&&(this.f.a=this.pan.max-this.pan.min);50<this.j.a+b&&(this.j.a=50-b);-50>this.j.a-b&&(this.j.a=-50+b);this.pan.a+a>c&&(this.pan.a=c-a,this.s.active&&(this.s.speed=-this.s.speed,this.pan.d=0));this.pan.a-a<-c&&(this.pan.a=-c+a,this.s.active&&(this.s.speed=-this.s.speed,this.pan.d=0));this.j.a+b>this.j.max&&(this.j.a=this.j.max-b);this.j.a-b<this.j.min&&(this.j.a=this.j.min+b)}else{0<this.f.xf&&(a=this.nd,this.h.O&&0<this.h.O.length&&
(a=this.h.O[0].height),this.f.min=360*Math.atan2(this.m.height/2,a/2*this.f.xf)/Math.PI);this.f.a<this.f.min&&(this.f.a=this.f.min);var c=this.f.max,h=179;b=this.Db()/2;a=d*b;4==this.La()?a=180*Math.atan(d*Math.tan(b*Math.PI/180))/Math.PI:9==this.La()?(c=this.f.gi,h=355):12==this.La()&&(c=this.f.fi,h=360);this.f.a>c&&(this.f.a=c);12==this.La()&&(2*a>h&&(this.f.a=h/d),b=this.Db()/2,2*b>h&&(this.f.a=h),b=this.Db()/2,a=d*b);2*b>this.j.max-this.j.min&&180>this.j.max-this.j.min&&(b=(this.j.max-this.j.min)/
2,this.Jf(2*b));90>this.j.max?this.j.a+b>this.j.max&&(this.j.a=this.j.max-b):this.j.a>this.j.max&&(this.j.a=this.j.max);-90<this.j.min?this.j.a-b<this.j.min&&(this.j.a=this.j.min+b):this.j.a<this.j.min&&(this.j.a=this.j.min);d=this.pan.max-this.pan.min;if(359.99>d){var c=90,h=Math.tan(b*Math.PI/180),e=Math.tan((Math.abs(this.j.a)+b)*Math.PI/180),e=Math.sqrt(e*e+1)/Math.sqrt(h*h+1);b=180*Math.atan(e*Math.tan(a*Math.PI/180))/Math.PI;2*b>d&&(e=Math.tan(d*Math.PI/360)/Math.tan(a*Math.PI/180),d=e*Math.sqrt(h*
h+1),e=Math.sqrt(d*d-1),c=180/Math.PI*Math.atan(e));this.pan.a+b>this.pan.max&&(this.pan.a=this.pan.max-b,this.s.active&&(this.s.speed=-this.s.speed,this.pan.d=0));this.pan.a-b<this.pan.min&&(this.pan.a=this.pan.min+b,this.s.active&&(this.s.speed=-this.s.speed,this.pan.d=0));this.j.a+a>c&&(this.j.a=c-a);this.j.a-a<-c&&(this.j.a=-c+a)}}};e.prototype.update=function(a){void 0===a&&(a=0);this.xa=!0;a&&(this.jg=a)};e.prototype.bm=function(){return this.fa?!!this.fa.isTileLoading:0<this.ka||0<this.dc||
0<this.la.ka||0<this.la.dc};e.prototype.Uf=function(){var a=Date.now(),b;this.ob?this.fa&&(this.fo(),2===this.ac?(this.kb(),this.kb(),this.Tf()):0===this.ac&&(b=this.Xc(),this.Jj(this.m.width/2,this.m.height/2,b),this.Tf())):(this.kb(),2===this.ac?(this.kb(),this.Tf(),this.ko()):0===this.ac&&(!this.ma||4==this.Ma&&0==this.Gb?(b=this.Xc(),this.Jj(this.m.width/2,this.m.height/2,b),this.Tf(),this.Wf?this.la.no():this.$k&&this.Zk(),this.Uk(),this.ma?(this.o.ed?14==this.o.format?this.la.mo():this.la.dl():
0<this.h.O.length?this.la.to():this.la.vo(),this.la.Vm()):(this.Ac?0<this.h.O.length?this.jo():this.io():this.Vf&&this.eo(),this.Um()),this.ya&&this.ya.Tm()):(this.la.dl(),this.Tf(),this.Bm())));b=Date.now();50<b-a?(this.T("Time between frames: "+(b-a)),this.Pg||(2<this.Bi?(this.Pg=!0,this.T("disabling HighDPI rendering"),this.od()):this.Bi++)):this.Bi=0;this.jf&&this.h.yk++};e.prototype.io=function(){this.kb();var a=!1;if(this.m.width!=this.A.offsetWidth||this.m.height!=this.A.offsetHeight)this.m.width=
this.A.offsetWidth,this.m.height=this.A.offsetHeight,this.A.style[this.Ra+"OriginX"]=this.m.width/2+"px",this.A.style[this.Ra+"OriginY"]=this.m.height/2+"px",a=!0;var b=Math.round(this.Xc());this.rf==b&&!a||this.rc||(this.rf=b,this.A.style[this.Yc]=b+"px");this.bb.Kl(this.pan.a,this.j.a,this.K.a,this.za);for(a=0;6>a;a++){var d,c;if(d=this.bb.Xa[a])c="",this.rc?(c+="translate3d("+this.m.width/2+"px,"+this.m.height/2+"px,0px) ",c+="perspective("+b+"px) ",c+="translate3d(0px,0px,"+b+"px) "):c+="translate3d("+
this.m.width/2+"px,"+this.m.height/2+"px,"+b+"px) ",c+="rotateZ("+Number(this.K.a).toFixed(10)+"deg) ",c+="rotateX("+Number(this.j.a).toFixed(10)+"deg) ",c+="rotateY("+Number(-this.pan.a).toFixed(10)+"deg) ",d.Dj&&(c+=d.Dj,d.mc||(c="translate3d(-10px,-10px,0px) scale(0.001,0.001)"),d.I.style[this.Ra]=c)}};e.prototype.eo=function(){this.kb();var a;this.Pb&&(a=this.Pb.getContext("2d"));if(this.m.width!==this.A.offsetWidth||this.m.height!==this.A.offsetHeight)this.m.width=this.A.offsetWidth,this.m.height=
this.A.offsetHeight;if(a){var b=a.canvas.width/2,d=a.canvas.height/2,c=a.createRadialGradient(b,d,5,b,d,Math.max(b,d));c.addColorStop(0,"#333");c.addColorStop(1,"#fff");a.rect(0,0,a.canvas.width,a.canvas.height);a.fillStyle=c;a.fill();a.fillStyle="#f00";a.font="20px Helvetica";a.textAlign="center";a.fillText("Pan: "+this.pan.a.toFixed(1),b,d-60);a.fillText("Tilt: "+this.j.a.toFixed(1),b,d-30);a.fillText("Fov: "+this.f.a.toFixed(1),b,d+0);a.fillText("Node: "+this.uj(),b,d+30);a.fillText("Title: "+
this.Me.title,b,d+60)}};e.prototype.fo=function(){this.kb();if(this.m.width!==this.A.offsetWidth||this.m.height!==this.A.offsetHeight)this.m.width=this.A.offsetWidth,this.m.height=this.A.offsetHeight;this.fa&&this.fa.setPan&&(this.fa.setPan(this.pan.a),this.fa.setTilt(this.j.a),this.fa.setFov(this.f.a))};e.prototype.ko=function(){this.sa.style.visibility="inherit";this.$||(this.$=this.sa.getContext("2d"));if(this.$.width!=this.m.width||this.$.height!=this.m.height)this.$.width=this.m.width,this.$.height=
this.m.height;this.$.clear?this.$.clear():this.$.clearRect(0,0,this.sa.width,this.sa.height);this.dc=0;this.kb();var a,b,d;b=100/this.f.a;d=this.h.width/this.h.height;var c=this.m.height*b*d;b*=this.m.height;a=(this.pan.a/100/d-.5)*c+this.m.width/2;for(var e=(this.j.a/100-.5)*b+this.m.height/2,f,g,m,l,k=0;this.h.O.length>=k+2&&this.h.O[k+1].width>c;)k++;var q,p;p=[];for(q=this.h.O.length-1;q>=k;){d=this.h.O[q];var u;if(d.cache)u={Cb:0,hc:0},u.nc=d.P-1,u.oc=d.ja-1;else{u={};var t=-e/b*(d.height/this.h.F);
f=(-a+this.m.width)/c*(d.width/this.h.F);g=(-e+this.m.height)/b*(d.height/this.h.F);u.Cb=Math.min(Math.max(0,Math.floor(-a/c*(d.width/this.h.F))),d.P-1);u.hc=Math.min(Math.max(0,Math.floor(t)),d.ja-1);u.nc=Math.min(Math.max(0,Math.floor(f)),d.P-1);u.oc=Math.min(Math.max(0,Math.floor(g)),d.ja-1)}p[q]=u;var w=!0;for(g=u.hc;g<=u.oc;g++)for(f=u.Cb;f<=u.nc;f++)l=f+g*d.P,t=d.Z[l],t||(t=new n.Sd,d.Z[l]=t),this.ka<this.Cd?t.h||(this.Xh++,t.h=new Image,t.h.onload=this.Vn(),t.h.onerror=this.bh(t),t.h.onabort=
this.bh(t),t.h.crossOrigin=this.crossOrigin,t.h.setAttribute("src",this.He(0,q,f,g)),d.cache&&this.xb.push(t.h),0==this.ka&&this.L&&this.L.ggReLoadedLevels&&this.L.ggReLoadedLevels(),this.ka++,this.xa=!0):this.dc++,t.h&&t.h.complete||(w=!1),t.visible=!0;u.$j=w;q--}for(q=this.h.O.length-1;q>=k;){d=this.h.O[q];if(p[q]&&0<=p[q].Cb)for(u=p[q],g=u.hc;g<=u.oc;g++)for(f=u.Cb;f<=u.nc;f++)l=f+g*d.P,(t=d.Z[l])||(t=d.Z[l]=new n.Sd),t.h&&t.h.complete&&this.$.drawImage(t.h,a+(-this.h.Ua+this.h.F*f)*c/d.width,
e+(-this.h.Ua+this.h.F*g)*b/d.height,t.h.width*c/d.width,t.h.height*b/d.height),t.visible=!0;q--}for(c=0;c<this.h.O.length;c++)if(d=this.h.O[c],!d.cache)for(m in d.Z)d.Z.hasOwnProperty(m)&&(t=d.Z[m],t.visible||(t.h=null,delete d.Z[m]));if(0<=this.w.mode)for(c=1,0==this.w.mode&&(c=0),3==this.w.mode&&(c=this.w.na),m=0;m<this.N.length;m++)if(d=this.N[m],a=c,"poly"==d.type&&(b=d.zd,2==this.w.mode&&(a=d.na),e=this.w.sc.indexOf(d.id),-1!=e&&(a=this.w.vb[e]),0<b.length)){this.$.fillStyle=this.da(d.Lb,d.Kb*
a);this.$.strokeStyle=this.da(d.Ob,d.Nb*a);this.$.beginPath();for(d=0;d<b.length;d++)a=b[d],0==d?this.$.moveTo(a.bc,a.tb):this.$.lineTo(a.bc,a.tb);this.$.closePath();this.$.stroke();this.$.fill()}this.Jc=!1};e.prototype.Un=function(a){var b=this;return function(){b.xa=!0;b.Jc=!0;a.loaded=!0;a.h&&!a.I&&b.A.appendChild(a.h);b.ka&&b.ka--;0==b.ka&&b.L&&b.L.ggLoadedLevels&&b.L.ggLoadedLevels();a.h&&a.Ja&&(a.Ja.drawImage(a.h,0,0),a.h=null)}};e.prototype.Vn=function(){var a=this;return function(){a.xa=!0;
a.Jc=!0;a.ka&&a.ka--;0==a.ka&&a.L&&a.L.ggLoadedLevels&&a.L.ggLoadedLevels()}};e.prototype.bh=function(a){var b=this;return function(){b.xa=!0;b.Jc=!0;b.ka&&b.ka--;0==b.ka&&b.L&&b.L.ggLoadedLevels&&b.L.ggLoadedLevels();a.h=null}};e.prototype.Cj=function(a,b,d){d.Cb=a.width/this.h.F*b.$e;d.hc=a.height/this.h.F*b.af;d.nc=a.width/this.h.F*b.uf;d.oc=a.height/this.h.F*b.vf;d.Cb=Math.min(Math.max(0,Math.floor(d.Cb)),a.P-1);d.hc=Math.min(Math.max(0,Math.floor(d.hc)),a.ja-1);d.nc=Math.min(Math.max(0,Math.floor(d.nc)),
a.P-1);d.oc=Math.min(Math.max(0,Math.floor(d.oc)),a.ja-1)};e.prototype.wn=function(a){a=Math.round(a);this.rc=0<(a&1);this.De=0<(a&2);this.kh=0<(a&4);this.Pg=0<(a&8);4096<=a&&(this.Ac=0<(a&4096),this.ma=0<(a&8192),this.Vf=0<(a&32768))};e.prototype.qm=function(){var a=0;this.rc&&(a|=1);this.De&&(a|=2);this.kh&&(a|=4);this.Ac&&(a|=4096);this.ma&&(a|=8192);this.Vf&&(a|=32768);return a};e.prototype.Wk=function(){if(!(6>this.bb.Xa.length))for(var a=0;6>a;a++){var b;b=this.bb.Xa[a];var d;d=[];d.push(new n.ua(-1,
-1,-1,0,0));d.push(new n.ua(1,-1,-1,1,0));d.push(new n.ua(1,1,-1,1,1));d.push(new n.ua(-1,1,-1,0,1));for(var c=0;4>c;c++)4>a?d[c].Na(-Math.PI/2*a):d[c].Aa(Math.PI/2*(4==a?-1:1)),this.za&&(d[c].nb(this.za.K*Math.PI/180),d[c].Aa(-this.za.pitch*Math.PI/180)),d[c].Na(-this.pan.a*Math.PI/180),d[c].Aa(this.j.a*Math.PI/180),d[c].nb(this.K.a*Math.PI/180);d=this.Bh(d);b.mc=0<d.length;if(b.mc){b=b.ye;b.$e=d[0].Vc;b.uf=d[0].Vc;b.af=d[0].wb;b.vf=d[0].wb;for(c=1;c<d.length;c++)b.$e=Math.min(b.$e,d[c].Vc),b.uf=
Math.max(b.uf,d[c].Vc),b.af=Math.min(b.af,d[c].wb),b.vf=Math.max(b.vf,d[c].wb);b.Ne=b.uf-b.$e;b.Yf=b.vf-b.af;b.scale=Math.max(b.Ne,b.Yf)}else b.ye.Ne=-1,b.ye.Yf=-1}};e.prototype.ei=function(){for(var a=0;a<this.h.O.length;a++){var b=this.h.O[a],d;for(d in b.Z)b.Z.hasOwnProperty(d)&&(b.Z[d].visible=!1)}};e.prototype.Mh=function(){for(var a=0,b=Math.tan(Math.min(this.Db(),175)*Math.PI/360),d=this.m.height/(2*b),d=d*(1+this.m.width/this.m.height*b/2),d=d*Math.pow(2,1<(window.devicePixelRatio||1)?this.h.bk:
this.h.ak);this.h.O.length>=a+2&&!this.h.O[a+1].Be&&this.h.O[a+1].width>d;)a++;return a};e.prototype.jo=function(){this.kb();var a=!1,b,d,c;if(this.m.width!==this.A.offsetWidth||this.m.height!==this.A.offsetHeight)this.m.width=this.A.offsetWidth,this.m.height=this.A.offsetHeight,this.A.style[this.Ra+"OriginX"]=this.m.width/2+"px",this.A.style[this.Ra+"OriginY"]=this.m.height/2+"px",a=!0;var e=Math.round(this.Xc());if(this.rf!=e||a)this.rf=e,this.rc||(this.A.style[this.Yc]=e+"px",this.A.style[this.Yc+
"Origin"]="50% 50%");this.dc=0;if(0<this.h.O.length){this.Wk();this.ei();var f;f="";for(b=0;6>b;b++){var g;g=this.bb.Xa[b];g.mc&&(f=f+b+",")}f=this.Mh();var m;for(m=this.h.O.length-1;m>=f;){var a=this.h.O[m],l=1;m==this.h.O.length-1&&0==this.h.Ua&&(l=this.h.F/(this.h.F-2));for(b=0;6>b;b++){g=this.bb.Xa[b];var k=g.ye;if(g.mc&&0<k.Ne&&0<k.Yf&&0<k.scale||a.cache){g.xa=!1;var q;q={};a.cache?(q.Cb=0,q.hc=0,q.nc=a.P-1,q.oc=a.ja-1):this.Cj(a,k,q);for(c=q.hc;c<=q.oc;c++)for(d=q.Cb;d<=q.nc;d++){var p=d+c*
a.P+b*a.P*a.ja;(k=a.Z[p])||(k=a.Z[p]=new n.Sd);if(!k.I&&this.ka<this.Cd){if(0<this.gh.length){k.I=this.gh.shift();for(p=this.A.firstChild;p&&p.sd&&(-1==p.sd||p.sd>=m);)p=p.nextSibling;this.A.insertBefore(k.I,p);k.Ja=k.I.getContext("2d")}else if(this.Pk<this.ek){this.Pk++;k.I=document.createElement("canvas");k.I.width=this.h.F+2*this.h.Ua;k.I.height=this.h.F+2*this.h.Ua;k.Ja=k.I.getContext("2d");k.I.style[this.Ra+"Origin"]="0% 0%";k.I.style.overflow="hidden";k.I.style.position="absolute";for(p=this.A.firstChild;p&&
p.sd&&(-1==p.sd||p.sd>=m);)p=p.nextSibling;this.A.insertBefore(k.I,p)}k.I&&(this.Xh++,k.h=new Image,k.h.crossOrigin=this.crossOrigin,k.h.style[this.Ra+"Origin"]="0% 0%",k.h.style.position="absolute",k.h.style.overflow="hidden",k.I.sd=m,k.h.onload=this.Un(k),k.h.onerror=this.bh(k),k.h.onabort=this.bh(k),k.h.setAttribute("src",this.He(b,m,d,c)),a.cache&&this.xb.push(k.h),0==this.ka&&this.L&&this.L.ggReLoadedLevels&&this.L.ggReLoadedLevels(),this.ka++,this.xa=!0)}else this.dc++;if(k.I){p="";this.rc?
(p+="translate3d("+this.m.width/2+"px,"+this.m.height/2+"px,0px) ",p+=" perspective("+e+"px) ",p+="translate3d(0px,0px,"+e+"px) "):p+="translate3d("+this.m.width/2+"px,"+this.m.height/2+"px,"+e+"px) ";p+="rotateZ("+Number(this.K.a).toFixed(10)+"deg) ";p+="rotateX("+Number(this.j.a).toFixed(10)+"deg) ";p+="rotateY("+Number(-this.pan.a).toFixed(10)+"deg) ";this.za&&(p+="rotateX("+Number(-this.za.pitch).toFixed(10)+"deg) ",p+="rotateZ("+Number(this.za.K).toFixed(10)+"deg) ");var p=4>b?p+("rotateY("+
-90*b+"deg) "):p+("rotateX("+(4==b?-90:90)+"deg) "),u;this.De?(u=this.Te/this.h.F*(this.h.F/a.width)*(2*m+1),u=this.wd?2/Math.tan(this.f.a*Math.PI/360)*u:2*u,p+=" scale("+u*l*l+")"):u=1/(l*l);p+=" translate3d("+(1/l*d*this.h.F-this.h.Ua-a.width/2)+"px,";p+=1/l*c*this.h.F-this.h.Ua-a.width/2+"px,";p+=-a.width*u/2+"px)";g.mc&&(k.visible=!0,k.I?k.I.style[this.Ra]=p:k.h&&(k.h.style[this.Ra]=p))}}}}m--}for(e=0;e<this.h.O.length;e++){var a=this.h.O[e],t;for(t in a.Z)a.Z.hasOwnProperty(t)&&(k=a.Z[t],!k.visible&&
k.I&&(a.cache?(f="translate3d(-10px,-10px,0px) scale(0.001,0.001)",k.I?k.I.style[this.Ra]=f:k.h&&(k.h.style[this.Ra]="")):(k.Ja&&k.Ja.clearRect(0,0,k.Ja.canvas.width,k.Ja.canvas.height),this.gh.push(k.I),k.I?(f="translate3d(-10px,-10px,0px) scale(0.001,0.001)",k.I.style[this.Ra]=f,k.I.sd=-1):k.loaded&&this.A.removeChild(k.h),k.I=null,k.h=null,k.Ja=null,delete a.Z[t])))}this.Jc=!1}};e.prototype.Uk=function(){var a=Math.round(this.Xc());this.rc||this.Tk(a);for(var b=0;b<this.Sa.length;b++){var d;d=
this.Sa[b];d.Yk(a);d.c.hidden=!1}};e.prototype.Zk=function(){for(var a=Math.round(this.Xc()),b=0;b<this.H.length;b++){var d;d=this.H[b];d.hd||(d.Yk(a),d.c.hidden=!1)}};e.prototype.Bm=function(){for(var a=0;a<this.Sa.length;a++){var b;b=this.Sa[a];b.Fk()}for(a=0;a<this.H.length;a++)b=this.H[a],b.Fk()};e.prototype.oo=function(){for(var a=0;a<this.H.length;a++){var b;b=this.H[a];b.hd||b.ee()}for(a=0;a<this.Sa.length;a++)b=this.Sa[a],b.ee()};e.prototype.Qc=function(a){this.qe=!1;try{if(a?this.jb=a:this.jb=
document.createElement("canvas"),this.jb.width=100,this.jb.height=100,this.jb.style.display="none",this.jb.style.Co="none",this.A.insertBefore(this.jb,this.A.firstChild),a={stencil:!0,depth:!0,alpha:!1},this.we&&10<=this.Ij[0]&&(a.antialias=!1),this.J=this.jb.getContext("webgl",a),this.J||(this.J=this.jb.getContext("experimental-webgl",a)),this.J){var b=this.J;this.eb.width=500;this.eb.height=500;b.clearColor(0,0,0,0);b.enable(this.J.DEPTH_TEST);b.viewport(0,0,500,500);b.clear(b.COLOR_BUFFER_BIT|
b.DEPTH_BUFFER_BIT);this.la.mf();this.la.lf();this.la.Kj(this.Qf);this.la.Lj();this.M&&(this.M.mf(),this.M.Qc());this.ya&&(this.ya.mf(),this.ya.Qc())}}catch(d){this.T(d)}this.J?this.ma=!0:alert("Could not initialise WebGL!")};e.prototype.Rb=function(a){return a?"{"==a.charAt(0)||"/"==a.charAt(0)||0<a.indexOf("://")||0==a.indexOf("javascript:")?a:this.pd+a:this.pd};e.prototype.Bd=function(a,b,d){var c=(new RegExp("%0*"+b,"i")).exec(a.toString());if(c){var c=c.toString(),e=d.toString();for(c.charAt(c.length-
1)!=b&&(e=(1+d).toString());e.length<c.length-1;)e="0"+e;a=a.replace(c,e)}return a};e.prototype.He=function(a,b,d,c){var e=this.h.ai-1-b,f=this.h.ck,g="x";switch(a){case 0:g="f";break;case 1:g="r";break;case 2:g="b";break;case 3:g="l";break;case 4:g="u";break;case 5:g="d"}for(var m=0;3>m;m++)f=this.Bd(f,"c",a),f=this.Bd(f,"s",g),f=this.Bd(f,"r",b),f=this.Bd(f,"l",e),f=this.Bd(f,"x",d),f=this.Bd(f,"y",c),f=this.Bd(f,"v",c),f=this.Bd(f,"h",d);return this.Rb(f)};e.prototype.Rh=function(){return this.pan.a};
e.prototype.jm=function(){return this.u.pan};e.prototype.km=function(){for(var a=this.pan.a;-180>a;)a+=360;for(;180<a;)a-=360;return a};e.prototype.qg=function(){for(var a=this.pan.a-this.pan.li;-180>a;)a+=360;for(;180<a;)a-=360;return a};e.prototype.Tg=function(a){this.pa();isNaN(a)||(this.pan.a=Number(a));this.update()};e.prototype.yi=function(a){this.pa();isNaN(a)||(this.pan.a=Number(a)+this.pan.li);this.update()};e.prototype.dg=function(a,b){isNaN(a)||(this.Tg(this.Rh()+a),b&&(this.pan.d=a))};
e.prototype.Dl=function(a,b){this.dg(a*this.rd(),b)};e.prototype.Th=function(){return this.j.a};e.prototype.sm=function(){return this.u.j};e.prototype.Ug=function(a){this.pa();isNaN(a)||(this.j.a=Number(a));this.update()};e.prototype.eg=function(a,b){this.Ug(this.Th()+a);b&&(this.j.d=a)};e.prototype.Gl=function(a,b){this.eg(a*this.rd(),b)};e.prototype.xn=function(a){this.pa();isNaN(a)||(this.K.a=Number(a));this.update()};e.prototype.rm=function(){return this.K.a};e.prototype.bf=function(){return this.f.a};
e.prototype.Xl=function(){return this.u.Ge};e.prototype.Sg=function(a){this.pa();var b;switch(this.La()){case 4:b=170;break;case 12:b=360;break;case 9:b=355;break;default:b=170}!isNaN(a)&&0<a&&a<b&&(b=this.f.a,this.f.a=Number(a),this.kb(),b!=this.f.a&&this.update())};e.prototype.Xi=function(a,b){this.Sg(this.bf()+a);b&&(this.f.d=a)};e.prototype.Ue=function(a,b){if(!isNaN(a)){var d;d=a/90*Math.cos(Math.min(this.f.a,90)*Math.PI/360);d=this.f.a*Math.exp(d);this.Sg(d);b&&(this.f.d=a)}};e.prototype.vn=
function(a,b){this.pa();isNaN(a)||(this.pan.a=a);isNaN(b)||(this.j.a=b);this.update()};e.prototype.Hf=function(a,b,d){this.pa();isNaN(a)||(this.pan.a=a);isNaN(b)||(this.j.a=b);!isNaN(d)&&0<d&&180>d&&(this.f.a=d);this.update()};e.prototype.pn=function(){this.Hf(this.pan.Ka,this.j.Ka,this.f.Ka)};e.prototype.tn=function(a){this.Ff(a);this.Gf(a);this.Ef(a)};e.prototype.Ff=function(a){this.C.rb=a};e.prototype.Ef=function(a){this.C.tf=a};e.prototype.Gf=function(a){this.C.Cg=a};e.prototype.moveTo=function(a,
b,d,c,e,f){this.pa();if("_blank"!==a&&""!==a){this.u.active=!0;this.u.fe=!1;this.u.jh=!1;var g=a.toString().split("/");1<g.length&&(a=Number(g[0]),c=Number(b),b=Number(g[1]),2<g.length&&(d=Number(g[2])));isNaN(a)?this.u.pan=this.pan.a:this.u.pan=Number(a);isNaN(b)?this.u.j=this.j.a:this.u.j=Number(b);!isNaN(d)&&0<d&&180>d?this.u.f=Number(d):this.u.f=this.f.a;this.u.speed=!isNaN(c)&&0<c?Number(c):1;isNaN(e)?this.u.K=this.K.a:this.u.K=Number(e);if(void 0!==f){if(a&&4==f||12!=f||9!=f)this.u.fb=f}else this.u.fb=
this.Ma}};e.prototype.Eg=function(a){this.pa();var b=0,d=0,c=70,e=4,f=0,g=1;a.hasOwnProperty("pan")&&(b=Number(a.pan),this.u.pan=b);a.hasOwnProperty("tilt")&&(d=Number(a.tilt),this.u.j=d);a.hasOwnProperty("fov")&&(c=Number(a.fov),this.u.f=c);a.hasOwnProperty("projection")&&(e=Number(a.projection),this.u.fb=e);a.hasOwnProperty("timingFunction")&&(f=Number(a.timingFunction));a.hasOwnProperty("speed")&&(g=Number(a.speed));0>=g?(this.Hf(b,d,c),this.ld(e)):(a=new n.Tj,a.Wa="__AutoMove",a.Kf=this.pan.a,
a.Mf=this.j.a,a.md=this.f.a,a.Lf=this.Ma,a.ae=b,a.be=d,a.Pf=c,a.Uc=e,a.ne=!1,a.Md=!1,a.Nd=!1,0==f&&(a.Md=!0),1==f&&(a.ne=!0,a.Md=!0),2==f&&(a.Nd=!0),a.speed=g,this.u.Ri=this.B,this.B=this.rj(a),this.u.Si=(new Date).getTime(),this.u.jh=!0,this.u.active=!0,this.u.fe=!1,this.u.pan=b,this.u.j=d,this.u.f=c)};e.prototype.Km=function(a){this.moveTo(this.pan.Ka,this.j.Ka,this.f.Ka,a)};e.prototype.Lm=function(a,b){var d={};d.pan=this.pan.Ka;d.tilt=this.j.Ka;d.fov=this.f.Ka;d.projection=this.Ig;d.timingFunction=
b;d.speed=a;this.Eg(d)};e.prototype.tl=function(a,b,d,c){var e=new n.zg(this);e.type="point";e.pan=b;e.j=d;e.id=a;e.c={};e.c.player=this;e.oe();e.c.hotspot=e;e.c.__div=document.createElement("div");e.c.__div.appendChild(c);this.N.push(e);e.c.__div.style.position="absolute";e.c.__div.style.left="-1000px";e.c.__div.style.top="-1000px";this.va.insertBefore(e.c.__div,this.va.firstChild);this.xa=!0};e.prototype.ho=function(a,b,d){for(var c=0;c<this.N.length;c++){var e=this.N[c];e.id==a&&(e.pan=b,e.j=d,
e.oe())}this.xa=!0};e.prototype.gn=function(a){for(var b=-1,d,c=0;c<this.N.length;c++)d=this.N[c],d.id==a&&(b=c);-1<b&&(d=this.N.splice(b,1).pop(),d.c&&d.c.__div&&this.va.removeChild(d.c.__div))};e.prototype.mm=function(){for(var a=[],b=0;b<this.N.length;b++){var d=this.N[b];"point"==d.type&&a.push(String(d.id))}return a};e.prototype.Yl=function(a){for(var b=0;b<this.N.length;b++){var d=this.N[b];if(d.id==a)return b={},b.id=a,b.pan=d.pan,b.tilt=d.j,d.c&&d.c.__div&&(b.div=d.c.__div),b}};e.prototype.cl=
function(a,b){this.Y.start.x=a;this.Y.start.y=b;this.Y.ba.x=a;this.Y.ba.y=b;this.G.ba.x=a;this.G.ba.y=b;this.ui++};e.prototype.al=function(a,b){var d=this.Db();this.pan.a+=a*d/this.m.height;this.j.a+=b*d/this.m.height;this.kb()};e.prototype.bl=function(a,b){this.Y.a.x=a;this.Y.a.y=b;this.Y.aa.x=this.Y.a.x-this.Y.ba.x;this.Y.aa.y=this.Y.a.y-this.Y.ba.y;this.C.vd&&(this.Y.ba.x=this.Y.a.x,this.Y.ba.y=this.Y.a.y,this.update())};e.prototype.pa=function(){this.s.active&&(this.s.active=!1,this.pan.d=0,this.j.d=
0,this.f.d=0);this.u.active&&(this.u.active=!1,this.pan.d=0,this.j.d=0,this.f.d=0);this.Re=this.u.fe=!1;this.s.ii=!1;this.Wc=.02;this.Pe=0;this.s.Ed&&(this.s.Ed=!1,this.s.enabled=this.s.Ui);this.xe=(new Date).getTime()};e.prototype.cm=function(){return this.xe};e.prototype.yj=function(a,b){a||(a=this.ra.x,b=this.ra.y);var d=this.m.height/(2*Math.tan(this.f.a*Math.PI/360)),c=a-this.m.width/2,e=b-this.m.height/2,f={};f.pan=180*Math.atan(c/d)/Math.PI;f.tilt=180*Math.atan(-e/Math.sqrt(c*c+d*d))/Math.PI;
return f};e.prototype.om=function(a,b){var d,c;a||(a=this.ra.x,b=this.ra.y);if(2===this.ac)c=this.f.a/this.m.height,d=-(a-this.m.width/2)*c+this.pan.a,c=-(b-this.m.height/2)*c+this.j.a;else{c=new n.ua(0,0,1);d=this.yj(a,b);c.Zd(-d.tilt);c.Cf(d.pan);c.Zd(-this.j.a);c.Cf(-this.pan.a);c.Zd(-this.za.pitch);c.Qg(this.za.K);for(d=c.vl()-180;-180>d;)d+=360;c=c.wl()}var e={};e.pan=d;e.tilt=c;return e};e.prototype.dd=function(a){return a==this.control||a&&a.ggType&&("container"==a.ggType||"cloner"==a.ggType||
"timer"==a.ggType)?!0:!1};e.prototype.zh=function(a,b){var d=this.Xc(),c,e,f;for(c=0;c<this.H.length+this.Sa.length;c++){var g;g=c<this.H.length?this.H[c]:this.Sa[c-this.H.length];if(g.qb)return g}for(c=0;c<this.H.length+this.Sa.length;c++)if(g=c<this.H.length?this.H[c]:this.Sa[c-this.H.length],!g.hd){var m=[],l=new n.ua,k,q,p;0<g.f&&(q=Math.tan(g.f/2*Math.PI/180),p=0<g.xc?q*g.Nc/g.xc:q,g.$c&&1!=g.$c&&(p*=g.$c));for(k=0;4>k;k++){switch(k){case 0:l.Ta(-q,-p,-1);break;case 1:l.Ta(q,-p,-1);break;case 2:l.Ta(q,
p,-1);break;case 3:l.Ta(-q,p,-1)}l.Aa(-g.j*Math.PI/180);l.Na(g.pan*Math.PI/180);l.Na(-this.pan.a*Math.PI/180);l.Aa(this.j.a*Math.PI/180);l.nb(this.K.a*Math.PI/180);m.push(l.clone())}m=this.Bh(m);if(0<m.length){for(k=0;k<m.length;k++)l=m[k],.1>l.z?(f=-d/l.z,e=this.m.width/2+l.x*f,f=this.m.height/2+l.y*f):f=e=0,l.bc=e,l.tb=f;if(this.Hj(m,a,b))return g}}return null};e.prototype.vg=function(){return document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement&&null!=document.msFullscreenElement||
document.fullScreen};e.prototype.Jm=function(a){this.Vk(a);if(this.Kc)this.Kc.onclick();this.qd=null;if(!this.C.rb){a=a?a:window.event;if((a.which||0==a.which||1==a.which)&&this.dd(a.target)){var b;(b=this.zh(this.ra.x,this.ra.y))&&b.Oc&&(this.qd=b);this.cl(a.pageX,a.pageY);this.X.Ya=1;this.X.startTime=(new Date).getTime();a.preventDefault();this.pa()}this.Y.aa.x=0;this.Y.aa.y=0}};e.prototype.Le=function(a,b){var d=this.w.Gi;d.enabled&&(this.wa!=this.lb&&0<=a&&0<=b&&""!=this.wa.title?(this.ta.innerHTML=
this.wa.title,this.ta.style.color=this.da(d.Hi,d.Fi),d.background?this.ta.style.backgroundColor=this.da(d.Lb,d.Kb):this.ta.style.backgroundColor="transparent",this.ta.style.border="solid "+this.da(d.Ob,d.Nb)+" "+d.wh+"px",this.ta.style.borderRadius=d.vh+"px",this.ta.style.textAlign="center",0<d.width?(this.ta.style.left=a-d.width/2+this.margin.left+"px",this.ta.style.width=d.width+"px"):(this.ta.style.width="auto",this.ta.style.left=a-this.ta.offsetWidth/2+this.margin.left+"px"),this.ta.style.height=
0<d.height?d.height+"px":"auto",this.ta.style.top=b+25+ +this.margin.top+"px",this.ta.style.visibility="inherit",this.ta.style.overflow="hidden"):(this.ta.style.visibility="hidden",this.ta.innerHTML=""))};e.prototype.Vk=function(a){var b=this.Qd();this.vg()?(this.ra.x=a.pageX-this.margin.left,this.ra.y=a.pageY-this.margin.top):(this.ra.x=a.pageX-b.x,this.ra.y=a.pageY-b.y);return b};e.prototype.Ee=function(a){a&&null!==a&&"object"==typeof a?this.wa=a:this.wa=this.lb;this.wa.oe&&this.wa.oe();this.hotspot=
this.wa};e.prototype.Im=function(a){a=a?a:window.event;var b=this.Vk(a);if(!this.C.rb){this.s.active&&(this.s.Bg=(new Date).getTime(),this.s.hg&&(this.va.style.cursor="pointer",this.s.hg=!1));0<=this.X.Ya&&(a.preventDefault(),(a.which||0==a.which||1==a.which)&&this.bl(a.pageX,a.pageY),this.pa());var d=!1;if(this.wa==this.lb||"poly"==this.wa.type){var c=this.lb;0<this.N.length&&this.dd(a.target)&&(c=this.Ah(this.ra.x,this.ra.y));this.Rg(c);this.Le(a.pageX-b.x,a.pageY-b.y);0!=c&&(d=!0)}a=null;d||(a=
this.zh(this.ra.x,this.ra.y));this.va.style.cursor=this.wa!=this.lb&&this.wa.ue&&d||a&&a.hf?"pointer":"auto"}};e.prototype.Rg=function(a){!1===a&&(a=this.lb);this.wa!=a&&(this.wa!=this.lb&&(0<this.w.mode&&(this.wa.ab=0),this.Oa&&this.Oa.hotspotProxyOut&&this.Oa.hotspotProxyOut(this.wa.id)),a!=this.lb?(this.Ee(a),this.Oa&&this.Oa.hotspotProxyOver&&this.Oa.hotspotProxyOver(this.wa.id),0<this.w.mode&&(this.w.ab=1,this.wa.ab=1)):(this.Ee(this.lb),0<this.w.mode&&(this.w.ab=0)),this.fa&&this.fa.changeCurrentHotspot(this.wa.id))};
e.prototype.Hm=function(a){a=a?a:window.event;this.Ag=-1;if(!this.C.rb&&0<=this.X.Ya){this.pa();a.preventDefault();this.X.Ya=-3;this.Y.aa.x=0;this.Y.aa.y=0;a=(new Date).getTime();var b;b=Math.abs(this.Y.start.x-this.Y.ba.x)+Math.abs(this.Y.start.y-this.Y.ba.y);400>a-this.X.startTime&&0<=b&&20>b&&(this.qd&&this.qd.Oc(),(b=this.Ah(this.ra.x,this.ra.y))&&this.Sk(b),b=Math.abs(this.Y.gd.x-this.Y.ba.x)+Math.abs(this.Y.gd.y-this.Y.ba.y),700>a-this.pf&&0<=b&&20>b?(this.C.Ih&&this.fh(),this.pf=0):this.pf=
a,this.Y.gd.x=this.Y.ba.x,this.Y.gd.y=this.Y.ba.y)}};e.prototype.fk=function(a){if(!this.C.Cg&&(a=a?a:window.event,this.dd(a.target))){var b=a.detail?-1*a.detail:a.wheelDelta/40;this.C.Mj&&(b=-b);a.axis&&(-1==this.Ag?this.Ag=a.axis:this.Ag!=a.axis&&(b=0));var d=0<b?1:-1;a.wheelDeltaX&&a.wheelDeltaY&&Math.abs(a.wheelDeltaX)>Math.abs(a.wheelDeltaY)&&(b=0);0!=b&&(this.Ue(d*this.C.Jk,!0),this.update());a.preventDefault();this.pa()}};e.prototype.bo=function(a){a||(a=window.event);var b=a.touches,d=this.Qd();
this.ra.x=b[0].pageX-d.x;this.ra.y=b[0].pageY-d.y;this.Ie=this.qd=null;this.jj&&(this.jj=!1,this.Sl());if(!this.C.rb){if(0>this.X.Ya&&b[0]){this.X.startTime=(new Date).getTime();this.X.start.x=b[0].pageX;this.X.start.y=b[0].pageY;this.X.ba.x=b[0].pageX;this.X.ba.y=b[0].pageY;this.ec=b[0].target;if(this.dd(a.target)){var c;(c=this.zh(this.ra.x,this.ra.y))&&c.Oc&&(this.qd=c);if(c=this.Ah(this.ra.x,this.ra.y))this.T(c),this.Ie=c,this.Rg(c),c=this.cf(a),this.Le(c.x-d.x,c.y-d.y);this.cl(b[0].pageX,b[0].pageY);
this.X.Ya=b[0].identifier;a.preventDefault();this.pa()}if(this.ec){d=this.ec;for(c=!1;d&&d!=this.control;){if(d.onmouseover)d.onmouseover();d.onmousedown&&!c&&(d.onmousedown(),c=!0);d=d.parentNode}c&&a.preventDefault()}}1<b.length&&(this.X.Ya=-5);!this.Vh&&2==b.length&&b[0]&&b[1]&&(a=b[0].pageX-b[1].pageX,b=b[0].pageY-b[1].pageY,this.f.Lk=Math.sqrt(a*a+b*b),this.f.Ae=this.f.a);this.Y.aa.x=0;this.Y.aa.y=0}};e.prototype.Sl=function(){this.lh&&this.o.c&&(this.o.ed||this.o.c.play(),this.o.c.muted=!1);
if(this.we){var a=this.Ca.createOscillator(),b=this.Ca.createGain();a.frequency.value=30;a.type="sine";a.connect(b);b.connect(this.Ca.destination);b.gain.value=.01;a.start(0);setTimeout(function(){a.stop()},1E4)}for(b=0;b<this.S.length;b++){var d=this.S[b];(!this.Rc(d.id)||d.ga)&&0<=d.loop&&d.autoplay&&(d.ga&&d.je(),this.Xd(d.id,d.loop))}for(b=0;b<this.H.length;b++)d=this.H[b],!this.Rc(d.id)&&d.autoplay&&this.lh&&this.Xd(d.id,d.loop)};e.prototype.ao=function(a){a||(a=window.event);var b=a.touches,
d=this.Qd();this.ra.x=b[0].pageX-d.x;this.ra.y=b[0].pageY-d.y;if(!this.C.rb){b[0]&&(this.X.ba.x=b[0].pageX,this.X.ba.y=b[0].pageY);if(0<=this.X.Ya){a.preventDefault();for(var c=0;c<b.length;c++)if(b[c].identifier==this.X.Ya){this.bl(b[c].pageX,b[c].pageY);break}this.Ie&&(c=this.cf(a),this.Le(c.x-d.x,c.y-d.y));this.pa()}2==b.length&&b[0]&&b[1]&&(this.X.Ya=-6,this.Vh||(d=b[0].pageX-b[1].pageX,b=b[0].pageY-b[1].pageY,this.f.ej=Math.sqrt(d*d+b*b),this.G.f.active=!0,this.G.f.cb=this.f.Ae*Math.sqrt(this.f.Lk/
this.f.ej),4==this.La()&&this.G.f.cb>this.f.max&&(this.G.f.cb=this.f.max),this.G.f.cb<this.f.min&&(this.G.f.cb=this.f.min),this.pa(),a.preventDefault()))}};e.prototype.$n=function(a){var b,d=this.Qd(),c=!1;if(!this.C.rb){0<=this.X.Ya&&this.pa();var e=(new Date).getTime(),f;b=Math.abs(this.X.start.x-this.X.ba.x)+Math.abs(this.X.start.y-this.X.ba.y);if(0<=b&&20>b){a.preventDefault();c=!0;this.dd(this.ec)&&this.qd&&this.qd.Oc();if(this.ec)for(b=this.ec,f=!1;b&&b!=this.control;)b.onclick&&!f&&(b.onclick(),
f=!0,c=!1),b=b.parentNode;b=Math.abs(this.X.gd.x-this.X.ba.x)+Math.abs(this.X.gd.y-this.X.ba.y);if(700>e-this.pf&&0<=b&&20>b){a.preventDefault();if(this.dd(this.ec)&&this.C.Ih){var g=this;setTimeout(function(){g.fh()},1)}if(this.ec)for(b=this.ec,f=!1;b&&b!=this.control;)b.ondblclick&&!f&&(b.ondblclick(),f=!0,c=!1),b=b.parentNode;this.pf=0}else this.pf=e;this.X.gd.x=this.X.ba.x;this.X.gd.y=this.X.ba.y}if(this.ec)for(a.preventDefault(),b=this.ec,f=!1;b&&b!=this.control;){if(b.onmouseout)b.onmouseout();
b.onmouseup&&!f&&(b.onmouseup(),f=!0);b=b.parentNode}this.ec=null;this.X.Ya=-11;this.Rg(this.lb);a=this.cf(a);this.Le(a.x-d.x,a.y-d.y);this.Ie&&c&&this.Sk(this.Ie);this.Ie=null}};e.prototype.Zn=function(a){var b=this.Qd();this.C.rb||(this.X.Ya=-2);this.Ie=null;this.Rg(this.lb);a=this.cf(a);this.Le(a.x-b.x,a.y-b.y)};e.prototype.Dm=function(){return null!=this.ec||0<=this.X.Ya};e.prototype.gk=function(a){!this.Ud&&window.MSGesture&&(this.T("setup gesture"),this.Ud=new MSGesture,this.Ud.target=this.control);
this.Ud&&this.Ud.addPointer(a.pointerId)};e.prototype.tj=function(a){this.Vh=!0;this.Fg=1;this.C.rb||(a.touches?(this.ec=a.touches.target,this.dd(a.target)&&(a.preventDefault(),this.f.Ae=this.f.a,this.pa())):(a.preventDefault(),this.f.Ae=this.f.a,this.pa()))};e.prototype.Ul=function(a){!this.C.rb&&this.dd(a.target)&&(a.preventDefault(),this.G.f.active=!0,this.G.f.cb=this.f.Ae/Math.sqrt(a.scale),4==this.La()&&this.G.f.cb>this.f.max&&(this.G.f.cb=this.f.max),this.G.f.cb<this.f.min&&(this.G.f.cb=this.f.min),
this.update(),this.pa())};e.prototype.Mm=function(a){this.C.rb||(a.preventDefault(),1!=a.scale&&(this.G.f.active=!0,this.Fg*=a.scale,this.G.f.cb=this.f.Ae/Math.sqrt(this.Fg),4==this.La()&&this.G.f.cb>this.f.max&&(this.G.f.cb=this.f.max),this.G.f.cb<this.f.min&&(this.G.f.cb=this.f.min),this.update(),this.pa()))};e.prototype.sj=function(a){this.C.rb||(this.G.f.active=!1,a.preventDefault(),this.pa(),this.Ud&&this.Ud.reset&&this.Ud.reset())};e.prototype.Em=function(a){this.C.tf||(this.isFullscreen&&a.preventDefault(),
this.Td=a.keyCode,this.pa())};e.prototype.Fm=function(a){this.Td&&(this.Td=0,a.preventDefault(),this.pa())};e.prototype.Rm=function(){this.Td=0};e.prototype.Hg=function(){this.isFullscreen&&(this.vg()||this.exitFullscreen(),this.vg()&&(this.V.style.left="0px",this.V.style.top="0px"))};e.prototype.Sk=function(a){this.Oa&&this.Oa.hotspotProxyClick&&this.Oa.hotspotProxyClick(a.id);""!=a.url&&(this.mi(a.url,a.target),this.Le(-1,-1))};e.prototype.rd=function(){return Math.min(1,2*Math.tan(Math.PI*Math.min(this.f.a,
90)/360))};e.prototype.mk=function(){var a=this;setTimeout(function(){a.mk()},100);9!=a.Mg||a.Nj||requestAnimationFrame(function(){a.Sc("restart recover timer")});10<a.Mg&&1<a.ui&&(a.Sc("recover timer - disabling requestAnimationFrame"),a.Nj=!0,a.ni());a.Mg++};e.prototype.Dk=function(a){var b={yo:{value:0,name:"pan"},zo:{value:1,name:"tilt"},wo:{value:2,name:"fov"}},d=0,c=0,e=0,f;for(f in b){var g=b[f],m;for(m=Math.floor(a);!this.te(m,g.value)&&0<m;)m--;var l=this.te(m,g.value),k=this.fm(l);if(k){m=
new n.fc(l.time,l.value);var q=new n.fc(k.time,k.value),p=(a-l.time)/(k.time-l.time);if(0!=l.type||0!=k.type&&3!=k.type)if(3==l.type)m=l.value;else{var p=new n.fc,u=new n.fc,t=k.time-l.time;0==l.type?u.Ta(l.time+.3*t,l.value):u.Ta(l.Jd,l.Kd);0==k.type||3==k.type?p.Ta(k.time-.3*t,k.value):p.Ta(k.Id,k.Ec);l=new n.fc;l.uh(m,q,u,p,a);m=l.y}else l=new n.fc,l.cd(m,q,p),m=l.y}else m=l.value;switch(g.value){case 0:g=this.pan.a;if(this.Fd){for(;360<m;)m-=360;for(;-360>m;)m+=360;d=m-g;180<d&&(d-=360);-180>
d&&(d+=360);this.pan.a=this.pan.a+d*this.Wc}else this.pan.a=m;break;case 1:g=this.j.a;this.Fd?(c=m-g,this.j.a=this.j.a+c*this.Wc):this.j.a=m;break;case 2:g=this.f.a,this.Fd?(e=m-g,this.f.a=this.f.a+e*this.Wc):this.f.a=m}}b=this.La();for(f=Math.floor(a);!this.te(f,3)&&0<f;)f--;f=this.te(f,3);g=a-f.time;this.Fd&&-1!=this.Qe&&this.bg+this.rh>a?(b=this.se(this.Qe),this.f.a>b?this.bg=a:(a=(a-this.bg)/this.rh,a=Math.min(1,a),this.ld(this.Ma,this.Qe,1-a))):0==f.hb||g>f.hb-.3?this.ld(f.value):(a=g/f.hb,this.ld(b,
f.value,1-a));this.Fd&&(d=Math.sqrt(d*d+c*c+e*e),.3>d&&(this.Fd=!1,this.Wc=.02,this.Pe=0),0<this.Pe&&d>this.Pe&&(this.Wc+=.01,this.Wc=Math.min(this.Wc,1)),this.Pe=d);this.update()};e.prototype.Ym=function(a){var b,d=this.u.speed;this.u.$h&&(d=d*(a.getTime()-this.u.$h)/60,5<d&&(d=5),.2>d&&(d=.2));this.u.$h=a.getTime();this.s.mg&&(this.la.ready()||4==this.Ma)&&this.pg()&&(this.s.mg=!1,this.s.active=!0,this.Bb.$d=!0,this.Bb.Nh=!1);if(this.u.active||0!=this.u.fb&&this.la.ready()){if(this.u.jh&&"__AutoMove"==
this.B.Wa)if(b=a.getTime()-this.u.Si,d=b/100,d>=this.B.length){if(this.Da.splice(this.Da.indexOf(this.B),1),this.u.active=!1,this.B=this.u.Ri,this.u.fb=0,this.Hf(this.u.pan,this.u.j,this.u.f),this.u.ji&&(this.u.ji=!1,this.s.ii=!0,this.s.active=!0),this.onMoveComplete)this.onMoveComplete()}else this.Dk(d);else{this.pan.d=this.u.pan-this.pan.a;if(360==this.pan.max-this.pan.min){for(;-180>this.pan.d;)this.pan.d+=360;for(;180<this.pan.d;)this.pan.d-=360}this.j.d=this.u.j-this.j.a;this.K.d=this.u.K-this.K.a;
this.f.d=this.u.f-this.f.a;b=d*this.rd();var c=Math.sqrt(this.pan.d*this.pan.d+this.j.d*this.j.d+this.K.d*this.K.d+this.f.d*this.f.d),e=this.pan.a-this.u.Xj,f=this.j.a-this.u.Zj,g=this.K.a-this.u.Yj,m=this.f.a-this.u.Wj;100*Math.sqrt(e*e+f*f+g*g+m*m)<b&&0==this.u.fb&&(this.u.fe=!0);this.u.Xj=this.pan.a;this.u.Zj=this.j.a;this.u.Yj=this.K.a;this.u.Wj=this.f.a;if(100*c<b||this.u.fe){if(this.pan.d=0,this.j.d=0,this.K.d=0,this.f.d=0,this.u.active&&(this.u.active=!1,this.pan.a=this.u.pan,this.j.a=this.u.j,
this.K.a=this.u.K,this.f.a=this.u.f,this.onMoveComplete))this.onMoveComplete()}else c=c>5*b?b/c:.2,this.pan.d*=c,this.j.d*=c,this.f.d*=c;this.pan.a+=this.pan.d;this.j.a+=this.j.d;this.K.a+=this.K.d;this.f.a+=this.f.d;0!=this.u.fb&&(this.u.fb!=this.Ma?(d=this.se(this.u.fb),this.bf()>d?(this.f.a+=-Math.max((2.5-1.7*Math.min(Math.sqrt(this.pan.d*this.pan.d+this.j.d*this.j.d+this.K.d*this.K.d)/b,1))*b,this.f.d)-this.f.d,this.u.f=this.f.a):(this.Gb=this.Ma,this.Ma=this.u.fb,this.T("New projection from Target:"+
this.Ma),this.zf=this.u.Bf=0,this.la.lf())):1>this.u.Bf?(this.u.Bf=Math.min(1,this.u.Bf+.05*d),this.zf=this.u.Bf):(this.Gb=0,this.u.fb=0,this.la.lf()))}this.xe=a.getTime();this.update()}else if(this.s.active)if(b=a.getTime()-this.s.startTime,this.s.Bg<this.s.startTime&&(this.s.Bg=this.s.startTime),(this.s.Ki||this.s.Ed||this.Bb.$d)&&0<this.Da.length){d=b/100;c=!1;if(this.Fb!=this.B.Wa){for(b=0;b<this.Da.length;b++)if(""==this.Fb||""!=this.Fb&&this.Da[b].Wa==this.Fb){c=!0;this.B=this.Da[b];this.Fb=
this.B.Wa;break}!c&&0<this.Da.length&&(c=!0,this.B=this.Da[0],this.Fb=this.B.Wa)}else c=!0;if(c)if(b=(e=this.o.c&&this.o.ed)&&this.s.Ei,this.Re){c=d;if(b)for(this.o.c.currentTime<this.Ti&&this.th&&(this.sh++,this.th=!1),c=10*(this.sh*this.o.c.duration+this.o.c.currentTime),this.Ti=this.o.c.currentTime,.05>this.o.c.duration-this.o.c.currentTime&&(this.th=!0);c>=10*this.ge;)c-=10*this.ge;if(!e&&d>=this.B.length||e&&!b&&d>=this.B.length||e&&b&&this.B.Wa!=this.B.ik&&d>=this.B.length)if(this.Re=!1,this.Bb.$d)this.Bb.$d=
!1,this.Bb.Nh=!0,this.s.active=this.M.Hd,this.Da.splice(this.Da.indexOf(this.B),1),0<this.Da.length&&(this.B=this.Da[0]),this.Fb="",this.Ff(this.M.hi),this.Gf(this.M.Ni),this.Ef(this.M.Zh),this.M.Hd=!1,this.xe=a.getTime();else if(this.Fb=this.B.ik,this.Fb==this.B.Wa){if(1<this.Ga.length&&0<this.s.Gg){if(this.s.ki){b=1E3;do d=this.Ga[Math.floor(Math.random()*this.Ga.length)];while(b--&&d==this.Qb)}else d=this.xj();this.Vd("{"+d+"}");this.s.startTime=a.getTime();this.Re=!1;this.s.active=!0;this.M.Hd=
!0}}else this.nf&&this.B.hk!=this.Qb&&(this.Vd("{"+this.B.hk+"}"),this.M.enabled?(this.s.active=!1,this.M.Hd=!0):this.s.active=!0),this.s.startTime=a.getTime();else this.Dk(c)}else{for(d=this.B.ha[0];360<d.value;)d.value-=360;c=this.B.ha[1];e=this.B.ha[2];f=this.B.ha[3];3!=f.mb&&(f=0);if(this.s.ii||this.u.fe||this.Bb.$d||b){if(this.Re=!0,this.s.startTime=a.getTime(),this.Fd=b){for(this.ge=this.sh=0;this.ge<this.B.length/10;)this.ge+=this.o.c.duration;c=10*this.o.c.currentTime;for(a=Math.floor(c);!this.te(a,
3)&&0<a;)a--;a=this.te(a,3);a.value==this.Ma?this.Qe=-1:(this.Qe=a.value,this.bg=c,this.rh=Math.max(5,a.time+a.hb-c))}}else a=this.s.Ed,b={},b.pan=d.value,b.tilt=c.value,b.fov=e.value,b.projection=f?f.value:4,b.timingFunction=3,b.speed=1,this.u.ji=!0,this.Eg(b),this.s.active=!0,this.s.Ed=a}}else if(3E3<a.getTime()-this.s.Bg&&!this.s.hg&&(this.va.style.cursor="none",this.s.hg=!0),0<this.s.Gg&&this.nf&&b>=1E3*this.s.Gg){if(1<this.Ga.length){if(this.s.ki){b=1E3;do d=this.Ga[Math.floor(Math.random()*
this.Ga.length)];while(b--&&d==this.Qb)}else b=this.Ga.indexOf(this.Qb),b++,b>=this.Ga.length&&(b=0),d=this.Ga[b];this.s.startTime=a.getTime();this.s.fd=a.getTime();this.s.timeout=0;this.Vd("{"+d+"}");this.s.active=!0;this.M.Hd=!0}}else a=a.getTime(),d=b=1E3/60,0!=this.s.fd&&(d=a-this.s.fd),this.j.d=this.s.dh*(0-this.j.a)/100,this.f.d=this.s.dh*(this.f.Ka-this.f.a)/100,this.pan.d=.95*this.pan.d+-this.s.speed*this.rd()*.05,b=d/b,this.pan.a+=this.pan.d*b,this.j.a+=this.j.d*b,this.f.a+=this.f.d*b,this.s.fd=
a,this.update();else!this.Bb.Nh&&1E3<a.getTime()-this.xe&&(this.Da.splice(this.Da.indexOf(this.B),1),this.B=this.og(!1),this.Fb=this.B.Wa,this.s.active=!1,this.s.mg=!0),this.s.enabled&&0>this.X.Ya&&a.getTime()-this.xe>1E3*this.s.timeout&&(this.s.Of&&this.pg()||!this.s.Of)&&(this.s.active=!0,this.s.startTime=a.getTime(),this.s.fd=0,this.pan.d=0,this.j.d=0,this.f.d=0),this.G.enabled&&0==this.Td&&0>this.X.Ya&&(0!=this.pan.d||0!=this.j.d||0!=this.f.d)&&(this.pan.d*=.9,this.j.d*=.9,this.f.d*=.9,this.pan.a+=
this.pan.d,this.j.a+=this.j.d,this.Ue(this.f.d),1E-4>this.pan.d*this.pan.d+this.j.d*this.j.d+this.f.d*this.f.d&&(this.pan.d=0,this.j.d=0,this.f.d=0),this.update())};e.prototype.Zm=function(a){var b=this.M;if(b.Dd){var d=a.getTime()-b.gl,d=d/(1E3*b.fl);if(1<=d){b.Dd=!1;for(d=0;d<this.Ea.Sf.length;d++)this.Ea.Lh(this.Ea.Sf[d]);b.Ci=a.getTime();this.Mk();b.Je=!0;0==b.Dc||b.ph||(4==b.Dc?(this.B=this.og(!0),this.Fb=this.B.Wa,this.s.active=!0,this.Bb.$d=!0):this.moveTo(b.Zg,b.$g,b.Ge,b.Oe,0,b.Uc))}else b.lk(d)}else b.Je&&
(d=a.getTime()-b.Ci,d/=1E3*b.Vi,1<=d?(b.Je=!1,this.xe=a.getTime(),this.update(),0!=b.Dc&&b.ph&&(4==b.Dc?(this.B=this.og(!0),this.Fb=this.B.Wa,this.s.active=!0,this.Bb.$d=!0):this.moveTo(b.Zg,b.$g,b.Ge,b.Oe,0,b.Uc)),4!=b.Dc&&(this.Ff(b.hi),this.Gf(b.Ni),this.Ef(b.Zh),this.s.active=b.Hd,b.Hd=!1),this.s.fd=0):b.lk(d));b=this.Sm;b.yl&&(b.ig?a.getTime()-b.Jh>=1E3*b.Nl&&(b.ig=!1):(b.current+=b.Fc,0>b.current&&(b.current=0,b.Fc=-b.Fc,b.ig=!0,b.Jh=a.getTime()),1<b.current&&(b.current=1,b.Fc=-b.Fc,b.ig=!0,
b.Jh=a.getTime())))};e.prototype.cn=function(){var a,b=this.w;if(0<b.sc.length){for(a=0;a<b.sc.length;a++)b.zc[a]!=b.vb[a]&&(b.zc[a]>b.vb[a]?(b.vb[a]+=.05,b.zc[a]<b.vb[a]&&(b.vb[a]=b.zc[a])):(b.vb[a]-=.05,b.zc[a]>b.vb[a]&&(b.vb[a]=b.zc[a],-1!=b.Wg.indexOf(b.sc[a])&&(b.Wg.splice(b.Wg.indexOf(b.sc[a]),1),b.sc.splice(a,1),b.zc.splice(a,1),b.vb.splice(a,1)))));this.update()}if(2==b.mode)for(a=0;a<this.N.length;a++){var d=this.N[a];"poly"==d.type&&d.ab!=d.na&&(d.ab>d.na?(d.na+=b.Fc,d.ab<d.na&&(d.na=d.ab)):
(d.na-=b.Fc,d.ab>d.na&&(d.na=d.ab)),this.update())}3==b.mode&&b.ab!=b.na&&(b.ab>b.na?(b.na+=b.Fc,b.ab<b.na&&(b.na=b.ab)):(b.na-=b.Fc,b.ab>b.na&&(b.na=b.ab)),this.update())};e.prototype.$m=function(){0<=this.X.Ya&&(this.C.vd?(this.G.aa.x=.4*(this.Y.ba.x-this.G.ba.x),this.G.aa.y=.4*(this.Y.ba.y-this.G.ba.y),this.G.ba.x+=this.G.aa.x,this.G.ba.y+=this.G.aa.y):(this.G.aa.x=.1*-this.Y.aa.x*this.C.sensitivity/8,this.G.aa.y=.1*-this.Y.aa.y*this.C.sensitivity/8),this.al(this.G.aa.x,this.G.aa.y),this.update());
this.G.f.active&&(this.Xi(.4*(this.G.f.cb-this.f.a)),.001>Math.abs(this.G.f.cb-this.f.a)/this.f.a&&(this.G.f.active=!1),this.update());this.G.enabled&&(0!=this.G.aa.x||0!=this.G.aa.y)&&0>this.X.Ya&&(this.G.aa.x=.9*this.G.aa.x,this.G.aa.y=.9*this.G.aa.y,.1>this.G.aa.x*this.G.aa.x+this.G.aa.y*this.G.aa.y?(this.G.aa.x=0,this.G.aa.y=0):(this.al(this.G.aa.x,this.G.aa.y),this.update()))};e.prototype.an=function(){if(0!=this.Td){var a=this.C.sensitivity/8;switch(this.Td){case 37:case 65:this.dg(a*this.rd(),
!0);break;case 38:case 87:this.eg(a*this.rd(),!0);break;case 39:case 68:this.dg(-a*this.rd(),!0);break;case 40:case 83:this.eg(-a*this.rd(),!0);break;case 43:case 107:case 16:case 81:this.C.di||this.Ue(-a,!0);break;case 17:case 18:case 109:case 45:case 91:case 69:this.C.di||this.Ue(a,!0)}this.update()}};e.prototype.bn=function(){if(!this.pg()&&this.jf&&5<this.h.yk){var a,b=0,d=this.xb.length;if(this.Vf)d=50,this.Kh<d&&this.Kh++,b=this.Kh;else for(a=0;a<d;a++)(this.xb[a].complete&&this.xb[a].src!=
this.hj||""==this.xb[a].src)&&b++;b==d?(this.Jg=1,this.isLoaded=!0,this.L&&this.L.ggLoaded&&this.L.ggLoaded(),this.s.Of&&this.s.enabled&&!this.u.active&&!this.M.Dd&&(this.s.active=!0,this.s.startTime=(new Date).getTime(),this.s.fd=0)):this.Jg=b/(1*d)}};e.prototype.ni=function(){var a=new Date;this.ob&&""!==this.Pd&&!this.fa&&document.hasOwnProperty(this.Pd)&&document[this.Pd].setPan&&0==this.Rl--&&(this.fa=document[this.Pd],this.Ac=this.ma=!1,this.sa&&(this.sa.style.visibility="hidden"),this.fa.setLocked(!0),
this.fa.setSlaveMode(!0),this.fa.readConfigString(this.Gh),this.Sc("Flash player '"+this.Pd+"' connected."));this.ng++;120<=this.ng&&(this.T("Fps: "+1E3*this.ng/(a.getTime()-this.Uj)),this.Uj=a.getTime(),this.ng=0);this.ui=this.Mg=0;this.Ji&&(this.od(),this.Ji=!1);this.$m();this.an();for(this.bn();360<this.pan.a;)this.pan.a-=360;for(;-360>this.pan.a;)this.pan.a+=360;this.Ym(a);this.Zm(a);this.la.lo();0<=this.w.mode&&this.cn();this.ih();this.xa&&(0<this.jg?this.jg--:(this.xa=!1,this.jg=0),this.M.Je||
this.M.Dd||this.Uf());var b=this;setTimeout(function(){b.ni()},1E3/60)};e.prototype.se=function(a){switch(a){case 4:a=Math.min(110,this.f.max);break;case 12:a=Math.min(270,this.f.fi);a=Math.min(360*this.Gd(),a);a=Math.min(360/this.Gd(),a);break;case 9:a=Math.min(270,this.f.gi);break;default:a=90}return a};e.prototype.Xk=function(){var a=this;setTimeout(function(){a.Fe(!1)},10);setTimeout(function(){a.Fe(!1)},100)};e.prototype.ih=function(){this.Fh.lj(this.pan.a,this.j.a);for(var a=0;a<this.S.length+
this.H.length;a++){var b;if(a<this.S.length)b=this.S[a];else if(b=this.H[a-this.S.length],b.hd)continue;b.ih()}};e.prototype.fj=function(a){var b="",d,c,e,f,g,m=0;a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");do d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(m++)),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(m++)),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(m++)),g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(m++)),
d=d<<2|c>>4,c=(c&15)<<4|f>>2,e=(f&3)<<6|g,b+=String.fromCharCode(d),64!=f&&(b+=String.fromCharCode(c)),64!=g&&(b+=String.fromCharCode(e));while(m<a.length);return b};e.prototype.Kn=function(a,b){var d,c,e=this;if(0!=e.wf.length||!e.C.kf||e.C.Xe||e.C.fg)if(e.Kc)e.Kc=null,e.V.removeChild(e.Kc);else{e.Kc=document.createElement("div");var f=e.Kc;d="left: "+a+"px;"+("top:\t "+b+"px;")+"z-index: 32000;";d+="position:relative;";d+="display: table;";d+="background-color: white;";d+="border: 1px solid lightgray;";
d+="box-shadow: 1px 1px 3px #333;";d+="font-family: Verdana, Arial, Helvetica, sans-serif;";d+="font-size: 9pt;";d+="opacity : 0.95;";f.setAttribute("style",d);f.setAttribute("class","gg_contextmenu");d=document.createElement("style");c=document.createTextNode(".gg_context_row:hover { background-color: #3399FF }");d.type="text/css";d.styleSheet?d.styleSheet.cssText=c.nodeValue:d.appendChild(c);f.appendChild(d);for(c=0;c<e.wf.length;c++){var g=e.wf[c],m=document.createElement("div");d="text-align: left;";
d+="margin: 0;";d+="padding: 5px 20px;";d+="vertical-align: left;";m.setAttribute("style",d);m.setAttribute("class","gg_context_row");d=document.createElement("a");d.href=g.url;d.target="_blank";d.innerHTML=g.text;d.setAttribute("style","color: black; text-decoration: none;");m.appendChild(d);f.appendChild(m)}0<e.wf.length&&(!e.C.kf||e.C.Xe||e.C.fg)&&f.appendChild(document.createElement("hr"));if(e.C.fg&&e.ma){g=[];g.push({text:"Rectilinear Projection",Af:4});g.push({text:"Stereographic Projection",
Af:9});g.push({text:"Fisheye Projection",Af:12});for(c=0;c<g.length;c++){var m=g[c],l=document.createElement("div");l.setAttribute("class","gg_context_row");d="text-align: left;";d+="margin: 0;";d=e.Ma==m.Af?d+"padding: 5px 20px 5px 7px;":d+"padding: 5px 20px;";d+="vertical-align: left;";d+="cursor: pointer;";l.setAttribute("style",d);l.onclick=function(a){return function(){e.Zi(a,1);e.update()}}(m.Af);e.Ma==m.Af?l.innerHTML="&#10687; "+m.text:l.innerHTML=m.text;f.appendChild(l)}e.C.kf&&!e.C.Xe||
f.appendChild(document.createElement("hr"))}e.C.Xe&&(c=document.createElement("div"),c.setAttribute("class","gg_context_row"),d="text-align: left;margin: 0;padding: 5px 20px;",d+="vertical-align: left;",d+="cursor: pointer;",c.setAttribute("style",d),c.onclick=function(){e.fh()},c.innerHTML=e.vg()?"Exit Fullscreen":"Enter Fullscreen",f.appendChild(c));e.C.kf||(c=document.createElement("div"),d="text-align: left;margin: 0;padding: 5px 20px;",d+="vertical-align: left;",c.setAttribute("style",d),c.setAttribute("class",
"gg_context_row"),d=document.createElement("a"),d.href=e.fj("aHR0cDovL3Bhbm8ydnIuY29tLw=="),d.target="_blank",d.innerHTML=e.fj("Q3JlYXRlZCB3aXRoIFBhbm8yVlI="),d.setAttribute("style","color: black; text-decoration: none;"),c.appendChild(d),f.appendChild(c));e.V.insertBefore(e.Kc,e.V.firstChild);f.onclick=function(){e.Kc&&(e.V.removeChild(e.Kc),e.Kc=null)};f.oncontextmenu=f.onclick}};e.prototype.xl=function(){var a=this,b;b=a.va;a.control=b;a.control=b;a.Xk();setTimeout(function(){a.ni()},10);setTimeout(function(){a.mk()},
200);setTimeout(function(){a.ee();a.Uf()},10);b.addEventListener&&(b.addEventListener("touchstart",function(b){a.bo(b)},!1),b.addEventListener("touchmove",function(b){a.ao(b)},!1),b.addEventListener("touchend",function(b){a.$n(b)},!1),b.addEventListener("touchcancel",function(b){a.Zn(b)},!1),b.addEventListener("pointerdown",function(b){a.gk(b)},!1),b.addEventListener("MSPointerDown",function(b){a.gk(b)},!1),b.addEventListener("MSGestureStart",function(b){a.tj(b)},!1),b.addEventListener("MSGestureEnd",
function(b){a.sj(b)},!1),b.addEventListener("MSGestureChange",function(b){a.Mm(b)},!1),b.addEventListener("gesturestart",function(b){a.tj(b)},!1),b.addEventListener("gesturechange",function(b){a.Ul(b)},!1),b.addEventListener("gestureend",function(b){a.sj(b)},!1),b.addEventListener("mousedown",function(b){a.Jm(b)},!1),b.addEventListener("mousemove",function(b){a.Im(b)},!1),document.addEventListener("mouseup",function(b){a.Hm(b)},!1),b.addEventListener("mousewheel",function(b){a.fk(b)},!1),b.addEventListener("DOMMouseScroll",
function(b){a.fk(b)},!1),document.addEventListener("keydown",function(b){a.Em(b)},!1),document.addEventListener("keyup",function(b){a.Fm(b)},!1),window.addEventListener("orientationchange",function(){a.Xk()},!1),window.addEventListener("resize",function(){a.ee()},!1),window.addEventListener("blur",function(){a.Rm()},!1),a.V.addEventListener("webkitfullscreenchange",function(){a.Hg()},!1),document.addEventListener("mozfullscreenchange",function(){a.Hg()},!1),window.addEventListener("webkitfullscreenchange",
function(){a.Hg()},!1),document.addEventListener("MSFullscreenChange",function(){a.Hg()},!1));b.oncontextmenu=function(b){void 0===b&&(b=window.event);if(b.target&&!a.dd(b.target))return!0;if(!b.ctrlKey){b=a.cf(b);var c=a.Qd();a.Kn(b.x-c.x,b.y-c.y);return!1}return!0}};e.prototype.Qi=function(){for(var a=0;a<this.N.length;a++)if("point"==this.N[a].type&&(this.Oa&&this.Oa.addSkinHotspot?(this.N[a].oe(),this.N[a].c=new this.Oa.addSkinHotspot(this.N[a])):this.N[a].c=new n.hl(this,this.N[a]),this.N[a].c.__div.style.left=
"-1000px",this.N[a].c.__div.style.top="-1000px",this.N[a].c&&this.N[a].c.__div)){var b=this.va.firstChild;b?this.va.insertBefore(this.N[a].c.__div,b):this.va.appendChild(this.N[a].c.__div)}};e.prototype.el=function(){var a,b=document.createElement("fakeelement"),d={OTransition:"oTransitionEnd",MSTransition:"msTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",transition:"transitionEnd"};for(a in d)if(void 0!==b.style[a])return d[a]};e.prototype.Ab=function(a){var b=
[];a=new RegExp(a,"");for(var d=0;d<this.S.length;d++)a.test(this.S[d].id)&&b.push(this.S[d]);for(d=0;d<this.H.length;d++)a.test(this.H[d].id)&&b.push(this.H[d]);for(d=0;d<this.Sa.length;d++)a.test(this.Sa[d].id)&&b.push(this.Sa[d]);return b};e.prototype.em=function(a){if("_videopanorama"==a)return this.o.c;a=this.Ab(a);return 0<a.length?a[0].c:null};e.prototype.sk=function(a,b){for(var d=0;d<this.H.length;d++)if(this.H[d].id==a)return this.H[d].c=b,this.H[d];d=new n.Bk(this);d.registerElement(a,
b);return d};e.prototype.Rc=function(a){if(this.ob){var b=this.fa;if(b)return b.isPlaying(a)}else{if("_main"===a)return!0;a=this.Ab(a);if(0<a.length)return a[0].ga?a[0].ze:!a[0].c.ended&&!a[0].c.paused}return!1};e.prototype.Xd=function(a,b){if(this.ob){var d=this.fa;d&&d.playSound(a,b)}else try{for(var d=this.Ab(a),c=0;c<d.length;c++){var e=d[c];e.Ic=b&&!isNaN(Number(b))?Number(b)-1:e.loop-1;-1==e.Ic&&(e.Ic=1E7);this.T(e.c);e.ga?e.Gc():e.c.play()}}catch(f){this.T(f)}};e.prototype.nk=function(a,b){for(var d=
this.Ab(a),c=0;c<d.length;c++){var e=d[c];this.Rc(e.id)?this.oi(e.id):this.Xd(e.id,b)}};e.prototype.dn=function(a,b){for(var d=this.Ab(a),c=0;c<d.length;c++){var e=d[c];this.Rc(e.id)?this.Nk(e.id):this.Xd(e.id,b)}};e.prototype.oi=function(a){if(this.ob){var b=this.fa;b&&b.pauseSound(a)}else try{if("_main"==a){for(b=0;b<this.S.length;b++)this.S[b].ga?this.S[b].xh():this.S[b].c.pause();for(b=0;b<this.H.length;b++)this.H[b].c.pause()}else for(var d=this.Ab(a),b=0;b<d.length;b++){var c=d[b];c.ga?c.xh():
c.c.pause()}}catch(e){this.T(e)}};e.prototype.sl=function(a,b){for(var d=this.Ab(a),c=0;c<d.length;c++){var e=d[c];0==b||1==b?e.ef&&e.ef(1==b):2==b&&e.Oc&&e.Oc()}};e.prototype.Nk=function(a){var b;if(this.ob)(b=this.fa)&&b.stopSound(a);else try{if("_main"===a){for(b=0;b<this.S.length;b++)this.S[b].ga?this.S[b].je():(this.S[b].c.pause(),this.S[b].c.currentTime=0);for(b=0;b<this.H.length;b++)this.H[b].c.pause(),this.H[b].c.currentTime=0}else{var d=this.Ab(a);for(b=0;b<d.length;b++){var c=d[b];c.ga?
c.je():c.c&&c.c.pause&&(c.c.pause(),c.c.currentTime=0)}}}catch(e){this.T(e)}};e.prototype.Mn=function(a){a=this.Ab(a);return 0<a.length?(a=a[0],a.ga?a.Al():a.c?a.c.currentTime:0):0};e.prototype.Nn=function(a,b){var d=this.Ab(a);0<d.length&&(d=d[0],d.ga?(0>b&&(b=0),b>d.Se.duration&&(b=d.Se.duration-.1),d.Bl(b)):d.c&&(0>b&&(b=0),b>d.c.duration&&(b=d.c.duration-.1),d.c.currentTime=b))};e.prototype.Hn=function(a,b){if(this.ob){var d=this.fa;d&&d.setVolume(a,b)}else try{var c=Number(b);1<c&&(c=1);0>c&&
(c=0);"_videopanorama"===a&&this.o.c&&(this.o.c.volume=c);if("_main"===a){this.W=c;for(d=0;d<this.S.length;d++)this.S[d].c.volume=this.S[d].level*this.W;for(d=0;d<this.H.length;d++)this.H[d].c.volume=this.H[d].level*this.W;this.o.c&&(this.o.c.volume=this.W)}else{var e=this.Ab(a);this.T(e);for(d=0;d<e.length;d++){var f=e[d];f.c&&null!=f.c.volume&&(f.c.volume=c*this.W);f.level=c}}}catch(g){this.T(g)}};e.prototype.Jl=function(a,b){if(this.ob){var d=this.fa;d&&d.changeVolume(a,b)}else try{var c;"_videopanorama"===
a&&this.o.c&&(this.o.c.volume=this.o.c.volume+Number(b));if("_main"===a){d=this.W;d+=Number(b);1<d&&(d=1);0>d&&(d=0);this.W=d;for(c=0;c<this.S.length;c++)this.S[c].c.volume=this.S[c].level*this.W;for(c=0;c<this.H.length;c++)this.H[c].c.volume=this.H[c].level*this.W;this.o.c&&(this.o.c.volume=this.W)}else{var e=this.Ab(a);for(c=0;c<e.length;c++){var f=e[c],d=f.level,d=d+Number(b);1<d&&(d=1);0>d&&(d=0);f.level=d;f.c&&null!=f.c.volume&&(f.c.volume=d*this.W)}}}catch(g){this.T(g)}};e.prototype.Mk=function(){try{for(var a=
this,b=!1,d=!1,c=0;c<this.S.length;c++){var e=this.S[c];-1==e.loop||this.Rc(e.id)||(this.Ca&&this.Ea.enabled&&4!=e.mode&&6!=e.mode?this.Ea.cj?(e.ga?e.Gc():(e.c.play(),e.c.currentTime=0),e.ia=0,d=!0):b=!0:4==e.mode||6==e.mode||"_background"==e.id&&this.Rc(e.id)||(e.ga?e.Gc():(e.c.play(),e.c.currentTime&&(e.c.currentTime=0))))}b&&setTimeout(function(){a.Ea.Sn()},1E3*this.Ea.hb);d&&(this.Ea.Pn=this.Ca.currentTime,this.Ea.On=setInterval(function(){a.Ea.Ql()},10))}catch(f){this.T(f)}};e.prototype.wk=function(){for(var a;0<
this.N.length;)a=this.N.pop(),a.c&&(this.va.removeChild(a.c.__div),delete a.c),a.c=null};e.prototype.zi=function(a){this.Zf=a;0!=a?this.V.style.zIndex=a.toString():this.V.style.zIndex="auto";this.ya&&this.ya.Hc&&(this.ya.Hc.zIndex=(a+4).toString());this.va.style.zIndex=(a+4).toString();this.sa.style.zIndex=(a+3).toString();this.ta.style.zIndex=(a+5).toString();for(var b=0;b<this.H.length+this.Sa.length;b++){var d;d=b<this.H.length?this.H[b]:this.Sa[b-this.H.length];d.c&&(d.c.style.zIndex=(a+(d.qb?
8E4:0)).toString())}};e.prototype.Fe=function(a){var b=this.isFullscreen!==a;this.isFullscreen!==a&&(this.isFullscreen=a,this.update(100));if(this.isFullscreen){if(this.kh)try{this.V.webkitRequestFullScreen?this.V.webkitRequestFullScreen():this.V.mozRequestFullScreen?this.V.mozRequestFullScreen():this.V.msRequestFullscreen?this.V.msRequestFullscreen():this.V.requestFullScreen?this.V.requestFullScreen():this.V.requestFullscreen&&this.V.requestFullscreen()}catch(d){this.T(d)}this.V.style.position="absolute";
a=this.Qd();this.V.style.left=window.pageXOffset-a.x+this.margin.left+"px";this.V.style.top=window.pageYOffset-a.y+this.margin.top+"px";this.zi(10);document.body.style.overflow="hidden";b&&this.L&&this.L.ggEnterFullscreen&&this.L.ggEnterFullscreen()}else{if(this.kh)try{document.webkitIsFullScreen?document.webkitCancelFullScreen():document.mozFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.fullScreen&&(document.cancelFullScreen?document.cancelFullScreen():
document.exitFullscreen&&document.exitFullscreen())}catch(d){this.T(d)}this.V.style.position="relative";this.V.style.left="0px";this.V.style.top="0px";this.zi(0);document.body.style.overflow="";b&&this.L&&this.L.ggExitFullscreen&&this.L.ggExitFullscreen()}this.ee()};e.prototype.fh=function(){this.Fe(!this.isFullscreen)};e.prototype.Pl=function(){this.Fe(!0)};e.prototype.exitFullscreen=function(){this.Fe(!1)};e.prototype.$l=function(){return this.isFullscreen};e.prototype.Kk=function(a,b,d){this.s.enabled=
!0;this.s.active=!0;this.s.fd=0;this.s.startTime=(new Date).getTime();a&&0!=a&&(this.s.speed=a);b&&(this.s.timeout=b);d&&(this.s.dh=d)};e.prototype.Tn=function(){this.s.active=!1;this.s.enabled=!1;this.s.Ed=!1};e.prototype.Xn=function(){this.s.enabled=!this.s.active;this.s.active=this.s.enabled;this.s.fd=0;this.s.enabled&&(this.s.startTime=(new Date).getTime())};e.prototype.Qn=function(){this.s.Ed||(this.s.Ed=!0,this.s.Ui=this.s.enabled,this.Kk())};e.prototype.bj=function(a){if(this.le=document.getElementById(a)){this.le.innerHTML=
"";this.V=document.createElement("div");O&&this.V.setAttribute("id","viewport");a="top:\t0px;left: 0px;position:relative;-ms-touch-action: none;touch-action: none;text-align: left;"+(this.Ia+"user-select: none;");this.V.setAttribute("style",a);this.le.appendChild(this.V);this.A=document.createElement("div");a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;-ms-touch-action: none;touch-action: none;"+(this.Ia+"user-select: none;");O&&this.A.setAttribute("id","viewer");
this.A.setAttribute("style",a);this.V.appendChild(this.A);if(this.ob){var b=document.createElement("div");a="top:\t0px;left: 0px;width:  100%;height: 100%;overflow: hidden;position:absolute;-ms-touch-action: none;touch-action: none;"+(this.Ia+"user-select: none;");b.setAttribute("id",this.Ph);b.setAttribute("style",a);this.A.appendChild(b)}this.ya&&(this.ya.Hc=document.createElement("canvas"),O&&this.ya.Hc.setAttribute("id","lensflarecanvas"),a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;"+
(this.Ia+"user-select: none;"),a+=this.Ia+"pointer-events: none;",this.ya.Hc.setAttribute("style",a),this.V.appendChild(this.ya.Hc));this.va=document.createElement("div");O&&this.va.setAttribute("id","hotspots");a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;";this.Pj&&(a+="background-image: url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);");this.wd&&!this.ma&&(a+=this.Ia+"transform: translateZ(9999999px);");a+=this.Ia+"user-select: none;";
this.va.setAttribute("style",a);this.V.appendChild(this.va);this.sa=document.createElement("canvas");O&&this.sa.setAttribute("id","hotspotcanvas");a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;"+(this.Ia+"user-select: none;");a+=this.Ia+"pointer-events: none;";this.sa.setAttribute("style",a);this.V.appendChild(this.sa);this.ta=document.createElement("div");O&&this.ta.setAttribute("id","hotspottext");this.ta.setAttribute("style","top:\t0px;left: 0px;position:absolute;padding: 3px;visibility: hidden;");
this.ta.innerHTML=" Hotspot text!";this.V.appendChild(this.ta);this.divSkin=this.L=this.va;this.zi(0)}else alert("container not found!")};e.prototype.dj=function(a){this.xa=!0;return function(){a.Ja&&(a.h&&a.h.complete?(a.loaded=!0,a.Ja.drawImage(a.h,0,0,a.width,a.height),a.h=null,a.jd=null):a.jd&&a.jd.complete&&!a.loaded&&(a.Ja.drawImage(a.jd,0,0,a.width,a.height),a.jd=null))}};e.prototype.aj=function(a){var b,d,c,e=128;this.h.qc&&(this.A.style.backgroundColor=this.h.qc.replace("0x","#"));a?(e=this.Te,
this.Qf=1):this.nd>e&&(e=this.nd);for(c=0;6>c;c++){d=this.bb.Xa[c];a?(d.width=this.Te,d.height=this.Te):(d.I=document.createElement("canvas"),d.I.width=this.nd,d.I.height=this.nd,d.width=this.nd,d.height=this.nd,d.Ja=d.I.getContext("2d"));b="position:absolute;";b+="left: 0px;";b+="top: 0px;";b+="width: "+e+"px;";b+="height: "+e+"px;";a&&(b+="outline: 1px solid transparent;");b+=this.Ia+"transform-origin: 0% 0%;";b+="-webkit-user-select: none;";b+=this.Ia+"transform: ";var f;f="";var g=1;this.De&&
(g=100);f=4>c?f+("rotateY("+-90*c+"deg)"):f+("rotateX("+(4==c?-90:90)+"deg)");this.De&&(f+=" scale("+g+")");f+=" translate3d("+-e/2+"px,"+-e/2+"px,"+-e*g/(2*this.Qf)+"px)";b+=f+";";d.Dj=f;a||(d.I.setAttribute("style",b),this.A.insertBefore(d.I,this.A.firstChild))}if(!a){for(c=0;6>c;c++)d=this.bb.Xa[c],""!=this.me[c]&&(d.jd=new Image,d.jd.crossOrigin=this.crossOrigin,d.jd.onload=this.dj(d),d.jd.setAttribute("src",this.Rb(this.me[c])),this.xb.push(d.jd));for(c=0;6>c;c++)d=this.bb.Xa[c],d.loaded=!1,
d.h=new Image,d.h.crossOrigin=this.crossOrigin,d.h.onload=this.dj(d),d.h.setAttribute("src",this.Rb(this.gg[c])),this.xb.push(d.h)}};e.prototype.Og=function(){var a;if(this.Ac){for(a=0;a<this.bb.Xa.length;a++)this.bb.Xa[a].I&&this.bb.Xa[a].I.setAttribute&&(this.bb.Xa[a].I.setAttribute("src",this.hj),this.A.removeChild(this.bb.Xa[a].I));if(this.h.O){for(a=0;a<this.h.O.length;a++){var b=this.h.O[a],d;for(d in b.Z)if(b.Z.hasOwnProperty(d)){var c=b.Z[d];c.visible=!1;c.I&&(c.Ja&&c.Ja.clearRect(0,0,c.Ja.canvas.width,
c.Ja.canvas.height),this.gh.push(c.I));c.h&&delete c.h;c.Eb&&(this.J.deleteTexture(c.Eb),this.ad--);c.Ja=null;c.I=null;c.h=null}delete b.Z}delete this.h.O;this.h.O=null}}this.la.Og();d=[];for(a=0;a<this.H.length;a++)b=this.H[a],b.hd?d.push(b):b.Yd();for(a=0;a<this.Sa.length;a++)this.Sa[a].Yd();this.w.qf=-1;this.sa.style.visibility="hidden";this.ac=0;b=[];this.Ea.Sf=[];for(a=0;a<this.S.length;a++)if(c=this.S[a],0==c.mode||1==c.mode)b.push(c),this.T("Keep in list "+c.id);else if(this.Ca&&this.Ea.enabled&&
this.Rc(c.id))this.Ea.Sf.push(c),1!=this.M.Va&&2!=this.M.Va&&this.Ea.Lh(c);else{try{c.ga?c.je():c.c.pause()}catch(e){this.T(e)}c.Yd()}this.S=b;this.H=d;this.Sa=[];this.o.c&&(this.V.removeChild(this.o.c),this.o.c=null,a=this.Ab("_videopanorama"),0<a.length&&(a[0].c=null));this.o.ed=!1;this.o.wg=!1};e.prototype.Aj=function(){var a=1,b=-1!=navigator.userAgent.indexOf("Mac");window.devicePixelRatio&&b&&(a=window.devicePixelRatio);return{mh:screen.width*a,tg:screen.height*a}};e.prototype.wj=function(){var a=
this.Aj();return a.mh>a.tg?a.mh:a.tg};e.prototype.ti=function(a,b){var d=(new DOMParser).parseFromString(a,"text/xml");this.Gh=a;this.rk(d,b);this.fa&&(this.T("Apply to Flash player"),this.fa.readConfigString(this.Gh),this.fa.setLocked(!0),this.fa.setSlaveMode(!0))};e.prototype.qk=function(a,b,d){try{var c;c=new XMLHttpRequest;c.open("GET",a,!1);c.send(null);if(c.responseXML){var e=a.lastIndexOf("/");0<=e&&(this.pd=a.substr(0,e+1));2<=arguments.length&&null!=b&&(this.pd=b);this.ti(c.responseText,
d)}else alert("Error loading panorama XML")}catch(f){alert("Error:"+f)}};e.prototype.fn=function(a,b,d,c){var e;e=new XMLHttpRequest;var f=this;e.onload=function(g){if(4<=e.readyState)if(e.responseXML){var m=a.lastIndexOf("/");0<=m&&(f.pd=a.substr(0,m+1));3<=arguments.length&&null!=d&&(f.pd=d);f.ti(e.responseText,c);b&&b()}else alert("Error loading panorama XML");else console.error("Wrong state loading XML:"+e.statusText)};e.onerror=function(){console.error("Error loading XML:"+e.statusText)};e.open("GET",
a,!0);e.send(null)};e.prototype.yh=function(a){var b="";"{"==a.charAt(0)&&(b=a.substr(1,a.length-2));a={oldNodeId:this.Qb,nodeId:b};this.Rk("beforechangenodeid",a);""!=this.Qb&&-1==this.Mi.indexOf(this.Qb)&&this.Mi.push(this.Qb);this.Vj=this.Qb;this.Qb=b;this.T("change active node: "+b);this.Oa&&this.Oa.changeActiveNode&&this.Oa.changeActiveNode("{"+b+"}");this.Rk("changenodeid",a)};e.prototype.uj=function(){return this.Qb};e.prototype.xj=function(){if(0<this.Ga.length){var a;a=this.Ga.indexOf(this.Qb);
a++;a>=this.Ga.length&&(a=0);return this.Ga[a]}return""};e.prototype.pm=function(){if(0<this.Ga.length){var a;a=this.Ga.indexOf(this.Qb);a--;0>a&&(a=this.Ga.length-1);return this.Ga[a]}return""};e.prototype.dm=function(){return this.Vj};e.prototype.Pm=function(a){return-1!=this.Mi.indexOf(a)};e.prototype.rk=function(a,b){var d=a.firstChild;this.ce=[];this.Ga=[];if("tour"==d.nodeName){this.nf=!0;var c="",e;(e=d.getAttributeNode("start"))&&(c=e.nodeValue.toString());this.hasOwnProperty("startNode")&&
this.startNode&&(c=String(this.startNode),this.startNode="");for(var d=d.firstChild,f="";d;)"panorama"==d.nodeName&&(e=d.getAttributeNode("id"))&&(e=e.nodeValue.toString(),""==c&&(c=e),""==f&&(f=e),this.ce[e]=d,this.Ga.push(e)),d=d.nextSibling;this.ce.hasOwnProperty(c)||(this.Sc("Start node "+c+" not found!"),c=f);this.si(this.ce[c],b);this.yh("{"+c+"}")}else this.nf=!1,this.si(d,b),this.yh(""),this.Ga.push("")};e.prototype.si=function(a,b){this.wk();this.ya&&this.ya.hn();this.Ee(this.lb);this.Og();
this.rf=0;for(var d=a.firstChild,c,e,f=0;d;){if("view"==d.nodeName){if(c=d.getAttributeNode("fovmode"))this.f.mode=Number(c.nodeValue);c=d.getAttributeNode("pannorth");this.pan.li=1*(c?c.nodeValue:0);for(var g=d.firstChild;g;){"start"==g.nodeName&&(c=g.getAttributeNode("pan"),this.pan.a=Number(c?c.nodeValue:0),this.pan.Ka=this.pan.a,c=g.getAttributeNode("tilt"),this.j.a=Number(c?c.nodeValue:0),this.j.Ka=this.j.a,c=g.getAttributeNode("roll"),this.K.a=Number(c?c.nodeValue:0),this.K.Ka=this.K.a,c=g.getAttributeNode("fov"),
this.f.a=Number(c?c.nodeValue:70),this.f.Ka=this.f.a,c=g.getAttributeNode("projection"),this.Ig=Number(c?c.nodeValue:4),this.ld(this.Ig));"min"==g.nodeName&&(c=g.getAttributeNode("pan"),this.pan.min=1*(c?c.nodeValue:0),c=g.getAttributeNode("tilt"),this.j.min=1*(c?c.nodeValue:-90),c=g.getAttributeNode("fov"),this.f.min=1*(c?c.nodeValue:5),1E-20>this.f.min&&(this.f.min=1E-20),c=g.getAttributeNode("fovpixel"),this.f.xf=1*(c?c.nodeValue:0));if("max"==g.nodeName){c=g.getAttributeNode("pan");this.pan.max=
1*(c?c.nodeValue:0);c=g.getAttributeNode("tilt");this.j.max=1*(c?c.nodeValue:90);c=g.getAttributeNode("fov");this.f.max=1*(c?c.nodeValue:120);180<=this.f.max&&(this.f.max=179.9);if(c=g.getAttributeNode("fovstereographic"))this.f.gi=1*c.nodeValue;if(c=g.getAttributeNode("fovfisheye"))this.f.fi=1*c.nodeValue}if("flyin"==g.nodeName){if(c=g.getAttributeNode("projection"))this.gc.fb=Number(c.nodeValue);if(c=g.getAttributeNode("pan"))this.gc.pan=parseFloat(c.nodeValue);if(c=g.getAttributeNode("tilt"))this.gc.j=
parseFloat(c.nodeValue);if(c=g.getAttributeNode("fov"))this.gc.f=parseFloat(c.nodeValue)}g=g.nextSibling}}if("autorotate"==d.nodeName){if(c=d.getAttributeNode("speed"))this.s.speed=1*c.nodeValue;if(c=d.getAttributeNode("delay"))this.s.timeout=1*c.nodeValue;if(c=d.getAttributeNode("returntohorizon"))this.s.dh=1*c.nodeValue;if(c=d.getAttributeNode("nodedelay"))this.s.Gg=1*c.nodeValue;if(c=d.getAttributeNode("noderandom"))this.s.ki=1==c.nodeValue;this.pe&&(this.s.enabled=!0,this.s.active=!1);if(c=d.getAttributeNode("startloaded"))this.s.Of=
1==c.nodeValue,this.s.Of&&(this.s.active=!1);if(c=d.getAttributeNode("useanimation"))this.s.Ki=1==c.nodeValue;if(c=d.getAttributeNode("syncanimationwithvideo"))this.s.Ei=1==c.nodeValue}if("animation"==d.nodeName){if(c=d.getAttributeNode("syncanimationwithvideo"))this.s.Ei=1==c.nodeValue;if(c=d.getAttributeNode("useinautorotation"))this.s.Ki=1==c.nodeValue;this.Da=[];for(g=d.firstChild;g;){if("clip"==g.nodeName){this.B=new n.dk;if(c=g.getAttributeNode("animtitle"))this.B.Ao=c.nodeValue.toString();
if(c=g.getAttributeNode("cliptitle"))this.B.Wa=c.nodeValue.toString();if(c=g.getAttributeNode("nodeid"))this.B.Bo=c.nodeValue.toString();if(c=g.getAttributeNode("length"))this.B.length=Number(c.nodeValue);if(c=g.getAttributeNode("animtype"))this.B.ul=Number(c.nodeValue);if(c=g.getAttributeNode("nextcliptitle"))this.B.ik=c.nodeValue.toString();if(c=g.getAttributeNode("nextclipnodeid"))this.B.hk=c.nodeValue.toString();if(c=g.getAttributeNode("transitiontype"))this.B.co=Number(c.nodeValue);var m=g.firstChild;
for(this.B.ha=[];m;){if("keyframe"==m.nodeName){var l=new n.wc;if(c=m.getAttributeNode("time"))l.time=Number(c.nodeValue);if(c=m.getAttributeNode("value"))l.value=Number(c.nodeValue);if(c=m.getAttributeNode("transitiontime"))l.hb=Number(c.nodeValue);c=m.getAttributeNode("type");var k=0;c&&(l.type=Number(c.nodeValue),k=Number(c.nodeValue));if(c=m.getAttributeNode("property"))l.mb=Number(c.nodeValue);if(1==k||2==k){if(c=m.getAttributeNode("bezierintime"))l.Id=Number(c.nodeValue);if(c=m.getAttributeNode("bezierinvalue"))l.Ec=
Number(c.nodeValue);if(c=m.getAttributeNode("bezierouttime"))l.Jd=Number(c.nodeValue);if(c=m.getAttributeNode("bezieroutvalue"))l.Kd=Number(c.nodeValue)}this.B.ha.push(l)}m=m.nextSibling}this.Fb==this.B.Wa&&(c=this.B.ha,this.Hf(c[0].value,c[1].value,c[2].value));this.Da.push(this.B)}g=g.nextSibling}}"input"==d.nodeName&&(e||(e=d));if(e)for(g=0;6>g;g++)c=e.getAttributeNode("prev"+g+"url"),this.me[g]=c?String(c.nodeValue):"";"altinput"==d.nodeName&&(g=0,(c=d.getAttributeNode("screensize"))&&(g=1*c.nodeValue),
0<g&&g<=this.wj()&&g>f&&(f=g,e=d));if("control"==d.nodeName&&this.pe){if(c=d.getAttributeNode("simulatemass"))this.G.enabled=1==c.nodeValue;if(c=d.getAttributeNode("locked"))this.C.rb=1==c.nodeValue;c&&(this.C.tf=1==c.nodeValue);if(c=d.getAttributeNode("lockedmouse"))this.C.rb=1==c.nodeValue;if(c=d.getAttributeNode("lockedkeyboard"))this.C.tf=1==c.nodeValue;if(c=d.getAttributeNode("lockedkeyboardzoom"))this.C.di=1==c.nodeValue;if(c=d.getAttributeNode("lockedwheel"))this.C.Cg=1==c.nodeValue;if(c=d.getAttributeNode("invertwheel"))this.C.Mj=
1==c.nodeValue;if(c=d.getAttributeNode("speedwheel"))this.C.Jk=1*c.nodeValue;if(c=d.getAttributeNode("invertcontrol"))this.C.vd=1==c.nodeValue;if(c=d.getAttributeNode("sensitivity"))this.C.sensitivity=1*c.nodeValue,1>this.C.sensitivity&&(this.C.sensitivity=1);if(c=d.getAttributeNode("dblclickfullscreen"))this.C.Ih=1==c.nodeValue;if(c=d.getAttributeNode("contextfullscreen"))this.C.Xe=1==c.nodeValue;if(c=d.getAttributeNode("contextprojections"))this.C.fg=1==c.nodeValue;if(c=d.getAttributeNode("hideabout"))this.C.kf=
1==c.nodeValue;for(g=d.firstChild;g;)"menulink"==g.nodeName&&(m={text:"",url:""},c=g.getAttributeNode("text"),m.text=c.nodeValue,c=g.getAttributeNode("url"),m.url=c.nodeValue,this.wf.push(m)),g=g.nextSibling}if("transition"==d.nodeName){if(c=d.getAttributeNode("enabled"))this.M.enabled=1==c.nodeValue;if(c=d.getAttributeNode("blendtime"))this.M.Vi=c.nodeValue;if(c=d.getAttributeNode("blendcolor"))this.M.cg=c.nodeValue.toString();if(c=d.getAttributeNode("type"))this.M.type=c.nodeValue.toString();if(c=
d.getAttributeNode("softedge"))this.M.Tc=1*c.nodeValue;if(c=d.getAttributeNode("zoomin"))this.M.Va=c.nodeValue;if(c=d.getAttributeNode("zoomout"))this.M.Dc=c.nodeValue;if(c=d.getAttributeNode("zoomfov"))this.M.oh=c.nodeValue;if(c=d.getAttributeNode("zoomspeed"))this.M.Oe=c.nodeValue;if(c=d.getAttributeNode("zoomoutpause"))this.M.ph=1==c.nodeValue}if("soundstransition"==d.nodeName){if(c=d.getAttributeNode("enabled"))this.Ea.enabled=1==c.nodeValue;if(c=d.getAttributeNode("transitiontime"))this.Ea.hb=
1*c.nodeValue;if(c=d.getAttributeNode("crossfade"))this.Ea.cj=1==c.nodeValue}if("flyintransition"==d.nodeName){if(c=d.getAttributeNode("enabled"))this.Bb.enabled=1==c.nodeValue;if(c=d.getAttributeNode("speed"))this.Bb.speed=1*c.nodeValue}"userdata"==d.nodeName&&(this.userdata=this.Me=this.kg(d));if("hotspots"==d.nodeName)for(g=d.firstChild;g;){if("label"==g.nodeName&&this.pe){m=this.w.Gi;if(c=g.getAttributeNode("enabled"))m.enabled=1==c.nodeValue;if(c=g.getAttributeNode("width"))m.width=1*c.nodeValue;
if(c=g.getAttributeNode("height"))m.height=1*c.nodeValue;if(c=g.getAttributeNode("textcolor"))m.Hi=1*c.nodeValue;if(c=g.getAttributeNode("textalpha"))m.Fi=1*c.nodeValue;if(c=g.getAttributeNode("background"))m.background=1==c.nodeValue;if(c=g.getAttributeNode("backgroundalpha"))m.Kb=1*c.nodeValue;if(c=g.getAttributeNode("backgroundcolor"))m.Lb=1*c.nodeValue;if(c=g.getAttributeNode("border"))m.wh=1*c.nodeValue;if(c=g.getAttributeNode("bordercolor"))m.Ob=1*c.nodeValue;if(c=g.getAttributeNode("borderalpha"))m.Nb=
1*c.nodeValue;if(c=g.getAttributeNode("borderradius"))m.vh=1*c.nodeValue;if(c=g.getAttributeNode("wordwrap"))m.nh=1==c.nodeValue}if("polystyle"==g.nodeName&&this.pe){if(c=g.getAttributeNode("mode"))this.w.mode=1*c.nodeValue;if(c=g.getAttributeNode("bordercolor"))this.w.Ob=1*c.nodeValue;if(c=g.getAttributeNode("backgroundcolor"))this.w.Lb=1*c.nodeValue;if(c=g.getAttributeNode("borderalpha"))this.w.Nb=1*c.nodeValue;if(c=g.getAttributeNode("backgroundalpha"))this.w.Kb=1*c.nodeValue;if(c=g.getAttributeNode("handcursor"))this.w.ue=
1==c.nodeValue}c=void 0;"hotspot"==g.nodeName&&(c=new n.zg(this),c.type="point",c.ub(g),this.N.push(c));"polyhotspot"==g.nodeName&&(c=new n.zg(this),c.type="poly",c.ub(g),this.N.push(c));g=g.nextSibling}if("sounds"==d.nodeName||"media"==d.nodeName)for(g=d.firstChild;g;)"sound"!=g.nodeName||this.jk||(c=new n.ql(this),c.ub(g),this.ob||c.addElement()),"video"==g.nodeName&&(c=new n.Bk(this),c.ub(g),this.ob||c.addElement()),"image"==g.nodeName&&(c=new n.ol(this),c.ub(g),this.ob||c.addElement()),"lensflare"==
g.nodeName&&this.ya&&(c=new n.pl(this),c.ub(g),this.ya.sf.push(c)),g=g.nextSibling;d=d.nextSibling}b&&""!=b&&(d=b.toString().split("/"),0<d.length&&(c=String(d[0]),"N"==c.charAt(0)?this.yi(Number(c.substr(1))):"S"==c.charAt(0)?this.yi(-180+Number(c.substr(1))):this.Tg(Number(c))),1<d.length&&this.Ug(Number(d[1])),2<d.length&&this.Sg(Number(d[2])));if(e){for(g=0;6>g;g++)(c=e.getAttributeNode("tile"+g+"url"))&&(this.gg[g]=String(c.nodeValue)),c=e.getAttributeNode("tile"+g+"url1");for(g=0;6>g;g++)(c=
e.getAttributeNode("prev"+g+"url"))&&(this.me[g]=String(c.nodeValue));if(c=e.getAttributeNode("tilesize"))this.nd=1*c.nodeValue;if(c=e.getAttributeNode("canvassize"))this.Te=Number(c.nodeValue);if(c=e.getAttributeNode("tilescale"))this.Qf=1*c.nodeValue;if(c=e.getAttributeNode("leveltileurl"))this.h.ck=c.nodeValue;if(c=e.getAttributeNode("leveltilesize"))this.h.F=Number(c.nodeValue);if(c=e.getAttributeNode("levelbias"))this.h.ak=Number(c.nodeValue);if(c=e.getAttributeNode("levelbiashidpi"))this.h.bk=
Number(c.nodeValue);c=e.getAttributeNode("overlap");this.za.K=0;this.za.pitch=0;c&&(this.h.Ua=Number(c.nodeValue));if(c=e.getAttributeNode("levelingroll"))this.za.K=Number(c.nodeValue);if(c=e.getAttributeNode("levelingpitch"))this.za.pitch=Number(c.nodeValue);this.ac=0;(c=e.getAttributeNode("flat"))&&1==c.nodeValue&&(this.ac=2);c=e.getAttributeNode("width");this.h.width=1*(c?c.nodeValue:1);c=e.getAttributeNode("height");this.h.height=1*(c?c.nodeValue:this.h.width);this.o.src=[];this.h.O=[];for(g=
e.firstChild;g;){if("preview"==g.nodeName){if(c=g.getAttributeNode("color"))this.h.qc=c.nodeValue;if(c=g.getAttributeNode("strip"))this.h.pk=1==c.nodeValue}if("video"==g.nodeName){if(c=g.getAttributeNode("format"))"3x2"==c.nodeValue&&(this.o.format=14),"equirectangular"==c.nodeValue&&(this.o.format=1);if(c=g.getAttributeNode("bleed"))this.o.he=Number(c.nodeValue);if(c=g.getAttributeNode("endaction"))this.o.Od=String(c.nodeValue);if(c=g.getAttributeNode("width"))this.o.width=Number(c.nodeValue);if(c=
g.getAttributeNode("height"))this.o.height=Number(c.nodeValue);for(e=g.firstChild;e;)"source"==e.nodeName&&(c=e.getAttributeNode("url"))&&this.o.src.push(c.nodeValue.toString()),e=e.nextSibling}if("level"==g.nodeName){e=new n.kk;c=g.getAttributeNode("width");e.width=1*(c?c.nodeValue:1);c=g.getAttributeNode("height");e.height=1*(c?c.nodeValue:e.width);if(c=g.getAttributeNode("preload"))e.cache=1==c.nodeValue;if(c=g.getAttributeNode("preview"))e.Be=1==c.nodeValue;e.P=Math.floor((e.width+this.h.F-1)/
this.h.F);e.ja=Math.floor((e.height+this.h.F-1)/this.h.F);this.h.O.push(e)}g=g.nextSibling}this.h.ai=this.h.O.length}this.Vf&&(this.ma=this.Ac=!1,this.Pb||(this.T("dummy rendering"),this.Pb=document.createElement("canvas"),this.Pb.width=100,this.Pb.height=100,this.Pb.id="dummycanvas",this.A.appendChild(this.Pb)),this.od());this.ma&&this.J&&(this.la.Kj(this.Qf),this.la.Lj());this.Ac&&(0<this.h.O.length?this.aj(!0):this.aj(!1),this.rf=0);var q=this;0<this.h.O.length&&this.h.pk&&0==this.ac&&(d=new Image,
e=new n.kk,e.Be=!0,e.cache=!0,e.P=e.ja=0,e.height=e.width=0,this.h.O.push(e),d.crossOrigin=this.crossOrigin,d.onload=this.la.Om(d),d.setAttribute("src",this.He(6,this.h.ai-1,0,0)));if(0<this.o.src.length)if(this.lh){this.o.c=document.createElement("video");this.o.c.crossOrigin=this.crossOrigin;this.o.c.setAttribute("style","display:none; max-width:none;");this.o.c.setAttribute("playsinline","playsinline");this.o.c.b=!0;this.o.c.volume=this.W;this.V.appendChild(this.o.c);this.o.ed=!1;this.o.Ok=!1;
this.o.c.oncanplay=function(){if(!q.o.ed){q.o.wg=!0;var a,b,c,d,e,f,g=[],h=new n.ua,k=q.J,l=q.o.c.videoWidth/3;q.o.width=q.o.c.videoWidth;q.o.height=q.o.c.videoHeight;for(a=0;6>a;a++)for(c=a%3*l+q.o.he,e=c+l-2*q.o.he,f=4,3>a&&(f+=l),d=f+l-2*q.o.he,b=0;4>b;b++){h.x=-1;h.y=-1;h.z=1;for(var m=0;m<b;m++)h.Ak();g.push((0<h.x?c:e)/(3*l),(0<h.y?d:f)/(2*l))}k.bindBuffer(k.ARRAY_BUFFER,q.o.ah);k.bufferData(k.ARRAY_BUFFER,new Float32Array(g),k.STATIC_DRAW)}};"exit"==this.o.Od?this.o.c.onended=function(){q.o.wg=
!1;q.o.ed=!1;q.V.removeChild(q.o.c);q.o.c=null;q.update()}:"stop"==this.o.Od?q.o.c.onended=function(){q.update()}:"{"==this.o.Od.charAt(0)?this.o.c.onended=function(){q.Vd(q.o.Od,"$fwd")}:this.o.c.loop=!0;for(g=0;g<this.o.src.length;g++)e=document.createElement("source"),e.setAttribute("src",this.Rb(this.o.src[g])),this.o.c.appendChild(e);e=this.Ab("_videopanorama");0<e.length?e[0].c=this.o.c:this.sk("_videopanorama",this.o.c);this.o.c.play()}else"{"==this.o.Od.charAt(0)&&q.Vd(q.o.Od,"$fwd");this.Qi();
this.M.Dd||this.Mk();this.update();this.pe&&(this.L&&this.L.ggViewerInit&&this.L.ggViewerInit(),this.Bb.enabled&&(this.ld(9),this.pan.a=this.gc.pan,this.j.a=this.gc.j,this.f.a=this.gc.f,this.Ma=this.gc.fb,this.B=this.og(!1),this.pan.a=this.B.ha[0].value,this.j.a=this.B.ha[1].value,this.f.a=this.B.ha[2].value,3==this.B.ha[3].mb&&this.ld(this.B.ha[3].value),this.Fb=this.B.Wa,this.s.active=!1,this.s.mg=!0));this.pe=!1;this.jf=!0;this.od()};e.prototype.mi=function(a,b){0<a.length&&(".xml"==a.substr(a.length-
4)||".swf"==a.substr(a.length-4)||"{"==a.charAt(0)?this.Vd(this.Rb(a),b):window.open(this.Rb(a),b))};e.prototype.Rn=function(){this.jf=this.isLoaded=!1;this.checkLoaded=this.xb=[];this.Jg=0;this.L&&this.L.ggReLoaded&&this.L.ggReLoaded()};e.prototype.Vd=function(a,b){if(""!=a&&"{}"!=a){this.Rn();this.Oa&&this.Oa.hotspotProxyOut&&this.Oa.hotspotProxyOut(this.wa.id);".swf"==a.substr(a.length-4)&&(a=a.substr(0,a.length-4)+".xml");var d="";b&&(d=b.toString());d=d.replace("$cur",this.pan.a+"/"+this.j.a+
"/"+this.f.a);d=d.replace("$fwd","N"+this.qg()+"/"+this.j.a+"/"+this.f.a);d=d.replace("$bwd","S"+this.qg()+"/"+this.j.a+"/"+this.f.a);d=d.replace("$ap",String(this.pan.a));d=d.replace("$an",String(this.qg()));d=d.replace("$at",String(this.j.a));d=d.replace("$af",String(this.f.a));if(""!=d){var c=d.split("/");3<c.length&&""!=c[3]&&(this.startNode=c[3])}this.pa();if("{"==a.charAt(0)){var c=a.substr(1,a.length-2),e=this.M,f=this.J;if(this.ce[c]){if(0==this.ac&&this.M.enabled&&this.ma&&this.M.Jb){e.Je||
e.Dd||(e.hi=this.C.rb,e.Ni=this.C.Cg,e.Zh=this.C.tf,this.Ff(!0),this.Gf(!0),this.Ef(!0));var g;"wipeleftright"==e.type?g=1:"wiperightleft"==e.type?g=2:"wipetopbottom"==e.type?g=3:"wipebottomtop"==e.type?g=4:"wiperandom"==e.type&&(g=Math.ceil(4*Math.random()));e.Hh=g;f.bindFramebuffer(f.FRAMEBUFFER,e.Jb);f.viewport(0,0,e.Jb.width,e.Jb.height);f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT);e.Rf=!0;this.Uf();e.Rf=!1;f.bindFramebuffer(f.FRAMEBUFFER,null);f.viewport(0,0,this.eb.width,this.eb.height);g=
new Date;this.wa!=this.lb?(e.$f=this.wa.bc/this.m.width,e.ag=1-this.wa.tb/this.m.height):(e.$f=.5,e.ag=.5);1!=e.Va&&2!=e.Va?(e.Ci=g.getTime(),e.Je=!0):(e.gl=g.getTime(),e.Dd=!0,e.ib=Math.sin(this.Db()/2*Math.PI/180)/Math.sin(e.oh/2*Math.PI/180),e.ib=Math.max(e.ib,1),e.fl=1/e.Oe*e.ib*.3)}this.si(this.ce[c],d);this.yh(a);e.enabled&&this.ma&&0!=e.Dc&&(e.Zg=this.Rh(),e.$g=this.Th(),e.Ge=this.Db(),e.Uc=this.La(),1==e.Dc||3==e.Dc?this.Jf(e.oh):2==e.Dc?this.Jf(this.bf()+(this.bf()-e.oh)):4==e.Dc&&(this.ld(this.gc.fb),
this.Tg(this.gc.pan),this.Ug(this.gc.j),this.Jf(this.gc.f)),e.ph||1==e.Va||2==e.Va||this.moveTo(e.Zg,e.$g,e.Ge,e.Oe,0,e.Uc));this.fa&&this.fa.openNext(a,d)}else{this.Sc("invalid node id: "+c);return}}else this.qk(a,null,d);this.update(5)}};e.prototype.gm=function(){return this.nf?this.Ga.slice(0):[""]};e.prototype.kg=function(a){var b,d;d=[];d.title="";d.description="";d.author="";d.datetime="";d.copyright="";d.source="";d.information="";d.comment="";d.latitude=0;d.longitude=0;d.tags=[];if(a&&((b=
a.getAttributeNode("title"))&&(d.title=b.nodeValue.toString()),(b=a.getAttributeNode("description"))&&(d.description=b.nodeValue.toString()),(b=a.getAttributeNode("author"))&&(d.author=b.nodeValue.toString()),(b=a.getAttributeNode("datetime"))&&(d.datetime=b.nodeValue.toString()),(b=a.getAttributeNode("copyright"))&&(d.copyright=b.nodeValue.toString()),(b=a.getAttributeNode("source"))&&(d.source=b.nodeValue.toString()),(b=a.getAttributeNode("info"))&&(d.information=b.nodeValue.toString()),(b=a.getAttributeNode("comment"))&&
(d.comment=b.nodeValue.toString()),(b=a.getAttributeNode("latitude"))&&(d.latitude=Number(b.nodeValue)),(b=a.getAttributeNode("longitude"))&&(d.longitude=Number(b.nodeValue)),b=a.getAttributeNode("tags"))){a=b.nodeValue.toString().split("|");for(b=0;b<a.length;b++)""==a[b]&&(a.splice(b,1),b--);d.tags=a}return d};e.prototype.Qh=function(a){if(!a)return this.Me;if(a=this.ce[a])for(a=a.firstChild;a;){if("userdata"==a.nodeName)return this.kg(a);a=a.nextSibling}return this.kg()};e.prototype.hm=function(a){a=
this.Qh(a);var b=[];""!=a.latitude&&0!=a.latitude&&0!=a.longitude&&(b.push(a.latitude),b.push(a.longitude));return b};e.prototype.im=function(a){return this.Qh(a).title};e.prototype.te=function(a,b){var d;for(d=0;d<this.B.ha.length;d++)if(this.B.ha[d].time==a&&this.B.ha[d].mb==b)return this.B.ha[d];return!1};e.prototype.fm=function(a){var b,d=1E5,c=a,e=!1;for(b=0;b<this.B.ha.length;b++)this.B.ha[b].mb==a.mb&&this.B.ha[b].time>a.time&&this.B.ha[b].time<d&&(c=this.B.ha[b],d=c.time,e=!0);return e?c:
!1};e.prototype.og=function(a){for(var b=0;b<this.Da.length;b++)if(this.Da[b].Wa&&0==this.Da[b].Wa.indexOf("__FlyIn"))return this.Da[b];b=new n.Tj;b.Wa="__FlyIn";b.Kf=this.pan.a;b.Mf=this.j.a;b.md=this.f.a;b.Lf=this.Ma;b.ae=this.pan.Ka;b.be=this.j.Ka;b.Pf=this.f.Ka;b.Uc=this.Ig;a?(b.ne=!1,b.Md=!1,b.speed=this.M.Oe):(b.ne=!0,b.Md=!0,b.speed=this.Bb.speed);return this.rj(b)};e.prototype.rj=function(a){var b=new n.dk;b.Wa=a.Wa;b.ha=[];var d=a.Lf!=a.Uc&&-1!=a.Uc,c=a.ae-a.Kf;if(360==this.pan.max-this.pan.min){for(;-360>
c;)c+=360;for(;360<c;)c-=360}var e=a.be-a.Mf,f=a.Pf-a.md,g=Math.round(Math.sqrt(c*c+e*e+f*f)/a.speed*.33);d&&(g=Math.max(10,g));b.length=g;var m,l;a.Nd&&(m=Math.ceil(.7*g),m=Math.min(15,m),m=Math.max(5,m),b.length=g+m,l=.33*m);var k=a.Pf,q=g,p=0,u=g-1;if(d){var t=a.md,w;4==a.Uc?w=120:w=this.se(a.Uc);var k=Math.min(a.Pf,w),f=k-a.md,r=new n.fc(0,a.md),v=new n.fc(g,k),z=new n.fc,A=new n.fc;A.Ta(g/3,a.md+f/3);z.Ta(2*g/3,k-f/3);if(t>w)for(;p<=g&&t>w;)t=new n.fc,t.uh(r,v,A,z,p),t=t.y,p++;else p=1;p>=.8*
g&&(q=p=Math.round(.8*g));0==p&&(p=1);var x;4==a.Lf?x=120:x=this.se(a.Lf);w=a.Pf;if(w>x)for(;u>p&&w>x;)t=new n.fc,t.uh(r,v,A,z,u),w=t.y,u--}r=new n.wc;r.time=0;r.mb=0;r.value=a.Kf;r.type=1;r.Jd=g/3;r.Kd=a.ne?a.Kf:a.Kf+c/3;b.ha.push(r);r=new n.wc;r.time=0;r.mb=1;r.value=a.Mf;r.type=1;r.Jd=g/3;r.Kd=a.ne?a.Mf:a.Mf+e/3;b.ha.push(r);r=new n.wc;r.time=0;r.mb=2;r.value=a.md;r.type=1;r.Jd=g/3;r.Kd=a.ne?a.md:a.md+f/3;b.ha.push(r);r=new n.wc;r.time=0;r.mb=3;r.value=a.Lf;r.type=0;r.hb=0;b.ha.push(r);d&&(r=new n.wc,
r.time=p,r.mb=3,r.value=a.Uc,r.type=0,r.hb=u-p,b.ha.push(r));r=new n.wc;r.time=g;r.mb=0;r.value=a.ae;r.type=1;r.Id=2*g/3;a.Md&&!a.Nd?r.Ec=a.ae:r.Ec=a.ae-c/3;a.Nd&&(r.Jd=g+l,r.Kd=r.value+l/g*c);b.ha.push(r);r=new n.wc;r.time=g;r.mb=1;r.value=a.be;r.type=1;r.Id=2*g/3;a.Md&&!a.Nd?r.Ec=a.be:r.Ec=a.be-e/3;a.Nd&&(r.Jd=g+l,r.Kd=r.value+l/g*e);b.ha.push(r);r=new n.wc;r.time=q;r.mb=2;r.value=k;r.type=1;r.Id=2*q/3;a.Md?r.Ec=k:r.Ec=k-f/3;b.ha.push(r);a.Nd&&(r=new n.wc,r.time=g+m,r.mb=0,r.value=a.ae,r.type=1,
r.Id=g+m-l,r.Ec=a.ae,b.ha.push(r),r=new n.wc,r.time=g+m,r.mb=1,r.value=a.be,r.type=1,r.Id=g+m-l,r.Ec=a.be,b.ha.push(r));this.Da.push(b);return b};e.prototype.ro=function(){this.o.c&&this.o.c.play()};e.prototype.so=function(){this.o.c&&(this.o.c.pause(),this.o.c.currentTime=0)};e.prototype.qo=function(){this.o.c&&this.o.c.pause()};e.prototype.Gn=function(a){this.o.c&&(0>a&&(a=0),a>this.o.c.duration&&(a=this.o.c.duration-.1),this.o.c.currentTime=a,this.update())};e.prototype.um=function(){return this.o.c?
this.o.c.currentTime:0};e.prototype.tm=function(){if(this.o.c)return this.o.c};e.prototype.Fn=function(a){if(this.o.c){var b=!this.o.c.paused&&!this.o.c.ended,d=this.o.c.currentTime;this.o.c.pause();isNaN(parseInt(a,10))?this.o.c.src=String(a):this.o.c.src=this.o.src[parseInt(a,10)];b&&(this.o.c.onloadedmetadata=function(){this.currentTime=d;this.play();this.onloadedmetadata=null});this.o.c.currentTime=d}};e.prototype.Ol=function(){this.jk=!0};return e}();n.b=f})(ggP2VR||(ggP2VR={}));
window.ggHasHtml5Css3D=G;window.ggHasWebGL=N;window.pano2vrPlayer=ggP2VR.b;ggP2VR.b.prototype.readConfigString=ggP2VR.b.prototype.ti;ggP2VR.b.prototype.readConfigUrl=ggP2VR.b.prototype.qk;ggP2VR.b.prototype.readConfigUrlAsync=ggP2VR.b.prototype.fn;ggP2VR.b.prototype.readConfigXml=ggP2VR.b.prototype.rk;ggP2VR.b.prototype.openUrl=ggP2VR.b.prototype.mi;ggP2VR.b.prototype.openNext=ggP2VR.b.prototype.Vd;ggP2VR.b.prototype.setMargins=ggP2VR.b.prototype.un;ggP2VR.b.prototype.addListener=ggP2VR.b.prototype.addListener;
ggP2VR.b.prototype.removeEventListener=ggP2VR.b.prototype.removeEventListener;ggP2VR.b.prototype.detectBrowser=ggP2VR.b.prototype.gj;ggP2VR.b.prototype.initWebGL=ggP2VR.b.prototype.Qc;ggP2VR.b.prototype.getPercentLoaded=ggP2VR.b.prototype.lm;ggP2VR.b.prototype.setBasePath=ggP2VR.b.prototype.nn;ggP2VR.b.prototype.getBasePath=ggP2VR.b.prototype.Vl;ggP2VR.b.prototype.setViewerSize=ggP2VR.b.prototype.Ek;ggP2VR.b.prototype.getViewerSize=ggP2VR.b.prototype.xm;ggP2VR.b.prototype.setSkinObject=ggP2VR.b.prototype.En;
ggP2VR.b.prototype.changeViewMode=ggP2VR.b.prototype.Hl;ggP2VR.b.prototype.getViewMode=ggP2VR.b.prototype.vm;ggP2VR.b.prototype.changePolygonMode=ggP2VR.b.prototype.Yi;ggP2VR.b.prototype.setPolygonMode=ggP2VR.b.prototype.Yi;ggP2VR.b.prototype.getPolygonMode=ggP2VR.b.prototype.nm;ggP2VR.b.prototype.showOnePolyHotspot=ggP2VR.b.prototype.Gk;ggP2VR.b.prototype.hideOnePolyHotspot=ggP2VR.b.prototype.Gj;ggP2VR.b.prototype.changePolyHotspotColor=ggP2VR.b.prototype.El;
ggP2VR.b.prototype.toggleOnePolyHotspot=ggP2VR.b.prototype.Yn;ggP2VR.b.prototype.changeViewState=ggP2VR.b.prototype.Il;ggP2VR.b.prototype.getViewState=ggP2VR.b.prototype.wm;ggP2VR.b.prototype.setRenderFlags=ggP2VR.b.prototype.wn;ggP2VR.b.prototype.getRenderFlags=ggP2VR.b.prototype.qm;ggP2VR.b.prototype.setMaxTileCount=ggP2VR.b.prototype.Ck;ggP2VR.b.prototype.getVFov=ggP2VR.b.prototype.Db;ggP2VR.b.prototype.setVFov=ggP2VR.b.prototype.Jf;ggP2VR.b.prototype.getHFov=ggP2VR.b.prototype.vj;
ggP2VR.b.prototype.updatePanorama=ggP2VR.b.prototype.Uf;ggP2VR.b.prototype.isTouching=ggP2VR.b.prototype.Dm;ggP2VR.b.prototype.getIsMobile=ggP2VR.b.prototype.am;ggP2VR.b.prototype.setIsMobile=ggP2VR.b.prototype.sn;ggP2VR.b.prototype.getIsAutorotating=ggP2VR.b.prototype.Zl;ggP2VR.b.prototype.getIsLoaded=ggP2VR.b.prototype.pg;ggP2VR.b.prototype.getIsTileLoading=ggP2VR.b.prototype.bm;ggP2VR.b.prototype.getLastActivity=ggP2VR.b.prototype.cm;ggP2VR.b.prototype.getPan=ggP2VR.b.prototype.Rh;
ggP2VR.b.prototype.getPanNorth=ggP2VR.b.prototype.qg;ggP2VR.b.prototype.getPanDest=ggP2VR.b.prototype.jm;ggP2VR.b.prototype.getPanN=ggP2VR.b.prototype.km;ggP2VR.b.prototype.setPan=ggP2VR.b.prototype.Tg;ggP2VR.b.prototype.setPanNorth=ggP2VR.b.prototype.yi;ggP2VR.b.prototype.changePan=ggP2VR.b.prototype.dg;ggP2VR.b.prototype.changePanLog=ggP2VR.b.prototype.Dl;ggP2VR.b.prototype.getTilt=ggP2VR.b.prototype.Th;ggP2VR.b.prototype.getTiltDest=ggP2VR.b.prototype.sm;ggP2VR.b.prototype.setTilt=ggP2VR.b.prototype.Ug;
ggP2VR.b.prototype.changeTilt=ggP2VR.b.prototype.eg;ggP2VR.b.prototype.changeTiltLog=ggP2VR.b.prototype.Gl;ggP2VR.b.prototype.getFov=ggP2VR.b.prototype.bf;ggP2VR.b.prototype.getFovDest=ggP2VR.b.prototype.Xl;ggP2VR.b.prototype.setFov=ggP2VR.b.prototype.Sg;ggP2VR.b.prototype.changeFov=ggP2VR.b.prototype.Xi;ggP2VR.b.prototype.changeFovLog=ggP2VR.b.prototype.Ue;ggP2VR.b.prototype.getRoll=ggP2VR.b.prototype.rm;ggP2VR.b.prototype.setRoll=ggP2VR.b.prototype.xn;ggP2VR.b.prototype.setPanTilt=ggP2VR.b.prototype.vn;
ggP2VR.b.prototype.setPanTiltFov=ggP2VR.b.prototype.Hf;ggP2VR.b.prototype.setDefaultView=ggP2VR.b.prototype.pn;ggP2VR.b.prototype.setLocked=ggP2VR.b.prototype.tn;ggP2VR.b.prototype.setLockedMouse=ggP2VR.b.prototype.Ff;ggP2VR.b.prototype.setLockedKeyboard=ggP2VR.b.prototype.Ef;ggP2VR.b.prototype.setLockedWheel=ggP2VR.b.prototype.Gf;ggP2VR.b.prototype.moveTo=ggP2VR.b.prototype.moveTo;ggP2VR.b.prototype.moveToEx=ggP2VR.b.prototype.Eg;ggP2VR.b.prototype.moveToDefaultView=ggP2VR.b.prototype.Km;
ggP2VR.b.prototype.moveToDefaultViewEx=ggP2VR.b.prototype.Lm;ggP2VR.b.prototype.addHotspotElements=ggP2VR.b.prototype.Qi;ggP2VR.b.prototype.playSound=ggP2VR.b.prototype.Xd;ggP2VR.b.prototype.playPauseSound=ggP2VR.b.prototype.nk;ggP2VR.b.prototype.playStopSound=ggP2VR.b.prototype.dn;ggP2VR.b.prototype.pauseSound=ggP2VR.b.prototype.oi;ggP2VR.b.prototype.activateSound=ggP2VR.b.prototype.sl;ggP2VR.b.prototype.soundGetTime=ggP2VR.b.prototype.Mn;ggP2VR.b.prototype.soundSetTime=ggP2VR.b.prototype.Nn;
ggP2VR.b.prototype.isPlaying=ggP2VR.b.prototype.Rc;ggP2VR.b.prototype.stopSound=ggP2VR.b.prototype.Nk;ggP2VR.b.prototype.setVolume=ggP2VR.b.prototype.Hn;ggP2VR.b.prototype.changeVolume=ggP2VR.b.prototype.Jl;ggP2VR.b.prototype.removeHotspots=ggP2VR.b.prototype.wk;ggP2VR.b.prototype.addHotspot=ggP2VR.b.prototype.tl;ggP2VR.b.prototype.updateHotspot=ggP2VR.b.prototype.ho;ggP2VR.b.prototype.removeHotspot=ggP2VR.b.prototype.gn;ggP2VR.b.prototype.setActiveHotspot=ggP2VR.b.prototype.Ee;
ggP2VR.b.prototype.getPointHotspotIds=ggP2VR.b.prototype.mm;ggP2VR.b.prototype.getHotspot=ggP2VR.b.prototype.Yl;ggP2VR.b.prototype.setFullscreen=ggP2VR.b.prototype.Fe;ggP2VR.b.prototype.toggleFullscreen=ggP2VR.b.prototype.fh;ggP2VR.b.prototype.enterFullscreen=ggP2VR.b.prototype.Pl;ggP2VR.b.prototype.exitFullscreen=ggP2VR.b.prototype.exitFullscreen;ggP2VR.b.prototype.getIsFullscreen=ggP2VR.b.prototype.$l;ggP2VR.b.prototype.startAutorotate=ggP2VR.b.prototype.Kk;ggP2VR.b.prototype.stopAutorotate=ggP2VR.b.prototype.Tn;
ggP2VR.b.prototype.toggleAutorotate=ggP2VR.b.prototype.Xn;ggP2VR.b.prototype.startAnimation=ggP2VR.b.prototype.Qn;ggP2VR.b.prototype.createLayers=ggP2VR.b.prototype.bj;ggP2VR.b.prototype.removePanorama=ggP2VR.b.prototype.Og;ggP2VR.b.prototype.getScreenResolution=ggP2VR.b.prototype.Aj;ggP2VR.b.prototype.getMaxScreenResolution=ggP2VR.b.prototype.wj;ggP2VR.b.prototype.getNodeIds=ggP2VR.b.prototype.gm;ggP2VR.b.prototype.getNodeUserdata=ggP2VR.b.prototype.Qh;ggP2VR.b.prototype.getNodeLatLng=ggP2VR.b.prototype.hm;
ggP2VR.b.prototype.getNodeTitle=ggP2VR.b.prototype.im;ggP2VR.b.prototype.getCurrentNode=ggP2VR.b.prototype.uj;ggP2VR.b.prototype.getNextNode=ggP2VR.b.prototype.xj;ggP2VR.b.prototype.getPrevNode=ggP2VR.b.prototype.pm;ggP2VR.b.prototype.getLastVisitedNode=ggP2VR.b.prototype.dm;ggP2VR.b.prototype.getCurrentPointHotspots=ggP2VR.b.prototype.Wl;ggP2VR.b.prototype.getPositionAngles=ggP2VR.b.prototype.om;ggP2VR.b.prototype.getPositionRawAngles=ggP2VR.b.prototype.yj;ggP2VR.b.prototype.nodeVisited=ggP2VR.b.prototype.Pm;
ggP2VR.b.prototype.setElementIdPrefix=ggP2VR.b.prototype.qn;ggP2VR.b.prototype.videoPanoPlay=ggP2VR.b.prototype.ro;ggP2VR.b.prototype.videoPanoStop=ggP2VR.b.prototype.so;ggP2VR.b.prototype.videoPanoPause=ggP2VR.b.prototype.qo;ggP2VR.b.prototype.getVideoPanoTime=ggP2VR.b.prototype.um;ggP2VR.b.prototype.setVideoPanoTime=ggP2VR.b.prototype.Gn;ggP2VR.b.prototype.getVideoPanoObject=ggP2VR.b.prototype.tm;ggP2VR.b.prototype.setVideoPanoSource=ggP2VR.b.prototype.Fn;ggP2VR.b.prototype.getMediaObject=ggP2VR.b.prototype.em;
ggP2VR.b.prototype.registerVideoElement=ggP2VR.b.prototype.sk;ggP2VR.b.prototype.disableSoundLoading=ggP2VR.b.prototype.Ol;ggP2VR.b.prototype.setCrossOrigin=ggP2VR.b.prototype.on;ggP2VR.b.prototype.setProjection=ggP2VR.b.prototype.ld;ggP2VR.b.prototype.getProjection=ggP2VR.b.prototype.La;ggP2VR.b.prototype.changeProjection=ggP2VR.b.prototype.Fl;ggP2VR.b.prototype.changeProjectionEx=ggP2VR.b.prototype.Zi;ggP2VR.b.prototype.changeLensflares=ggP2VR.b.prototype.Cl;
